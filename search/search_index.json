{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-]","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"#reference","title":"Reference","text":"<ul> <li> <p>Material for MkDocs</p> </li> <li> <p>Getting Started with MkDocs</p> </li> </ul>"},{"location":"algorithm/","title":"\u7b97\u6cd5","text":""},{"location":"algorithm/#_2","title":"\u53c2\u8003\u200b\u6587\u6863","text":"<ol> <li>OI Wiki \u200b\u9879\u76ee\u200b\u7b97\u6cd5\u200b</li> </ol>"},{"location":"database/","title":"\u6570\u636e\u5e93","text":""},{"location":"database/#_2","title":"\u53c2\u8003\u200b\u6587\u6863","text":"<ol> <li>\u200b\u56fe\u89e3\u200bMysql</li> <li>\u200b\u56fe\u89e3\u200bRedis</li> </ol>"},{"location":"embedded_development/","title":"\u5d4c\u5165\u5f0f\u200b\u5f00\u53d1\u200b\u7b14\u8bb0","text":""},{"location":"embedded_development/#1","title":"1. \u200b\u82af\u7247\u200b\u67b6\u6784","text":"<ol> <li> <p>Cortex-M\u200b\u4ece\u200b\u96f6\u4e0a\u200b\u624b\u200b\u5fc5\u8bfb\u200b</p> </li> <li> <p>ARM \u200b\u67b6\u6784\u200b\u5bb6\u65cf\u53f2\u200b</p> </li> </ol>"},{"location":"embedded_development/#11-arm","title":"1.1. ARM\u200b\u67b6\u6784\u200b\u79cd\u7c7b","text":"<p>ARM\u200b\u5904\u7406\u5668\u200b\u67b6\u6784\u200b\u6709\u200b\u591a\u4e2a\u200b\u7cfb\u5217\u200b\uff0c\u200b\u4e3b\u8981\u200b\u662f\u200b\u4e3a\u4e86\u200b\u6ee1\u8db3\u200b\u4e0d\u540c\u200b\u7684\u200b\u5e02\u573a\u9700\u6c42\u200b\u548c\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u3002\u200b\u8fd9\u4e9b\u200b\u7cfb\u5217\u200b\u67b6\u6784\u200b\u901a\u5e38\u200b\u5305\u62ec\u200b\uff1a</p> <ol> <li> <p>ARM Cortex-A \u200b\u7cfb\u5217\u200b\uff1a\u200b\u8fd9\u662f\u200b\u9488\u5bf9\u200b\u9ad8\u6027\u80fd\u200b\u5e94\u7528\u200b\u548c\u200b\u591a\u4efb\u52a1\u5904\u7406\u200b\u800c\u200b\u8bbe\u8ba1\u200b\u7684\u200b\u7cfb\u5217\u200b\u3002\u200b\u5b83\u4eec\u200b\u901a\u5e38\u200b\u7528\u4e8e\u200b\u667a\u80fd\u624b\u673a\u200b\u3001\u200b\u5e73\u677f\u200b\u7535\u8111\u200b\u3001\u200b\u7b14\u8bb0\u672c\u7535\u8111\u200b\u3001\u200b\u670d\u52a1\u5668\u200b\u548c\u200b\u5176\u4ed6\u200b\u9700\u8981\u200b\u9ad8\u6027\u80fd\u200b\u8ba1\u7b97\u200b\u7684\u200b\u8bbe\u5907\u200b\u3002Cortex-A\u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\u901a\u5e38\u200b\u5177\u6709\u200b\u9ad8\u9891\u7387\u200b\u3001\u200b\u591a\u200b\u6838\u5fc3\u200b\u3001\u200b\u8f83\u5927\u200b\u7684\u200b\u7f13\u5b58\u200b\u548c\u200b\u5148\u8fdb\u200b\u7684\u200b\u529f\u80fd\u200b\uff0c\u200b\u5982\u200b\u4e71\u5e8f\u6267\u884c\u200b\u7b49\u200b\u3002</p> </li> <li> <p>ARM Cortex-R \u200b\u7cfb\u5217\u200b\uff1a\u200b\u8fd9\u662f\u200b\u4e13\u95e8\u200b\u9488\u5bf9\u200b\u5b9e\u65f6\u200b\u5e94\u7528\u200b\u7684\u200b\u7cfb\u5217\u200b\u3002Cortex-R\u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\u8bbe\u8ba1\u200b\u7528\u4e8e\u200b\u5bf9\u200b\u5b9e\u65f6\u200b\u4efb\u52a1\u200b\u7684\u200b\u5feb\u901f\u200b\u54cd\u5e94\u200b\uff0c\u200b\u5982\u200b\u6c7d\u8f66\u200b\u63a7\u5236\u7cfb\u7edf\u200b\u3001\u200b\u5de5\u4e1a\u200b\u63a7\u5236\u200b\u548c\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b\u3002\u200b\u5b83\u4eec\u200b\u901a\u5e38\u200b\u5177\u6709\u200b\u4f4e\u200b\u5ef6\u8fdf\u200b\u3001\u200b\u9ad8\u200b\u541e\u5410\u91cf\u200b\u3001\u200b\u53ef\u9760\u6027\u200b\u548c\u200b\u4e00\u81f4\u6027\u200b\u3002</p> </li> <li> <p>ARM Cortex-M \u200b\u7cfb\u5217\u200b\uff1a\u200b\u8fd9\u662f\u200b\u9488\u5bf9\u200b\u4f4e\u529f\u8017\u200b\u3001\u200b\u4f4e\u6210\u672c\u200b\u548c\u200b\u5d4c\u5165\u5f0f\u5e94\u7528\u200b\u7684\u200b\u7cfb\u5217\u200b\u3002Cortex-M\u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\u88ab\u200b\u5e7f\u6cdb\u5e94\u7528\u200b\u4e8e\u200b\u5fae\u63a7\u5236\u5668\u200b\uff08MCU\uff09\u3001\u200b\u4f20\u611f\u5668\u200b\u3001\u200b\u667a\u80fd\u5bb6\u5c45\u200b\u8bbe\u5907\u200b\u3001\u200b\u53ef\u200b\u7a7f\u6234\u200b\u8bbe\u5907\u200b\u7b49\u200b\u3002\u200b\u5b83\u4eec\u200b\u901a\u5e38\u200b\u5177\u6709\u200b\u8f83\u200b\u4f4e\u200b\u7684\u200b\u529f\u8017\u200b\u3001\u200b\u8f83\u200b\u5c0f\u200b\u7684\u200b\u4f53\u79ef\u200b\u3001\u200b\u7b80\u5316\u200b\u7684\u200b\u6307\u4ee4\u96c6\u200b\u548c\u200b\u4f4e\u6210\u672c\u200b\u3002</p> </li> </ol> <p>\u200b\u8fd9\u200b\u4e09\u79cd\u200b\u7cfb\u5217\u200b\u67b6\u6784\u200b\u9488\u5bf9\u200b\u4e0d\u540c\u200b\u7684\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u548c\u200b\u9700\u6c42\u200b\u8fdb\u884c\u200b\u4e86\u200b\u4f18\u5316\u200b\uff0c\u200b\u5e76\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u5404\u81ea\u200b\u72ec\u7279\u200b\u7684\u200b\u7279\u6027\u200b\u548c\u200b\u529f\u80fd\u200b\u3002ARM\u200b\u67b6\u6784\u200b\u7684\u200b\u7075\u6d3b\u6027\u200b\u4f7f\u5f97\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u8986\u76d6\u200b\u5e7f\u6cdb\u200b\u7684\u200b\u5e02\u573a\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u5404\u79cd\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u5f97\u5230\u200b\u5e94\u7528\u200b\u3002</p> <ol> <li>ARM \u200b\u4e2d\u6587\u200b\u793e\u533a\u200b</li> <li>Cortex-M3\u200b\u6743\u5a01\u200b\u6307\u5357\u200b\uff08\u200b\u4e2d\u6587\u7248\u200b\uff09.pdf</li> <li>ARM Cortex-M3\u200b\u4e0e\u200bCortex-M4\u200b\u6743\u5a01\u200b\u6307\u5357\u200b.pdf</li> <li>arm_cortex_m4_processor_trm.pdf</li> <li>arm_cortex_r5_processor_trm.pdf</li> <li>arm_cortex_a8_processor_trm.pdf</li> </ol> <p>\u200b\u4e0b\u56fe\u200b\u662f\u200b\u4e09\u79cd\u200b\u5178\u578b\u200b\u67b6\u6784\u200b\u793a\u4f8b\u200b\u56fe\u200b</p> <p>cortex-m4 \u200b\u82af\u7247\u200b\u67b6\u6784\u200b</p> <p>cortex-R5 \u200b\u82af\u7247\u200b\u67b6\u6784\u200b</p> <p>cortex-A8 \u200b\u82af\u7247\u200b\u67b6\u6784\u200b</p>"},{"location":"embedded_development/#111-cortex-m3cortex-m4","title":"1.1.1.  Cortex-M3/Cortex-M4\u200b\u5904\u7406\u5668\u200b\u67b6\u6784\u200b\u5bc4\u5b58\u5668","text":"<ul> <li>\u200b\u5bc4\u5b58\u5668\u200b\u79cd\u7c7b\u200b\u548c\u200b\u7528\u9014\u200b\u53c2\u8003\u200b\u94fe\u63a5\u200b</li> </ul> <p>\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\uff08General Purpose Registers\uff09</p> <ol> <li>\u200b\u5bc4\u5b58\u5668\u200bR0 ~ R12\u200b\u4e3a\u200b\u901a\u7528\u200b\u76ee\u7684\u200b\u5bc4\u5b58\u5668\u200b<ul> <li>R0 ~ R7\u200b\u4e5f\u200b\u88ab\u79f0\u4f5c\u200b\u4f4e\u200b\u5bc4\u5b58\u5668\u200b<ul> <li>R0\u200b\u5230\u200bR7\u200b\u5728\u200b\u6307\u4ee4\u200b\u7f16\u7801\u200b\u4e2d\u6240\u200b\u5360\u200b\u7684\u200b\u4f4d\u6570\u200b\u8f83\u200b\u5c11\u200b</li> <li>\u200b\u6307\u4ee4\u96c6\u200b\u4f4d\u57df\u200b\u5bbd\u5ea6\u200b\u6709\u9650\u200b\uff0c\u200b\u5927\u90e8\u5206\u200b16\u200b\u4f4d\u200b\u6307\u4ee4\u200b\u53ea\u80fd\u200b\u8bbf\u95ee\u200b\u4f4e\u200b\u5bc4\u5b58\u5668\u200b</li> </ul> </li> <li>R8 ~ R12\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u9ad8\u200b\u5bc4\u5b58\u5668\u200b<ul> <li>\u200b\u53ef\u200b\u7528\u4e8e\u200b32\u200b\u4f4d\u200b\u6307\u4ee4\u200b\u548c\u200b\u5c11\u90e8\u5206\u200b16\u200b\u4f4d\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5982\u200b<code>MOV</code>\u200b\u6307\u4ee4\u200b</li> </ul> </li> <li>\u200b\u5f02\u5e38\u200b\u6d41\u7a0b\u200b\u4e2d\u200b\uff0cR0-R3\uff0cR12\uff0cR14\u3010\u200b\u94fe\u63a5\u200b\u5bc4\u5b58\u5668\u200bLR\u3011 \uff0c\u200b\u7a0b\u5e8f\u200b\u72b6\u6001\u5b57\u200b\u5bc4\u5b58\u5668\u200bxPSR\uff0c R15 \u200b\u7b49\u200b\u4f1a\u200b\u88ab\u200b\u786c\u4ef6\u200b\u81ea\u52a8\u200b\u4fdd\u5b58\u200b\u5230\u200b\u6808\u200b\u4e2d\u200b\uff0c \u200b\u82e5\u200b\u7528\u5230\u200b\u4e86\u200bR4-R11\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u7528\u200bPUSH \u200b\u6307\u4ee4\u200b\u624b\u52a8\u200b\u4fdd\u5b58\u200b</li> </ul> </li> <li>R13\u200b\u4e3a\u6808\u200b\u6307\u9488\u200b\uff08SP\uff09\uff0c<code>\u200b\u7279\u6b8a\u200b\u5bc4\u5b58\u5668\u200bCONTROL\u200b\u51b3\u5b9a\u200b\u6808\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b</code><ul> <li>\u200b\u4e3b\u6808\u200b\u6307\u9488\u200b\uff08MSP\uff09\u200b\u4e3a\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u6808\u200b\u6307\u9488\u200b<ul> <li>\u200b\u7528\u4e8e\u200b\u590d\u4f4d\u200b\u540e\u200b\u6216\u200b\u5904\u7406\u5668\u200b\u5904\u4e8e\u200bhandler\u200b\u6a21\u5f0f\u200b</li> </ul> </li> <li>\u200b\u8fdb\u7a0b\u200b\u6808\u200b\u6307\u9488\u200b\uff08PSP\uff09<ul> <li>\u200b\u7528\u4e8e\u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b</li> </ul> </li> <li>MSP\u200b\u548c\u200bPSP\u200b\u90fd\u200b\u662f\u200b32\u200b\u4f4d\u200b\u5bc4\u5b58\u5668\u200b\uff0c<code>\u200b\u4f46\u200b\u6700\u4f4e\u200b\u4e24\u4f4d\u200b\u56fa\u5b9a\u200b\u4e3a\u200b0</code><ul> <li>\u200b\u56e0\u4e3a\u200b\u5bf9\u4e8e\u200b ARM Cortex-M\u200b\u5904\u7406\u5668\u200b\uff0cPUSH\u200b\u548c\u200bPOP\u200b\u6307\u4ee4\u200b\u603b\u662f\u200b4\u200b\u5b57\u8282\u200b\uff0832\u200b\u4f4d\u200b\uff09\uff0c\u200b\u6808\u200b\u64cd\u4f5c\u200b\u7684\u200b\u5730\u5740\u200b\u4e5f\u200b\u5fc5\u987b\u200b\u5bf9\u9f50\u200b\u5230\u200b4\u200b\u5b57\u8282\u200b\uff0832\u200b\u4f4d\u200b\uff09\uff0c\u200b\u6545\u200b\u6700\u4f4e\u200b\u4e24\u4f4d\u200b\u662f\u200b0</li> </ul> </li> <li>\u200b\u65e0\u200b\u5d4c\u5165\u5f0f\u200bOS\u200b\u7684\u200b\u5e94\u7528\u200b\u63a8\u8350\u200b\u4f7f\u7528\u200bMSP\uff0c\u200b\u5b58\u5728\u200b\u5d4c\u5165\u5f0f\u200bOS\u200b\u65f6\u200b\uff0c\u200b\u7528\u6237\u200b\u7684\u200b\u4efb\u52a1\u200b\u6808\u200b\u4f7f\u7528\u200bPSP\uff0cOS\u200b\u5185\u6838\u200b\u4f7f\u7528\u200bMSP<ul> <li>PSP\u200b\u7684\u200b\u521d\u59cb\u503c\u200b\u662f\u200b\u672a\u5b9a\u4e49\u200b\u7684\u200b</li> <li>MSP\u200b\u7684\u200b\u521d\u59cb\u503c\u200b\u53ef\u4ee5\u200b\u5728\u200b<code>\u200b\u590d\u4f4d\u200b\u6d41\u7a0b\u200b\u4e2d\u200b\u4ece\u200b\u5b58\u50a8\u5668\u200b\u7684\u200b\u7b2c\u4e00\u4e2a\u200b\u5b57\u200b\u4e2d\u200b\u53d6\u51fa\u200b</code>\uff0c\u200b\u5177\u4f53\u200b\u9700\u200b\u67e5\u9605\u200b\u76f8\u5173\u200b\u6280\u672f\u200b\u6587\u6863\u200b</li> </ul> </li> </ul> </li> <li> <p>R14\u200b\u4e3a\u200b\u94fe\u63a5\u200b\u5bc4\u5b58\u5668\u200b\uff08LR\uff09\uff0c\u200b\u7528\u4e8e\u200b\u4fdd\u5b58\u200b<code>\u200b\u51fd\u6570\u200b\u6216\u200b\u5b50\u7a0b\u5e8f\u200b\u8c03\u7528\u200b\u7684\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b</code></p> <ul> <li><code>\u200b\u5728\u200b\u51fd\u6570\u200b\u6216\u200b\u5b50\u7a0b\u5e8f\u200b\u7ed3\u675f\u200b\u65f6\u200b</code>\uff0c\u200b\u7a0b\u5e8f\u200b\u5c06\u200bLR\u200b\u7684\u200b\u6570\u503c\u200b\u52a0\u8f7d\u200b\u81f3\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\uff08PC\uff09\u200b\u4e2d\u200b\u8fd4\u56de\u200b\u8c03\u7528\u200b\u7a0b\u5e8f\u200b\u5904\u200b\u5e76\u200b\u7ee7\u7eed\u6267\u884c\u200b\u3002</li> <li> <p>\u200b\u5728\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u671f\u95f4\u200b\uff0cLR\u200b\u81ea\u52a8\u66f4\u65b0\u200b\u4e3a\u200b\u7279\u6b8a\u200b\u7684\u200bEXC_RETURN\uff08\u200b\u5f02\u5e38\u200b\u8fd4\u56de\u200b\uff09\u200b\u6570\u503c\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u51b3\u5b9a\u200b\u8fd4\u56de\u200b\u7ee7\u7eed\u6267\u884c\u200b\u65f6\u200b\uff0c\u200b\u4f7f\u7528\u200bMSP\u200b\u8fd8\u662f\u200bPSP</p> <ul> <li>\u200b\u5165\u6808\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u6808\u200b\u6307\u9488\u200b\u4f1a\u200b\u66f4\u65b0\u200b\uff08PSP\u200b\u6216\u8005\u200bMSP\u200b\u4f1a\u200b\u56e0\u4e3a\u200b\u538b\u6808\u200b\u64cd\u4f5c\u200b\u800c\u200b\u751f\u957f\u200b\uff09</li> <li>\u200b\u5728\u200b\u6267\u884c\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\u65f6\u200b\uff0c\u200b\u5c06\u200b\u7531\u200bMSP\u200b\u8d1f\u8d23\u200b\u5bf9\u200b\u5806\u6808\u200b\u7684\u200b\u8bbf\u95ee\u200b</li> <li> <p>\u200b\u5728\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c LR \u200b\u4f1a\u200b\u88ab\u200b\u8ba1\u7b97\u200b\u8d4b\u503c\u200b\u4e3a\u200b EXC_RETURN \uff08\u200b\u5f02\u5e38\u200b\u8fd4\u56de\u200b\uff09\uff0c\u200b\u5f53\u200bPC\u200b\u88ab\u200b\u8d4b\u503c\u200b0xFFFF_FFF0-0xFFFF_FFFF\u200b\u65f6\u200b\uff0c\u200b\u4e0d\u4f1a\u200b\u53d1\u751f\u200b\u53d6\u6307\u200b\uff0c\u200b\u800c\u662f\u200b\u8fdb\u5165\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u6d41\u7a0b\u200b</p> <p> <p>\u200b\u5f02\u5e38\u200b\u6267\u884c\u200b\u6d41\u7a0b\u200b</p> <p>\u200b\u5f02\u5e38\u200b\u503c\u200b\u5bf9\u5e94\u200b\u8868\u200b</p> </p> </li> </ul> </li> <li> <p>\u200b\u5728\u200b\u51fd\u6570\u8c03\u7528\u200b\u94fe\u4e2d\u200b\uff0cLR \u200b\u7684\u200b\u503c\u4f1a\u200b\u88ab\u200b\u4e0d\u65ad\u200b\u5730\u200b\u63a8\u9001\u200b\u5230\u200b\u5806\u6808\u200b\uff0c\u200b\u4ee5\u200b\u4fdd\u7559\u200b\u6bcf\u4e2a\u200b\u51fd\u6570\u8c03\u7528\u200b\u7684\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u3002</p> <ul> <li><code>\u200b\u8fd9\u200b\u901a\u5e38\u200b\u7531\u200b\u51fd\u6570\u200b\u7684\u200b\u524d\u5bfc\u200b\u548c\u200b\u6536\u5c3e\u200b\u4ee3\u7801\u200b\u8d1f\u8d23\u200b\uff0c\u200b\u786e\u4fdd\u200b\u5728\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u671f\u95f4\u200b\u5806\u6808\u200b\u4e0a\u200b\u7684\u200b\u6b63\u786e\u200b\u7ba1\u7406\u200b</code></li> <li>\u200b\u5728\u200b Cortex-M \u200b\u5904\u7406\u5668\u200b\u4e2d\u200b\uff0c\u200b\u7531\u4e8e\u200b Thumb2 \u200b\u6307\u4ee4\u96c6\u200b\uff08\u200b\u517c\u5bb9\u200b16\u200b\u4f4d\u200b\u548c\u200b32\u200b\u4f4d\u200b\u6307\u4ee4\u200b\uff09\u200b\u7684\u200b\u7279\u6027\u200b\uff0c\u200b\u901a\u5e38\u200b\u4f7f\u7528\u200b <code>BX LR</code> \u200b\u6765\u200b\u5b9e\u73b0\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b<ul> <li>BX\uff08Branch and Exchange\uff09\u200b\u6307\u4ee4\u200b \u200b\u4e0d\u4ec5\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5b83\u200b\u8fd8\u200b\u8d1f\u8d23\u200b\u6839\u636e\u200b\u76ee\u6807\u200b\u5730\u5740\u200b\u7684\u200b\u6700\u4f4e\u200b\u4f4d\u200b\u81ea\u52a8\u200b\u9009\u62e9\u200bARM\u200b\u6216\u200bThumb\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u5982\u679c\u200b\u76ee\u6807\u200b\u5730\u5740\u200b\u7684\u200b\u6700\u4f4e\u200b\u4f4d\u200b\uff08LSB\uff09\u200b\u4e3a\u200b0\uff0c\u200b\u5219\u200b\u5904\u7406\u5668\u200b\u5207\u6362\u200b\u5230\u200bARM\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u5982\u679c\u200b\u76ee\u6807\u200b\u5730\u5740\u200b\u7684\u200b\u6700\u4f4e\u200b\u4f4d\u200b\uff08LSB\uff09\u200b\u4e3a\u200b1\uff0c\u200b\u5219\u200b\u5904\u7406\u5668\u200b\u5207\u6362\u200b\u5230\u200bThumb\u200b\u6a21\u5f0f\u200b</li> </ul> </li> </ul> </li> <li>R15\u200b\u4e3a\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\uff08PC\uff09</li> <li>\u200b\u53ef\u200b\u8bfb\u5199\u200b\u5bc4\u5b58\u5668\u200b<ul> <li>\u200b\u8bfb\u200b\u64cd\u4f5c\u200b\u8fd4\u56de\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\u5730\u5740\u200b\u52a0\u200b4<ul> <li>Cortex-M \u200b\u53ea\u200b\u652f\u6301\u200bthumb/thumb2\u200b\u6307\u4ee4\u96c6\u200b\uff0c\u200b\u6545\u200b\u5730\u5740\u200b\u52a0\u200b2/4\uff0816\u200b\u4f4d\u200b/32\u200b\u4f4d\u200b\u6307\u4ee4\u200b\uff09</li> </ul> </li> <li>\u200b\u5199\u200b\u64cd\u4f5c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4f7f\u7528\u200b\u6570\u636e\u4f20\u8f93\u200b/\u200b\u5904\u7406\u200b\u6307\u4ee4\u200b\uff09\u200b\u4ea7\u751f\u200b\u7a0b\u5e8f\u200b\u8df3\u8f6c\u200b</li> </ul> </li> <li>\u200b\u6307\u4ee4\u200b\u5fc5\u987b\u200b\u5bf9\u9f50\u200b\u5230\u200b\u957f\u5ea6\u200b\uff08\u200b\u534a\u5b57\u200b\u6216\u200b\u5b57\u200b\uff09\uff0c<code>PC\u200b\u7684\u200b\u6700\u4f4e\u200b\u4f4d\u200b\uff08LSB\uff09\u200b\u4e3a\u200b0</code><ul> <li>\u200b\u4f7f\u7528\u200b\u90e8\u5206\u200b\u8df3\u8f6c\u200b/\u200b\u8bfb\u5b58\u50a8\u5668\u200b\u6307\u4ee4\u200b\u66f4\u65b0\u200bPC\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5c06\u200bPC\u200b\u503c\u200b\u7684\u200bLSB\u200b\u7f6e\u200b1\u200b\u8868\u793a\u200b Thumb\u200b\u72b6\u6001\u200b\uff0c\u200b\u5426\u5219\u200b\u5c31\u200b\u4f1a\u200b\u7531\u4e8e\u200b\u8bd5\u56fe\u200b\u4f7f\u7528\u200b\u4e0d\u200b\u652f\u6301\u200b\u7684\u200bARM\u200b\u6307\u4ee4\u200b\u800c\u200b\u89e6\u53d1\u200b\u9519\u8bef\u200b\u5f02\u5e38\u200b</li> <li>\u200b\u9ad8\u7ea7\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff08\u200b\u5305\u62ec\u200bC\u200b\u548c\u200bC++\uff09\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u5c06\u200b\u8df3\u8f6c\u200b\u76ee\u6807\u200b\u7684\u200bLSB\u200b\u7f6e\u4f4d\u200b</li> </ul> </li> </ul> </li> </ol> <p>\u200b\u7279\u6b8a\u200b\u529f\u80fd\u200b\u5bc4\u5b58\u5668\u200b\uff08Special Function Registers\uff09</p> <ol> <li> <p>xPSR\uff0c\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b</p> \u200b\u4f4d\u57df\u200b\u8303\u56f4\u200b \u200b\u540d\u79f0\u200b \u200b\u529f\u80fd\u200b\u63cf\u8ff0\u200b 0-8 Exception Number \u200b\u5f53\u524d\u200b\u5f02\u5e38\u200b/\u200b\u4e2d\u65ad\u200b\u53f7\u200b\uff080 \u200b\u8868\u793a\u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u975e\u200b\u5f02\u5e38\u200b\uff09 9 \u200b\u4fdd\u7559\u200b \u200b\u672a\u200b\u4f7f\u7528\u200b 10-15 ICI/IT \u200b\u4e2d\u65ad\u200b\u7ee7\u7eed\u200b\u6307\u4ee4\u200b\uff08ICI\uff09\u200b\u6216\u200b IT[7] \u200b\u6307\u4ee4\u200b\u5757\u200b\u72b6\u6001\u200b\uff08\u200b\u7528\u4e8e\u200b\u6761\u4ef6\u200b\u6267\u884c\u200b\uff0c\u200b\u4ec5\u200b\u5360\u7528\u200bbit10\uff09 16-19 GE[3:0] \u200b\u5927\u4e8e\u200b\u6216\u200b\u7b49\u4e8e\u200b\u6807\u5fd7\u200b\uff08\u200b\u4ec5\u200b\u67d0\u4e9b\u200b SIMD \u200b\u6307\u4ee4\u200b\u4f7f\u7528\u200b\uff09 20-23 \u200b\u4fdd\u7559\u200b \u200b\u672a\u200b\u4f7f\u7528\u200b 24 T Thumb \u200b\u72b6\u6001\u200b\uff08\u200b\u5fc5\u987b\u200b\u4e3a\u200b <code>1</code>\uff0c\u200b\u5426\u5219\u200b\u89e6\u53d1\u200b\u9519\u8bef\u200b\uff09 25 IT[2] IT \u200b\u6307\u4ee4\u200b\u5757\u200b\u72b6\u6001\u200b\u7684\u200b\u9ad8\u4f4d\u200b\uff08\u200b\u4e0e\u200b\u4f4d\u200b 26\u300110 \u200b\u5171\u540c\u200b\u63a7\u5236\u200b\u6761\u4ef6\u200b\u6267\u884c\u200b\uff09 26 IT[1] IT \u200b\u6307\u4ee4\u200b\u5757\u200b\u72b6\u6001\u200b\u7684\u200b\u4e2d\u4f4d\u200b 27 Q \u200b\u7c98\u6ede\u200b\u9971\u548c\u200b\u6807\u5fd7\u200b\uff08\u200b\u67d0\u4e9b\u200b\u8fd0\u7b97\u200b\u6ea2\u51fa\u200b\u65f6\u7f6e\u200b <code>1</code>\uff0c\u200b\u9700\u200b\u624b\u52a8\u200b\u6e05\u9664\u200b\uff09 28 V \u200b\u6ea2\u51fa\u200b\u6807\u5fd7\u200b\uff08\u200b\u6709\u200b\u7b26\u53f7\u200b\u8fd0\u7b97\u200b\u6ea2\u51fa\u200b\u65f6\u7f6e\u200b <code>1</code>\uff09 29 C \u200b\u8fdb\u4f4d\u200b/\u200b\u501f\u4f4d\u200b\u6807\u5fd7\u200b\uff08\u200b\u65e0\u200b\u7b26\u53f7\u200b\u8fd0\u7b97\u200b\u8fdb\u4f4d\u200b/\u200b\u501f\u4f4d\u200b\u65f6\u7f6e\u200b <code>1</code>\uff09 30 Z \u200b\u96f6\u200b\u6807\u5fd7\u200b\uff08\u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\u4e3a\u200b <code>0</code> \u200b\u65f6\u7f6e\u200b <code>1</code>\uff09 31 N \u200b\u8d1f\u6570\u200b\u6807\u5fd7\u200b\uff08\u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u8d1f\u65f6\u200b\u7f6e\u200b <code>1</code>\uff09 <p>5.1. \u200b\u6761\u4ef6\u200b\u6807\u5fd7\u200b\uff08N, Z, C, V\uff09</p> <ul> <li>N (Negative): \u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u8d1f\u65f6\u200b\u7f6e\u200b <code>1</code>\uff08\u200b\u6700\u9ad8\u200b\u4f4d\u4e3a\u200b <code>1</code>\uff09\u3002</li> <li>Z (Zero): \u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\u4e3a\u200b <code>0</code> \u200b\u65f6\u7f6e\u200b <code>1</code>\u3002</li> <li>C (Carry): \u200b\u65e0\u200b\u7b26\u53f7\u200b\u8fd0\u7b97\u200b\u8fdb\u4f4d\u200b\uff08\u200b\u52a0\u6cd5\u200b\uff09\u200b\u6216\u200b\u501f\u4f4d\u200b\uff08\u200b\u51cf\u6cd5\u200b\uff09\u200b\u65f6\u7f6e\u200b <code>1</code>\u3002</li> <li>V (oVerflow): \u200b\u6709\u200b\u7b26\u53f7\u200b\u8fd0\u7b97\u200b\u6ea2\u51fa\u200b\u65f6\u7f6e\u200b <code>1</code>\u3002</li> </ul> <p>5.2. \u200b\u5f02\u5e38\u200b\u53f7\u200b\uff08Exception Number, 0-8 \u200b\u4f4d\u200b\uff09</p> <ul> <li>\u200b\u8868\u793a\u200b\u5f53\u524d\u200b\u6fc0\u6d3b\u200b\u7684\u200b\u5f02\u5e38\u200b\u53f7\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1a</li> <li><code>2</code> = NMI\uff08\u200b\u4e0d\u53ef\u200b\u5c4f\u853d\u200b\u4e2d\u65ad\u200b\uff09</li> <li><code>3</code> = HardFault</li> <li><code>4</code> = MemManage</li> <li><code>11</code> = SVCall\uff08SVC \u200b\u6307\u4ee4\u200b\u89e6\u53d1\u200b\uff09</li> <li><code>15</code> = SysTick \u200b\u4e2d\u65ad\u200b</li> <li><code>0</code> \u200b\u8868\u793a\u200b\u65e0\u200b\u5f02\u5e38\u200b\uff08\u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b\uff09\u3002</li> </ul> <p>5.3. T \u200b\u4f4d\u200b\uff08Thumb \u200b\u72b6\u6001\u200b\uff09</p> <ul> <li>Cortex-M \u200b\u4ec5\u200b\u652f\u6301\u200b Thumb \u200b\u6307\u4ee4\u96c6\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8be5\u200b\u4f4d\u200b\u5fc5\u987b\u200b\u4e3a\u200b <code>1</code>\u3002\u200b\u82e5\u200b\u88ab\u200b\u6e05\u96f6\u200b\uff0c\u200b\u5c06\u200b\u89e6\u53d1\u200b UsageFault\u3002</li> </ul> <p>5.4. Q \u200b\u4f4d\u200b\uff08\u200b\u7c98\u6ede\u200b\u9971\u548c\u200b\u6807\u5fd7\u200b\uff09</p> <ul> <li>\u200b\u5728\u200b\u67d0\u4e9b\u200b\u9971\u548c\u200b\u8fd0\u7b97\u200b\u6307\u4ee4\u200b\uff08\u200b\u5982\u200b <code>SSAT</code>, <code>USAT</code>\uff09\u200b\u4e2d\u200b\uff0c\u200b\u82e5\u200b\u53d1\u751f\u200b\u9971\u548c\u200b\uff0cQ \u200b\u4f4d\u200b\u88ab\u200b\u7f6e\u200b <code>1</code>\u3002\u200b\u9700\u200b\u624b\u52a8\u200b\u6e05\u9664\u200b\uff08\u200b\u901a\u8fc7\u200b\u5199\u200b <code>APSR</code>\uff09\u3002</li> </ul> <p>5.5. IT \u200b\u4f4d\u200b\uff08\u200b\u6761\u4ef6\u200b\u6267\u884c\u200b\u72b6\u6001\u200b\uff09</p> <ul> <li>IT[7:5]\uff08\u200b\u7531\u4f4d\u200b 26\u300125\u300110 \u200b\u7ec4\u6210\u200b\uff09\u200b\u63a7\u5236\u200b <code>IT</code> \u200b\u6307\u4ee4\u200b\u5757\u200b\u7684\u200b\u6761\u4ef6\u200b\u6267\u884c\u200b\u6d41\u7a0b\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a <pre><code>ITE EQ        ; IF-THEN-ELSE \u200b\u5757\u200b\uff0c\u200b\u6761\u4ef6\u200b\u4e3a\u200b EQ\uff08Z=1\uff09\nMOVEQ R0, #1  ; \u200b\u82e5\u200b Z=1\uff0c\u200b\u6267\u884c\u200b\nMOVNE R0, #0  ; \u200b\u82e5\u200b Z=0\uff0c\u200b\u6267\u884c\u200b\n</code></pre></li> </ul> <p>5.6. GE[3:0]\uff08\u200b\u5927\u4e8e\u200b\u6216\u200b\u7b49\u4e8e\u200b\u6807\u5fd7\u200b\uff09</p> <ul> <li>\u200b\u4ec5\u200b\u5728\u200b\u7279\u5b9a\u200b SIMD \u200b\u6216\u200b\u5e76\u884c\u200b\u8fd0\u7b97\u200b\u6307\u4ee4\u200b\uff08\u200b\u5982\u200b <code>UADD8</code>\uff09\u200b\u4e2d\u200b\u4f7f\u7528\u200b\uff0c\u200b\u6807\u8bb0\u200b\u5b57\u8282\u200b/\u200b\u534a\u5b57\u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\u662f\u5426\u200b\u6ee1\u8db3\u6761\u4ef6\u200b\u3002</li> </ul> <p>5.7. \u200b\u5178\u578b\u200b\u5e94\u7528\u200b\u573a\u666f\u200b</p> <ul> <li>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff1a</li> <li>\u200b\u901a\u8fc7\u200b <code>IPSR</code> \u200b\u8bfb\u53d6\u200b\u5f02\u5e38\u200b\u53f7\u200b\uff0c\u200b\u786e\u5b9a\u200b\u4e2d\u65ad\u200b\u6765\u6e90\u200b\u3002</li> <li>\u200b\u5728\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u7ed3\u675f\u200b\u65f6\u200b\uff0c\u200b\u901a\u8fc7\u200b <code>xPSR</code> \u200b\u6062\u590d\u200b\u72b6\u6001\u200b\u3002</li> <li>\u200b\u6761\u4ef6\u200b\u6267\u884c\u200b\uff1a</li> <li>\u200b\u6839\u636e\u200b <code>N, Z, C, V</code> \u200b\u6807\u5fd7\u200b\u63a7\u5236\u7a0b\u5e8f\u200b\u5206\u652f\u200b\uff08\u200b\u5982\u200b <code>BEQ</code>, <code>BNE</code>\uff09\u3002</li> <li>\u200b\u8c03\u8bd5\u200b\u4e0e\u200b\u9519\u8bef\u200b\u5206\u6790\u200b\uff1a</li> <li>\u200b\u68c0\u67e5\u200b <code>Q</code> \u200b\u4f4d\u200b\u6216\u200b <code>V</code> \u200b\u4f4d\u200b\uff0c\u200b\u8bca\u65ad\u200b\u8fd0\u7b97\u200b\u6ea2\u51fa\u200b\u95ee\u9898\u200b\u3002</li> </ul> </li> </ol> <ol> <li> <p>PRIMASK</p> <ul> <li>\u200b\u8fd9\u200b\u662f\u200b\u4e2a\u200b\u53ea\u6709\u200b\u5355\u4e00\u200b\u6bd4\u7279\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u5728\u200b\u5b83\u200b\u88ab\u200b\u7f6e\u200b 1 \u200b\u540e\u200b\uff0c\u200b\u5c31\u200b\u5173\u6389\u200b\u6240\u6709\u200b\u53ef\u200b\u5c4f\u853d\u200b\u7684\u200b\u5f02\u5e38\u200b\uff0c\u200b\u53ea\u200b\u5269\u4e0b\u200b<code>NMI</code>\u200b\u548c\u200b<code>\u200b\u786c\u200b fault</code>\u200b\u5f02\u5e38\u200b\u53ef\u4ee5\u200b\u54cd\u5e94\u200b\u3002\u200b\u5b83\u200b\u7684\u200b\u7f3a\u7701\u503c\u200b\u662f\u200b 0\uff0c\u200b\u8868\u793a\u200b\u6ca1\u200b\u6709\u5173\u200b\u5f02\u5e38\u200b</li> </ul> </li> <li> <p>FAULTMASK</p> <ul> <li>\u200b\u8fd9\u200b\u662f\u200b\u4e2a\u200b\u53ea\u6709\u200b 1 \u200b\u4e2a\u4f4d\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u5f53\u200b\u5b83\u200b\u7f6e\u200b 1 \u200b\u65f6\u200b\uff0c\u200b\u53ea\u6709\u200b<code>NMI</code>\u200b\u624d\u80fd\u200b\u54cd\u5e94\u200b\uff0c\u200b\u6240\u6709\u200b\u5176\u5b83\u200b\u7684\u200b\u5f02\u5e38\u200b\uff0c\u200b\u751a\u81f3\u200b\u662f\u200b<code>\u200b\u786c\u200b fault</code>\uff0c\u200b\u4e5f\u200b\u901a\u901a\u200b\u5173\u95ed\u200b\u3002\u200b\u5b83\u200b\u7684\u200b\u7f3a\u7701\u503c\u200b\u4e5f\u200b\u662f\u200b 0\uff0c\u200b\u8868\u793a\u200b\u6ca1\u200b\u6709\u5173\u200b\u5f02\u5e38\u200b</li> </ul> </li> <li> <p>BASEPRI</p> <ul> <li>\u200b\u8fd9\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u6700\u591a\u200b\u6709\u200b 9 \u200b\u4f4d\u200b\uff08\u200b\u7531\u200b\u8868\u8fbe\u200b\u4f18\u5148\u7ea7\u200b\u7684\u200b\u4f4d\u6570\u200b\u51b3\u5b9a\u200b\uff09\u3002\u200b\u5b83\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u88ab\u200b\u5c4f\u853d\u200b\u4f18\u5148\u7ea7\u200b\u7684\u200b\u9608\u503c\u200b\u3002\u200b\u5f53\u200b\u5b83\u200b\u88ab\u200b\u8bbe\u6210\u200b\u67d0\u4e2a\u200b\u503c\u540e\u200b\uff0c\u200b\u6240\u6709\u200b\u4f18\u5148\u7ea7\u200b\u53f7\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b\u6b64\u503c\u200b\u7684\u200b\u4e2d\u65ad\u200b\u90fd\u200b\u88ab\u200b\u5173\u200b\uff08\u200b\u4f18\u5148\u7ea7\u200b\u53f7\u200b\u8d8a\u200b\u5927\u200b\uff0c\u200b\u4f18\u5148\u7ea7\u200b\u8d8a\u4f4e\u200b\uff09\u3002\u200b\u4f46\u200b\u82e5\u200b\u88ab\u200b\u8bbe\u6210\u200b 0\uff0c\u200b\u5219\u200b\u4e0d\u200b\u5173\u95ed\u200b\u4efb\u4f55\u200b\u4e2d\u65ad\u200b\uff0c0 \u200b\u4e5f\u200b\u662f\u200b\u7f3a\u7701\u503c\u200b</li> </ul> </li> <li> <p>CONTROL</p> <ul> <li> <p>\u200b\u7528\u4e8e\u200b\u63a7\u5236\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u7279\u6027\u200b\uff0c\u200b\u5982\u200b\u7279\u6743\u200b\u7ea7\u522b\u200b\u5207\u6362\u200b\u7b49\u200b</p> <ul> <li> <p>\u200b\u901a\u7528\u200b\u4f4d\u200b\uff08Cortex-M3/M4 \u200b\u5171\u6709\u200b\uff09</p> \u200b\u4f4d\u200b \u200b\u540d\u79f0\u200b \u200b\u529f\u80fd\u200b 0 nPRIV \u200b\u63a7\u5236\u200b\u5f53\u524d\u200b\u7279\u6743\u200b\u7ea7\u522b\u200b\uff1a - <code>0</code> = \u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b\uff08\u200b\u53ef\u200b\u8bbf\u95ee\u200b\u6240\u6709\u200b\u8d44\u6e90\u200b\uff09 - <code>1</code> = \u200b\u975e\u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b\uff08\u200b\u53d7\u9650\u200b\u8bbf\u95ee\u200b\uff09 Handler \u200b\u6a21\u5f0f\u200b\u6c38\u8fdc\u90fd\u662f\u200b\u7279\u6743\u200b\u7ea7\u200b\u7684\u200b 1 SPSEL \u200b\u9009\u62e9\u200b\u5f53\u524d\u200b\u4f7f\u7528\u200b\u7684\u200b\u5806\u6808\u200b\u6307\u9488\u200b\uff1a - <code>0</code> = \u200b\u4e3b\u200b\u5806\u6808\u200b\u6307\u9488\u200b\uff08MSP\uff09\uff08\u200b\u9ed8\u8ba4\u200b\uff09 - <code>1</code> = \u200b\u8fdb\u7a0b\u200b\u5806\u6808\u200b\u6307\u9488\u200b\uff08PSP\uff09  \u200b\u5728\u200b handler \u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0c\u200b\u53ea\u200b\u5141\u8bb8\u200b\u4f7f\u7528\u200bMSP\uff0c\u200b\u6240\u4ee5\u200b\u6b64\u65f6\u200b\u4e0d\u5f97\u200b\u5f80\u8be5\u200b\u4f4d\u200b\u5199\u200b1 </li> <li> <p>Cortex-M4 \u200b\u7279\u6709\u200b\u4f4d\u200b</p> \u200b\u4f4d\u200b \u200b\u540d\u79f0\u200b \u200b\u529f\u80fd\u200b 2 FPCA \u200b\u6d6e\u70b9\u200b\u4e0a\u4e0b\u6587\u200b\u6fc0\u6d3b\u200b\uff08Floating-Point Context Active\uff09\uff1a - <code>1</code> = \u200b\u5f53\u524d\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u4e86\u200b\u6d6e\u70b9\u200b\u5bc4\u5b58\u5668\u200b\uff08\u200b\u9700\u200b\u4fdd\u5b58\u200b\u6d6e\u70b9\u200b\u72b6\u6001\u200b\uff09 - <code>0</code> = \u200b\u672a\u200b\u4f7f\u7528\u200b\u6d6e\u70b9\u200b\u5bc4\u5b58\u5668\u200b </li> </ul> </li> </ul> </li> </ol> <p>\u200b\u63a7\u5236\u200b\u5bc4\u5b58\u5668\u200b\uff08Control Registers\uff09</p> <ol> <li> <p>NVIC (Nested Vectored Interrupt Controller) \u200b\u63a7\u5236\u5668\u200b</p> <ul> <li>\u200b\u7528\u4e8e\u200b\u7ba1\u7406\u200b\u4e2d\u65ad\u200b\u63a7\u5236\u5668\u200b</li> </ul> </li> <li> <p>SysTick \u200b\u5bc4\u5b58\u5668\u200b</p> <ul> <li>\u200b\u7528\u4e8e\u200b\u7cfb\u7edf\u200b\u5b9a\u65f6\u5668\u200b\u7684\u200b\u914d\u7f6e\u200b\u548c\u200b\u63a7\u5236\u200b</li> </ul> </li> <li> <p>MPU (Memory Protection Unit) \u200b\u5bc4\u5b58\u5668\u200b</p> <ul> <li>\u200b\u7528\u4e8e\u200b\u5185\u5b58\u4fdd\u62a4\u200b\u5355\u5143\u200b\u7684\u200b\u914d\u7f6e\u200b</li> </ul> </li> </ol>"},{"location":"embedded_development/#112-cortex-r5","title":"1.1.2. Cortex-R5\u200b\u5904\u7406\u5668\u200b\u67b6\u6784\u200b\u5bc4\u5b58\u5668","text":"<p>ARM Cortex-R5\u200b\u5904\u7406\u5668\u200b\u4e00\u822c\u200b\u5171\u6709\u200b 37 \u200b\u4e2a\u200b<code>32\u200b\u4f4d\u200b\u5bc4\u5b58\u5668\u200b</code>\uff0c\u200b\u5176\u4e2d\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li> <p>31 \u200b\u4e2a\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\uff0c6 \u200b\u4e2a\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b</p> <ol> <li> <p>R0~R3 \u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200b\u5b50\u7a0b\u5e8f\u200b\u95f4\u200b\u4f20\u9012\u200b\u53c2\u6570\u200b</p> </li> <li> <p>R4~R11 \u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200b\u4fdd\u5b58\u200b\u5c40\u90e8\u53d8\u91cf\u200b</p> </li> <li> <p>R12 \u200b\u6709\u65f6\u200b\u4f5c\u4e3a\u200b\u5185\u90e8\u200b\u8fc7\u7a0b\u200b\u8c03\u7528\u200b\u7684\u200b\u4e34\u65f6\u200b\u5bc4\u5b58\u5668\u200b</p> </li> <li> <p>R13 \u200b\u901a\u5e38\u200b\u7528\u505a\u200b\u6808\u200b\u6307\u9488\u200b\uff0c\u200b\u5373\u200bSP</p> </li> <li> <p>R14 \u200b\u5bc4\u5b58\u5668\u200b\u53c8\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u94fe\u63a5\u200b\u5bc4\u5b58\u5668\u200b\uff08LR\uff09</p> <ul> <li>\u200b\u7528\u4e8e\u200b\u4fdd\u5b58\u200b\u5b50\u7a0b\u5e8f\u200b\u4ee5\u53ca\u200b\u4e2d\u65ad\u200b\u7684\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b</li> <li>\u200b\u82e5\u200b\u6ca1\u6709\u200bLR\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5219\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u4fdd\u5b58\u200b\u5230\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u6700\u540e\u200b\u6267\u884c\u200b\u5b8c\u200b\u4e4b\u540e\u200b\u5f39\u51fa\u200b\u5230\u200bpc\u200b\u4e5f\u200b\u884c\u200b\uff0c\u200b\u4f46\u662f\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u53ef\u4ee5\u200b\u8fdc\u9ad8\u4e8e\u200b\u6808\u200b\uff08\u200b\u5b58\u50a8\u5668\u200bSRAM\uff09\uff0c\u200b\u6240\u4ee5\u200bLR\u200b\u7684\u200b\u4f5c\u7528\u200b\u8fd8\u662f\u200b\u5f88\u200b\u660e\u663e\u200b\u7684\u200b</li> </ul> </li> <li> <p>R15 \u200b\u7528\u4f5c\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\uff08pc\uff09</p> <ul> <li>\u200b\u7531\u4e8e\u200b ARM \u200b\u91c7\u7528\u200b\u4e86\u200b\u6d41\u6c34\u7ebf\u200b\u673a\u5236\u200b\uff0c\u200b\u5f53\u200b\u6b63\u786e\u200b\u8bfb\u53d6\u200b\u4e86\u200b PC \u200b\u7684\u200b\u503c\u200b\u540e\u200b\uff0c\u200b\u8be5\u503c\u200b\u4e3a\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\u5730\u5740\u200b\u52a0\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0c\u200b\u5373\u200b PC \u200b\u6307\u5411\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e0b\u200b\u4e24\u6761\u200b\u6307\u4ee4\u200b\u5730\u5740\u200b</li> </ul> </li> <li> <p>CPSR\u200b\u548c\u200bSPSR\u200b\u90fd\u200b\u662f\u200b\u7a0b\u5e8f\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b\uff0cSPSR\u200b\u548c\u200bCPSR\u200b\u7684\u200b\u4f4d\u57df\u200b\u76f8\u540c\u200b\uff0c\u200b\u5176\u4e2d\u200bSPSR\u200b\u662f\u200b\u7528\u6765\u200b\u4fdd\u5b58\u200b\u4e2d\u65ad\u200b\u524d\u200b\u7684\u200bCPSR\u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5728\u200b\u4e2d\u65ad\u200b\u8fd4\u56de\u200b\u4e4b\u540e\u200b\u6062\u590d\u200b\u5904\u7406\u5668\u200b\u7a0b\u5e8f\u200b\u72b6\u6001\u200b</p> <ul> <li> <p>SPSR\uff08Saved Program Status Register\uff09\u200b\u662f\u200b\u4fdd\u5b58\u200b\u4e0a\u200b\u4e00\u4e2a\u200b\u6a21\u5f0f\u200b\u7684\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u4f7f\u7528\u200bSPSR\u200b\u53ef\u4ee5\u200b\u8fd4\u56de\u200b\u5148\u524d\u200b\u7684\u200b\u6a21\u5f0f\u200b</p> </li> <li> <p> \u200b\u4f4d\u57df\u200b \u200b\u4f5c\u7528\u200b N\uff08Negative\uff09 \u200b\u5f53\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u8d1f\u6570\u200b\u65f6\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b1 Z\uff08Zero\uff09 \u200b\u5f53\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u96f6\u65f6\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b1 C\uff08Carry\uff09 \u200b\u7528\u4e8e\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7b97\u672f\u200b\u8fd0\u7b97\u200b\u4e2d\u200b\u7684\u200b\u8fdb\u4f4d\u200b\u6807\u5fd7\u200b V\uff08Overflow\uff09 \u200b\u7528\u4e8e\u200b\u6709\u200b\u7b26\u53f7\u200b\u7b97\u672f\u200b\u8fd0\u7b97\u200b\u4e2d\u200b\u7684\u200b\u6ea2\u51fa\u200b\u6807\u5fd7\u200b Q\uff08Sticky saturation flag\uff09 \u200b\u8868\u793a\u200b\u9971\u548c\u200b\u6807\u5fd7\u200b\uff0c\u200b\u7528\u4e8e\u200b\u9971\u548c\u200b\u8fd0\u7b97\u200b\u6307\u4ee4\u200b GE[3:0]\uff08Greater than or Equal\uff09 \u200b\u6761\u4ef6\u200b\u7801\u200b\uff0c\u200b\u7528\u4e8e\u200b\u6761\u4ef6\u200b\u6267\u884c\u200b E\uff08Endianness\uff09 \u200b\u6307\u793a\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u5b57\u8282\u200b\u5e8f\u200b\u6a21\u5f0f\u200b\uff0c1\u200b\u8868\u793a\u200b\u5927\u200b\u7aef\u200b\u6a21\u5f0f\u200b\uff0c0\u200b\u8868\u793a\u200b\u5c0f\u7aef\u200b\u6a21\u5f0f\u200b A\uff08Asynchronous abort disable\uff09 \u200b\u7981\u7528\u200b\u5f02\u6b65\u200b\u5f02\u5e38\u200b I\uff08IRQ interrupt disable\uff09 \u200b\u7981\u7528\u200bIRQ\uff08\u200b\u666e\u901a\u200b\u53ef\u200b\u5c4f\u853d\u200b\u4e2d\u65ad\u200b\uff09 F\uff08FIQ interrupt disable\uff09 \u200b\u7981\u7528\u200bFIQ\uff08\u200b\u5feb\u901f\u200b\u53ef\u200b\u5c4f\u853d\u200b\u4e2d\u65ad\u200b\uff09 T\uff08Thumb\u200b\u72b6\u6001\u200b\u6807\u5fd7\u200b\uff09 \u200b\u6307\u793a\u200b\u5904\u7406\u5668\u200b\u5f53\u524d\u200b\u5904\u4e8e\u200bThumb\u200b\u72b6\u6001\u200b\u6216\u200bARM\u200b\u72b6\u6001\u200b M[4:0] b10000 User b10001 FIQ b10010 IRQ b10011 Supervisor b10111 Abort b11011 Undefined b11111 System </p> </li> </ul> </li> </ol> </li> <li> <p>\u200b\u5171\u6709\u200b 7 \u200b\u79cd\u200b\u4e0d\u540c\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b\uff1a</p> <ol> <li> <p>\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\uff08User Mode - USR\uff09</p> <ul> <li>\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u7528\u6237\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u5728\u200bUser\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0c\u200b\u62e5\u6709\u200b\u53d7\u9650\u200b\u7684\u200b\u7cfb\u7edf\u8d44\u6e90\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b</li> <li>\u200b\u6ca1\u6709\u200b\u6743\u9650\u200b\u53bb\u200b\u64cd\u4f5c\u200b\u5176\u5b83\u200b\u786c\u4ef6\u8d44\u6e90\u200b\uff0c\u200b\u53ea\u80fd\u200b\u6267\u884c\u200b\u5904\u7406\u200b\u81ea\u5df1\u200b\u7684\u200b\u6570\u636e\u200b</li> <li>\u200b\u4e0d\u80fd\u200b\u5207\u6362\u200b\u5230\u200b\u5176\u5b83\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0c\u200b\u8981\u200b\u60f3\u200b\u8bbf\u95ee\u200b\u786c\u4ef6\u8d44\u6e90\u200b\u6216\u200b\u5207\u6362\u200b\u5230\u200b\u5176\u5b83\u200b\u6a21\u5f0f\u200b\u53ea\u80fd\u200b\u901a\u8fc7\u200b\u8f6f\u200b\u4e2d\u65ad\u200b\u6216\u200b\u4ea7\u751f\u200b\u5f02\u5e38\u200b</li> </ul> </li> <li> <p>\u200b\u5feb\u901f\u200b\u4e2d\u65ad\u200b\u6a21\u5f0f\u200b\uff08Fast Interrupt Mode - FIQ\uff09</p> <ul> <li>\u200b\u5feb\u200b\u4e2d\u65ad\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u53d1\u751f\u200bFIQ\u200b\u4e2d\u65ad\u200b\u65f6\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u76f8\u5bf9\u200b\u4e8e\u200b\u4e2d\u65ad\u200b\u800c\u8a00\u200b\uff0c\u200b\u5feb\u200b\u4e2d\u65ad\u200b\u62e5\u6709\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b\u54cd\u5e94\u200b\u7b49\u7ea7\u200b\u548c\u200b\u66f4\u200b\u4f4e\u200b\u7684\u200b\u5ef6\u8fdf\u200b</li> </ul> </li> <li> <p>\u200b\u666e\u901a\u200b\u4e2d\u65ad\u200b\u6a21\u5f0f\u200b\uff08Interrupt Request Mode - IRQ\uff09</p> <ul> <li>\u200b\u4e2d\u65ad\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u53d1\u751f\u200bIRQ\u200b\u4e2d\u65ad\u200b\u65f6\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b</li> </ul> </li> <li> <p>\u200b\u7ba1\u7406\u6a21\u5f0f\u200b\uff08Superuser Mode - SVC\uff09</p> <ul> <li>\u200b\u7ba1\u7406\u5458\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5185\u6838\u200b\u901a\u5e38\u200b\u8fd0\u884c\u200b\u5728\u200b\u8be5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0c\u200b\u5728\u200b\u5904\u7406\u5668\u200b\u590d\u4f4d\u200b\u6216\u8005\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8c03\u7528\u200bsvc\u200b\u6307\u4ee4\u200b\u7684\u200b\u65f6\u5019\u200b\u5c06\u4f1a\u200b\u8fdb\u5165\u200b\u5230\u200b\u8be5\u200b\u6a21\u5f0f\u200b\uff0c<code>\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u5c31\u662f\u200b\u901a\u8fc7\u200bsvc\u200b\u6307\u4ee4\u200b\u5b8c\u6210\u200b\u7684\u200b</code></li> </ul> </li> <li> <p>\u200b\u6570\u636e\u200b\u8bbf\u95ee\u200b\u4e2d\u6b62\u200b\u6a21\u5f0f\u200b\uff08Data Abort - Abort\uff09</p> <ul> <li>\u200b\u5f53\u200b\u53d1\u751f\u200bData Abort exception\u200b\u6216\u8005\u200bPrefetch Abort exception\u200b\u5f02\u5e38\u200b\u7684\u200b\u65f6\u5019\u200b\u8fdb\u5165\u200b\u8fd9\u4e2a\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u6570\u636e\u200b\u8bbf\u95ee\u200b\u4e2d\u6b62\u200b\u901a\u5e38\u200b\u662f\u200b\u7531\u4e8e\u200b<code>\u200b\u8bbf\u95ee\u200b\u975e\u6cd5\u200b\u5185\u5b58\u200b\u3001\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u9519\u8bef\u200b\u3001\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b</code>\u200b\u6216\u200b\u5176\u4ed6\u200b\u4e0e\u200b\u6570\u636e\u200b\u8bbf\u95ee\u200b\u76f8\u5173\u200b\u7684\u200b\u9519\u8bef\u200b\u800c\u200b\u5f15\u8d77\u200b\u7684\u200b</li> </ul> </li> <li> <p>\u200b\u672a\u5b9a\u4e49\u200b\u6307\u4ee4\u200b\u4e2d\u6b62\u200b\u6a21\u5f0f\u200b\uff08Undefined Instruction Mode - UND\uff09</p> <ul> <li>\u200b\u5904\u7406\u200b\u672a\u5b9a\u4e49\u200b\u7684\u200b\u6307\u4ee4\u200b\u9677\u9631\u200b\uff0c\u200b\u5f53\u200b\u672a\u5b9a\u4e49\u200b\u7684\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u65f6\u200b\u8fdb\u5165\u200b\u8be5\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u53ef\u200b\u7528\u4e8e\u200b\u652f\u6301\u200b\u786c\u4ef6\u200b\u534f\u5904\u7406\u5668\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u4eff\u771f\u200b</li> </ul> </li> <li> <p>\u200b\u7cfb\u7edf\u200b\u6a21\u5f0f\u200b\uff08SYS Mode -SYS\uff09</p> <ul> <li><code>\u200b\u7cfb\u7edf\u200b\u6a21\u5f0f\u200b\u548c\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\u5171\u4eab\u200b\u5bc4\u5b58\u5668\u200b\u89c6\u56fe\u200b</code>\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5728\u200b\u8be5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u53ef\u4ee5\u200b\u65b9\u4fbf\u200b\u7684\u200b\u8bbf\u95ee\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b</li> <li>\u200b\u76ee\u524d\u200b\u5927\u591a\u6570\u200b\u7cfb\u7edf\u200b\u672a\u200b\u4f7f\u7528\u200b\u8be5\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u5229\u7528\u200b\u8fd9\u4e2a\u200b\u7279\u6027\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5904\u7406\u5668\u200b\u542f\u52a8\u200b\u65f6\u200b\u901a\u8fc7\u200b\u8bbe\u7f6e\u200b\u7cfb\u7edf\u200b\u6a21\u5f0f\u200b\u7684\u200bSP\u200b\u5bc4\u5b58\u5668\u200b\u6765\u200b\u8fbe\u5230\u200b\u8bbe\u7f6e\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\u5806\u6808\u200b\u7684\u200b\u76ee\u7684\u200b\uff0c\u200b\u8981\u200b\u8bbe\u7f6e\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\u7684\u200b\u5176\u4ed6\u200b\u5bc4\u5b58\u5668\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8fd9\u6837\u200b\u64cd\u4f5c\u200b</li> </ul> </li> </ol> </li> <li> <p>\u200b\u9664\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\u5916\u200b\uff0c\u200b\u5176\u5b83\u200b\u6a21\u5f0f\u200b\u5747\u200b\u4e3a\u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b(Privileged Modes)</p> <ul> <li>ARM\u200b\u5185\u90e8\u200b\u5bc4\u5b58\u5668\u200b\u548c\u200b\u4e00\u4e9b\u7247\u200b\u5185\u5916\u200b\u8bbe\u5728\u200b\u786c\u4ef6\u200b\u8bbe\u8ba1\u200b\u4e0a\u200b\u53ea\u200b\u5141\u8bb8\u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u8bbf\u95ee\u200b</li> <li>\u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u200b\u5730\u200b\u5207\u6362\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u800c\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u5207\u6362\u200b\u5230\u200b\u522b\u7684\u200b\u6a21\u5f0f\u200b</li> </ul> </li> <li> <p><code>\u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b\u4e2d\u9664\u200b\u7cfb\u7edf\u200b\uff08system\uff09\u200b\u6a21\u5f0f\u200b\u4e4b\u5916\u200b\u7684\u200b\u5176\u4ed6\u200b5\u200b\u79cd\u200b\u6a21\u5f0f\u200b\u53c8\u200b\u7edf\u79f0\u200b\u4e3a\u200b\u5f02\u5e38\u200b\u6a21\u5f0f\u200b</code></p> <ul> <li>\u200b\u5b83\u4eec\u200b\u9664\u4e86\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5728\u200b\u7279\u6743\u200b\u4e0b\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u5207\u6362\u200b\u8fdb\u5165\u200b\u5916\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u7531\u200b\u7279\u5b9a\u200b\u7684\u200b\u5f02\u5e38\u200b\u8fdb\u5165\u200b\u3002\u200b\u6bd4\u5982\u200b<ul> <li>\u200b\u786c\u4ef6\u200b\u4ea7\u751f\u200b\u4e2d\u65ad\u200b\u4fe1\u53f7\u200b\u8fdb\u5165\u200b\u4e2d\u65ad\u200b\u5f02\u5e38\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u8bfb\u53d6\u200b\u6ca1\u6709\u200b\u6743\u9650\u200b\u6570\u636e\u200b\u8fdb\u5165\u200b\u4e2d\u6b62\u200b\u5f02\u5e38\u200b\u6a21\u5f0f\u200b</li> <li>\u200b\u6267\u884c\u200b\u672a\u5b9a\u4e49\u200b\u6307\u4ee4\u200b\u65f6\u200b\u8fdb\u5165\u200b\u672a\u5b9a\u4e49\u200b\u6307\u4ee4\u200b\u4e2d\u6b62\u200b\u5f02\u5e38\u200b\u6a21\u5f0f\u200b</li> </ul> </li> <li><code>\u200b\u5176\u4e2d\u200b\u7ba1\u7406\u6a21\u5f0f\u200b\uff08SVC\uff09\u200b\u4e5f\u200b\u79f0\u4e3a\u200b\u8d85\u7ea7\u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b</code><ul> <li>\u200b\u4e3a\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u63d0\u4f9b\u200b<code>\u200b\u8f6f\u200b\u4e2d\u65ad\u200b\u7684\u200b\u7279\u6709\u200b\u6a21\u5f0f\u200b</code>\uff0c\u200b\u6b63\u662f\u200b\u7531\u4e8e\u200b\u6709\u200b\u4e86\u200b\u8f6f\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u7528\u6237\u7a0b\u5e8f\u200b\u624d\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u5207\u6362\u200b\u5230\u200b\u7ba1\u7406\u6a21\u5f0f\u200b</li> </ul> </li> </ul> </li> <li> <p>\u200b\u5728\u200b\u6bcf\u200b\u4e00\u79cd\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b\u4e2d\u6709\u200b\u4e00\u7ec4\u200b\u76f8\u5e94\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u5728\u200b\u4efb\u610f\u200b\u4e00\u79cd\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0c\u200b\u53ef\u89c1\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff1a</p> <ul> <li>\u200b\u5305\u62ec\u200b 15 \u200b\u4e2a\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\uff08R0~R14\uff09\u3001\u200b\u4e24\u4e2a\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b\u4ee5\u53ca\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\uff08PC\uff09</li> <li>\u200b\u5728\u200b\u6240\u6709\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\uff0c\u200b\u6709\u4e9b\u200b\u662f\u200b\u5404\u200b\u6a21\u5f0f\u200b\u5171\u7528\u200b\u540c\u4e00\u4e2a\u200b\u7269\u7406\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u6709\u4e9b\u200b\u5bc4\u5b58\u5668\u200b\u662f\u200b\u5404\u4e2a\u200b\u6a21\u5f0f\u200b\u81ea\u5df1\u200b\u62e5\u6709\u200b\u72ec\u7acb\u200b\u7684\u200b\u7269\u7406\u200b\u5bc4\u5b58\u5668\u200b</li> </ul> </li> </ul>"},{"location":"embedded_development/#113-cortex-a","title":"1.1.3. Cortex-A\u200b\u7cfb\u5217\u200b\u5bc4\u5b58\u5668","text":"<ol> <li>Cortex-A\u200b\u7cfb\u5217\u200b\u5bc4\u5b58\u5668\u200b</li> </ol>"},{"location":"embedded_development/#12","title":"1.2. \u200b\u4e2d\u65ad\u200b&amp;\u200b\u5f02\u5e38","text":"<ol> <li>ARM\u200b\u4f53\u7cfb\u200b\u67b6\u6784\u200b\u77e5\u8bc6\u70b9\u200b\u603b\u7ed3\u200b</li> <li>\u200b\u4e2d\u65ad\u200b\u7684\u200b\u6302\u200b\u8d77\u200b\u548c\u200b\u6e05\u9664\u200b</li> </ol> <p>\u200b\u5728\u200bARM\u200b\u5904\u7406\u5668\u200b\u4e2d\u200b\uff08Exception\uff09\u200b\u548c\u200b\u4e2d\u65ad\u200b\uff08Interrupt\uff09\u200b\u6709\u4e9b\u200b\u5dee\u522b\u200b</p> <ul> <li> <p>\u200b\u4e24\u8005\u200b\u90fd\u200b\u662f\u200b\u6307\u200b\u8bf7\u6c42\u200b\u5904\u7406\u5668\u200b\u6253\u65ad\u200b\u6b63\u5e38\u200b\u7684\u200b\u7a0b\u5e8f\u6267\u884c\u200b\u6d41\u7a0b\u200b\uff0c\u200b\u8fdb\u5165\u200b\u7279\u5b9a\u200b\u7a0b\u5e8f\u200b\u5faa\u73af\u200b\u7684\u200b\u4e00\u79cd\u200b\u673a\u5236\u200b</p> </li> <li> <p><code>\u200b\u5f02\u5e38\u200b\u4e5f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u540c\u6b65\u200b\u4e2d\u65ad\u200b</code>\uff0c\u200b\u662f\u200b\u5f53\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u65f6\u200b\u7531\u200bCPU\u200b\u63a7\u5236\u200b\u5355\u5143\u200b\u4ea7\u751f\u200b\u7684\u200b\uff0c\u200b\u4e4b\u6240\u4ee5\u200b\u79f0\u4e3a\u200b\u540c\u6b65\u200b\uff0c<code>\u200b\u662f\u56e0\u4e3a\u200b\u53ea\u6709\u200b\u5728\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7ec8\u6b62\u200b\u6267\u884c\u200b\u540e\u200bCPU\u200b\u624d\u200b\u4f1a\u200b\u53d1\u51fa\u200b\u4e2d\u65ad\u200b</code></p> <ul> <li>\u200b\u4e00\u822c\u200b\u7531\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u9519\u8bef\u200b\u4ea7\u751f\u200b\u7684\u200b\uff0c\u200b\u6216\u662f\u200b\u7531\u200b\u5185\u6838\u200b\u5fc5\u987b\u200b\u5904\u7406\u200b\u7684\u200b\u5f02\u5e38\u200b\u6761\u4ef6\u200b\u4ea7\u751f\u200b\u7684\u200b</li> </ul> </li> <li> <p><code>\u200b\u4e00\u822c\u200b\u610f\u4e49\u200b\u7684\u200b\u4e2d\u65ad\u200b\u662f\u200b\u6307\u200b\u5f02\u6b65\u200b\u4e2d\u65ad\u200b</code>\uff0c\u200b\u7531\u200b\u5176\u4ed6\u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u4f9d\u7167\u200b<code>CPU\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\u968f\u673a\u200b\u4ea7\u751f\u200b\u7684\u200b</code>\u3002</p> <ul> <li>\u200b\u8be5\u200b\u8bf7\u6c42\u200b\u4fe1\u53f7\u200b\u6765\u81ea\u200b\u5404\u79cd\u200b\u7247\u4e0a\u200b\u5916\u8bbe\u200b\u548c\u200b\u5916\u200b\u6269\u200b\u7684\u200b\u5916\u8bbe\u200b\uff0c\u200b\u5bf9\u200bCPU\u200b\u6765\u8bf4\u200b\u662f\u200b<code>\u200b\u5f02\u6b65\u200b</code></li> </ul> </li> </ul>"},{"location":"embedded_development/#121-cortex-m3cortex-m4","title":"1.2.1.  Cortex-M3/Cortex-M4\u200b\u5904\u7406\u5668","text":"<p>\u200b\u652f\u6301\u200b2\u200b\u79cd\u200b\u5904\u7406\u5668\u200b\u6a21\u5f0f\u200b(\u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b\uff0chandler\u200b\u6a21\u5f0f\u200b)\uff0c\u200b\u4ee5\u53ca\u200b2\u200b\u4e2a\u200b\u7279\u6743\u200b\u7b49\u7ea7\u200b(\u200b\u7279\u6743\u200b\u7ea7\u200b\uff0c\u200b\u7528\u6237\u200b\u7ea7\u200b)</p> <ul> <li> <p>handler\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u53ea\u80fd\u200b\u662f\u200b\u7279\u6743\u200b\u7ea7\u200b</p> \u200b\u7279\u6743\u200b\u7ea7\u200b \u200b\u7528\u6237\u200b\u7ea7\u200b \u200b\u5f02\u5e38\u200bhandler\u200b\u7684\u200b\u4ee3\u7801\u200b handler\u200b\u6a21\u5f0f\u200b \u200b\u9519\u8bef\u200b\u7684\u200b\u7528\u6cd5\u200b \u200b\u4e3b\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u4ee3\u7801\u200b \u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b \u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b </li> <li> <p>\u200b\u5f02\u5e38\u200b\u7f16\u53f7\u200b\u603b\u5171\u200b256\u200b\u4e2a\u200b\uff0c1\uff0d15 \u200b\u7684\u200b\u5bf9\u5e94\u200b\u7cfb\u7edf\u200b\u5f02\u5e38\u200b\uff0c\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b 16 \u200b\u7684\u200b\u5219\u200b\u5168\u662f\u200b\u5916\u90e8\u200b\u4e2d\u65ad\u200b</p> </li> <li>\u200b\u9664\u4e2a\u522b\u200b\u5f02\u5e38\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\uff0c\u200b\u5176\u5b83\u200b\u5f02\u5e38\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u90fd\u200b\u662f\u200b\u53ef\u7f16\u7a0b\u200b\u7684\u200b<ul> <li>\u200b\u590d\u4f4d\u200b\uff0cNMI \u200b\u4ee5\u53ca\u200bhard fault\uff0c\u200b\u6709\u200b\u56fa\u5b9a\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\uff0c\u200b\u4e0d\u200b\u53ef\u7f16\u7a0b\u200b</li> <li></li> <li>\u200b\u914d\u7f6e\u200b\u4e2d\u65ad\u200b\u9700\u8981\u200b\u5148\u200b\u8bbe\u7f6e\u200b\u4f18\u5148\u7ea7\u200b\u5206\u7ec4\u200b\uff0c\u200b\u7136\u540e\u200b\u8bbe\u7f6e\u200b\u62a2\u5360\u200b\u4f18\u5148\u7ea7\u200b\u548c\u200b\u4ece\u200b\u4f18\u5148\u7ea7\u200b\uff0c\u200b\u6570\u503c\u200b\u8d8a\u5c0f\u200b\u4f18\u5148\u7ea7\u200b\u8d8a\u9ad8\u200b</li> </ul> </li> </ul> <ol> <li>\u200b\u6df1\u5165\u5206\u6790\u200b\u4e2d\u65ad\u200b\u5904\u7406\u8fc7\u7a0b\u200b</li> <li>\u200b\u5bc4\u5b58\u5668\u200b\u4e0e\u200b\u4e2d\u65ad\u200b\u6d41\u7a0b\u200b</li> <li>ARM Cortex-M \u200b\u5f02\u5e38\u200b\u6a21\u578b\u200b\uff08Exception model\uff09</li> </ol> <ol> <li> <p><code>\u200b\u5f53\u200b\u5f02\u5e38\u200b\u53d1\u751f\u200b\u65f6\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u4f1a\u200b\u628a\u200bPC\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u7279\u5b9a\u200b\u7684\u200b\u5b58\u50a8\u5668\u200b\u5730\u5740\u200b\u3002\u200b\u8fd9\u4e00\u200b\u5730\u5740\u200b\u653e\u5728\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5411\u91cf\u200b\u8868\u200b\uff08vector table\uff09\u200b\u7684\u200b\u7279\u5b9a\u200b\u5730\u5740\u200b\u8303\u56f4\u200b\u5185\u200b\uff0c\u200b\u5411\u91cf\u200b\u8868\u200b\u7684\u200b\u5165\u53e3\u200b\u662f\u200b\u4e00\u4e9b\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\uff0c\u200b\u8df3\u8f6c\u200b\u5230\u200b\u4e13\u95e8\u200b\u5904\u7406\u200b\u67d0\u4e2a\u200b\u5f02\u5e38\u200b\u6216\u200b\u4e2d\u65ad\u200b\u7684\u200b\u5b50\u7a0b\u5e8f\u200b\u3002</code></p> </li> <li> <p>\u200b\u6267\u884c\u200b\u6d41\u7a0b\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b</p> <p> <p>\u200b\u4e2d\u65ad\u200b\u5904\u7406\u200b\u6d41\u7a0b\u200b</p> <p>\u200b\u4e2d\u65ad\u200b\u5d4c\u5957\u200b\u6d41\u7a0b\u200b</p> </p> <ol> <li> <p>\u200b\u4e3b\u7a0b\u5e8f\u200b\u6216\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u4e2d\u65ad\u200b\u53d1\u751f\u200b\u3002</p> </li> <li> <p>CPU\u200b\u81ea\u52a8\u200b\u4fdd\u5b58\u200b\u73b0\u573a\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5305\u62ec\u200b\uff08R0~R3\uff0c R12\uff0c R14(LR)\uff0c \u200b\u8fd4\u56de\u200b\u5730\u5740\u200b(PC)\uff0c xPSR\uff0c\u200b\u6808\u200b\u5730\u5740\u200b\u7531\u200b\u4f4e\u200b\u5230\u200b\u9ad8\u200b\uff09\uff0c\u200b\u5c06\u200b\u8fd9\u200b8\u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u503c\u200b\u5b58\u653e\u200b\u5230\u200b\u5806\u6808\u200b\u4e2d\u200b\uff0c\u200b\u5177\u4f53\u200b\u662f\u200b\u4efb\u52a1\u200b\u5806\u6808\u200b\uff0c\u200b\u8fd8\u662f\u200b\u4e3b\u200b\u5806\u6808\u200b\uff0c\u200b\u53d6\u51b3\u4e8e\u200b\u53d1\u751f\u200b\u4e2d\u65ad\u200b\u524d\u200b\u6b63\u5728\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bMSP\u200b\u8fd8\u662f\u200bPSP\u3002</p> <ul> <li> <p>\u200b\u5047\u5982\u200b\u53d1\u751f\u200b\u4e2d\u65ad\u200b\u524d\u200b\uff0c\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200bOS\u200b\u7684\u200b\u67d0\u4e2a\u200b\u4efb\u52a1\u200b\uff0c\u200b\u5373\u200b\u6b64\u65f6\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bPSP\uff0c\u200b\u5219\u200b\u5c06\u200b\u73b0\u573a\u200b\u7684\u200b\u8fd9\u200b8\u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u503c\u200b\u4f7f\u7528\u200bPSP\u200b\u5b58\u50a8\u200b\u5230\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5806\u6808\u200b\u4e2d\u200b\u3002</p> </li> <li> <p>\u200b\u5047\u5982\u200b\u53d1\u751f\u200b\u4e2d\u65ad\u200b\u524d\u200b\uff0c\u200b\u6b63\u5728\u200b\u4f7f\u7528\u200bMSP\uff08\u200b\u88f8\u673a\u200b\u7a0b\u5e8f\u200b\u6216\u200b\u4e2d\u65ad\u200b\u5d4c\u5957\u200b\uff09\uff0c\u200b\u5219\u200b\u5c06\u200b\u73b0\u573a\u200b\u7684\u200b8\u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u503c\u200b\u4f7f\u7528\u200bMSP\u200b\u5b58\u653e\u200b\u5230\u200b\u4e3b\u200b\u5806\u6808\u200b\u4e2d\u200b\u3002</p> </li> </ul> <p>\u200b\u6ce8\u200b\uff1a\u200b\u8fd9\u4e9b\u200b\u5de5\u4f5c\u200b\u90fd\u200b\u662f\u200bCPU\u200b\u81ea\u52a8\u200b\u5b8c\u6210\u200b\u7684\u200b\uff0c\u200b\u786c\u4ef6\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u7a0b\u5e8f\u5458\u200b\u5b9e\u73b0\u200b\u3002\u200b\u8fd9\u200b8\u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u503c\u200b\u5c31\u662f\u200b\u6808\u5e27\u200b\u3002</p> </li> <li> <p>CPU\u200b\u6839\u636e\u200b\u53d1\u751f\u200b\u4e2d\u65ad\u200b\u524d\u200b\u7684\u200b\u72b6\u6001\u200b\uff0c\u200b\u6bd4\u5982\u200b\u6b63\u5728\u200b\u4f7f\u7528\u200bMSP\u200b\u6216\u200bPSP\uff0c\u200b\u5f53\u524d\u200b\u6a21\u5f0f\u200b\u662f\u200b\u7ebf\u7a0b\u200b\u6a21\u5f0f\u200b\u6216\u200bhandler\u200b\u6a21\u5f0f\u200b\u7b49\u200b\uff0c\u200b\u8ba1\u7b97\u200b\u67e5\u8868\u200b\u83b7\u53d6\u200bEXC_RETURN\u200b\u503c\u200b\u3002\u200b\u7136\u540e\u200b\u5c06\u200bEXC_RETURN\u200b\u503c\u200b\u8d4b\u503c\u200b\u7ed9\u200bLR\uff0c<code>\u200b\u8fd9\u91cc\u200b\u6ce8\u610f\u200b\uff0c\u200b\u6b65\u9aa4\u200b2\u200b\u4e2d\u200b\u4fdd\u5b58\u200b\u7684\u200b\u662f\u200bLR\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u662f\u200b\u5c06\u200bEXC_RETURN\u200b\u7684\u200b\u503c\u200b\u66f4\u65b0\u200b\u5230\u200bLR\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u4e0d\u8981\u200b\u6df7\u6dc6\u200b\u3002</code></p> <p>\u200b\u6ce8\u200b\uff1a\u200b\u8fd9\u4e9b\u200b\u5de5\u4f5c\u200b\u662f\u200bCPU\u200b\u81ea\u52a8\u200b\u5b8c\u6210\u200b\u7684\u200b\uff0c\u200b\u786c\u4ef6\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u7a0b\u5e8f\u5458\u200b\u5b9e\u73b0\u200b\u3002\u200b\u6b65\u9aa4\u200b2\u200b\u548c\u200b3\u200b\u90fd\u200b\u662f\u200b\u8fdb\u5165\u200b\u4e2d\u65ad\u200b\u524d\u200b\u7684\u200b\u51c6\u5907\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200bstacking\u200b\u9636\u6bb5\u200b\u3002</p> <p></p> <ul> <li>\u200b\u82e5\u200b\u901a\u8fc7\u200bEXC_RETURN\u200b\u8ba1\u7b97\u200b\u53d1\u73b0\u200b\u4f7f\u7528\u200bFPU\uff0c\u200b\u8fd8\u200b\u9700\u8981\u200b\u5c06\u200bFPU\u200b\u5bc4\u5b58\u5668\u200b\u5165\u6808\u200b</li> </ul> <p></p> </li> <li> <p>\u200b\u8fdb\u5165\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\uff0c\u200b\u6b64\u65f6\u200b\u5047\u5982\u200b\u6b65\u9aa4\u200b2\u200b\u548c\u200b3\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bPSP\uff0c\u200b\u5219\u200bCPU\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u5207\u6362\u200b\u4f7f\u7528\u200bMSP\uff0c\u200b\u56e0\u4e3a\u200b\u4e00\u65e6\u200b\u8fdb\u5165\u200b\u4e2d\u65ad\u200b\uff0cCPU\u200b\u7684\u200b\u5de5\u4f5c\u200b\u6a21\u5f0f\u200b\u5c31\u200b\u53d8\u6210\u200b\u4e86\u200bHandler\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u800c\u200bHandler\u200b\u6a21\u5f0f\u200b\u9ed8\u8ba4\u200b\u662f\u200b\u4f7f\u7528\u200bMSP\u200b\u7684\u200b\u3002</p> </li> <li> <p>\u200b\u5c06\u200bLR\u200b\u5bc4\u5b58\u5668\u200b\u548c\u200b\u5176\u4ed6\u200b\u9ad8\u7ea7\u200b\u5bc4\u5b58\u5668\u200b\uff08R4~R11\u200b\u6839\u636e\u200b\u9700\u8981\u200b\u9009\u62e9\u200b\uff09\u200b\u538b\u6808\u200b\u3002     \u200b\u6ce8\u200b\uff1a\u200b\u8be5\u200b\u6b65\u9aa4\u200b\u5fc5\u987b\u200b\u7531\u200b\u7a0b\u5e8f\u5458\u200b\u6765\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u8981\u200b\u5c06\u200bLR\u200b\u538b\u6808\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u8fd4\u56de\u200b\u7684\u200b\u65f6\u5019\u200b\u9700\u8981\u200bLR\u200b\u7684\u200b\u503c\u200bEXC_RETURN\u3002</p> </li> <li> <p>\u200b\u6267\u884c\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\u3002</p> </li> <li> <p>\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\u6267\u884c\u200b\u5b8c\u6bd5\u200b\u540e\u200b\uff0c\u200b\u8c03\u7528\u200bpop {r4\uff0c PC}\uff0c \u200b\u7531\u4e8e\u200b\u6b65\u9aa4\u200b4\u200b\u4e2d\u200b\uff0c\u200b\u662f\u200b\u5c06\u200br4\u200b\u548c\u200bLR\u200b\u538b\u6808\u200b\uff0c\u200b\u672c\u200b\u6b65\u9aa4\u200b\u51fa\u6808\u200b\uff0c\u200b\u5219\u200b\u662f\u200b\u5c06\u200bLR\u200b\u7684\u200b\u503c\u200b\uff08EXC_RETURN\uff09\u200b\u8d4b\u503c\u200b\u7ed9\u200b\u4e86\u200bPC\u3002</p> </li> <li> <p>CPU\u200b\u5224\u65ad\u200bPC\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u53d1\u73b0\u200bPC\u200b\u7684\u200b\u503c\u200b\u5728\u200bEXC_RETURN\u200b\u503c\u200b\u8303\u56f4\u200b\uff0c\u200b\u8be5\u200b\u8303\u56f4\u200b\u672c\u8eab\u200b\u5728\u200bCPU\u200b\u7684\u200b\u5730\u5740\u200b\u67b6\u6784\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u5c31\u662f\u200b<code>non-excutable</code>\uff0c\u200b\u6240\u4ee5\u200bCPU\u200b\u5c31\u200b\u77e5\u9053\u200b\u4e86\u200b\uff0c\u200b\u539f\u6765\u200b\u8fd9\u662f\u200b\u4e2d\u65ad\u200b\u8981\u200b\u9000\u51fa\u200b\u7684\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u540c\u65f6\u200b\u4f1a\u200b\u66f4\u65b0\u200bSP\uff0c\u200b\u53d8\u6210\u200b\u6b65\u9aa4\u200b2\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200bSP\uff0c\u200b\u6bd4\u5982\u200b\u7531\u200bMSP\u200b\u5207\u6362\u200b\u5230\u200bPSP\u3002</p> </li> <li> <p>\u200b\u6267\u884c\u200b\u6b65\u9aa4\u200b2\u200b\u7684\u200b\u53cd\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5373\u5c06\u200b\u8fdb\u5165\u200b\u4e2d\u65ad\u200b\u524d\u200b\u5b58\u50a8\u200b\u7684\u200b\u73b0\u573a\u200bR0~R3\uff0c R12\uff0c R14\uff0c \u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\uff08PC\uff09\u3001xPSR \u200b\u6062\u590d\u200b\u73b0\u573a\u200b\uff0c\u200b\u6b64\u65f6\u200bPC\u200b\u5c31\u200b\u88ab\u200b\u8d4b\u503c\u200b\u4e3a\u4e86\u200b\u771f\u6b63\u200b\u7684\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u6ce8\u200b\uff1a\u200b\u8be5\u200b\u6b65\u9aa4\u200b\u548c\u200b\u6b65\u9aa4\u200b7\u200b\u4e2d\u200b\uff0c\u200b\u51fa\u73b0\u200b\u4e86\u200b2\u200b\u6b21\u200b\u8d4b\u503c\u200b\u7ed9\u200bPC\uff0c\u200b\u4f46\u662f\u200b\u7b2c\u4e00\u6b21\u200b\u53ea\u662f\u200b\u901a\u77e5\u200bCPU\uff0c\u200b\u8ba9\u200bCPU\u200b\u77e5\u9053\u200b\u8981\u200b\u4e2d\u65ad\u200b\u6267\u884c\u200b\u5b8c\u6bd5\u200b\uff0c\u200b\u9700\u8981\u200b\u9000\u51fa\u200b\uff0c\u200b\u7136\u540e\u200b\u8ba9\u200bCPU\u200b\u81ea\u52a8\u200b\u6267\u884c\u200b\u6b65\u9aa4\u200b8\u200b\u548c\u200b9\u3002\u200b\u8fd9\u6837\u200b\u8bbe\u8ba1\u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u4e0e\u200b\u51fd\u6570\u8c03\u7528\u200b\u6d41\u7a0b\u200b\u4e00\u81f4\u200b\uff0c\u200b\u4f46\u662f\u200b\u53c8\u200b\u80fd\u200b\u8ba9\u200bCPU\u200b\u80fd\u591f\u200b\u533a\u5206\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u548c\u200b\u4e2d\u65ad\u200b\u8fd4\u56de\u200b\u3002</p> </li> <li> <p>\u200b\u7531\u4e8e\u200b\u6b65\u9aa4\u200b9\u200b\u4e2d\u200b\u5df2\u7ecf\u200b\u5b9e\u73b0\u200b\u4e86\u200b<code>\u200b\u6062\u590d\u200b\u73b0\u573a\u200b</code>\u200b\u7684\u200b\u6548\u679c\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7ee7\u7eed\u6267\u884c\u200b\u3002</p> </li> </ol> </li> </ol> <p>\u200b\u5e38\u89c4\u200b\u51fd\u6570\u8c03\u7528\u200b\u89c4\u5219\u200b</p> \u200b\u5bc4\u5b58\u5668\u200b\u7c7b\u578b\u200b \u200b\u8d23\u4efb\u200b\u65b9\u200b \u200b\u7528\u9014\u200b Caller-Saved \u200b\u8c03\u7528\u8005\u200b\uff08Caller\uff09 \u200b\u6613\u200b\u5931\u6027\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u51fd\u6570\u8c03\u7528\u200b\u540e\u200b\u4e0d\u200b\u4fdd\u8bc1\u200b\u4fdd\u7559\u200b Callee-Saved \u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\uff08Callee\uff09 \u200b\u975e\u6613\u200b\u5931\u6027\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u51fd\u6570\u8c03\u7528\u200b\u540e\u200b\u5fc5\u987b\u200b\u4fdd\u7559\u200b <ul> <li>Caller-Saved\u200b\u5bc4\u5b58\u5668\u200b\uff1a\u200b\u8c03\u7528\u8005\u200b\u5728\u200b\u8c03\u7528\u51fd\u6570\u200b\u524d\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u9632\u6b62\u200b\u88ab\u200b\u8c03\u200b\u51fd\u6570\u200b\u7834\u574f\u200b</li> <li>Callee-Saved\u200b\u5bc4\u5b58\u5668\u200b\uff1a\u200b\u88ab\u200b\u8c03\u200b\u51fd\u6570\u200b\u5728\u200b\u4f7f\u7528\u200b\u524d\u200b\u81ea\u884c\u200b\u4fdd\u5b58\u200b\u5e76\u200b\u6062\u590d\u200b</li> <li>\u200b\u4e0d\u200b\u9700\u8981\u200b\u4fdd\u5b58\u200b\u63a7\u5236\u200b\u72b6\u6001\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u6bd4\u5982\u200bxPSR\u200b\u5bc4\u5b58\u5668\u200b</li> </ul> <p>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u4e2d\u200b\u7684\u200b<code>\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b</code>\u200b\u5904\u7406\u200b</p> \u200b\u573a\u666f\u200b \u200b\u5bc4\u5b58\u5668\u200b\u5904\u7406\u200b\u7b56\u7565\u200b \u200b\u901a\u7528\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b \u200b\u4fdd\u5b58\u200b\u6240\u6709\u200b\u5bc4\u5b58\u5668\u200b\uff08caller-saved + callee-saved\uff09 \u200b\u9ad8\u6027\u80fd\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u4f8b\u7a0b\u200b \u200b\u9009\u62e9\u6027\u200b\u4fdd\u5b58\u200b\uff08\u200b\u4ec5\u200b\u4fdd\u5b58\u200b\u5b9e\u9645\u200b\u4f7f\u7528\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff09 <ul> <li>\u200b\u6838\u5fc3\u200b\u539f\u5219\u200b\uff1a\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5fc5\u987b\u200b\u4fdd\u8bc1\u200b\u88ab\u200b\u4e2d\u65ad\u200b\u4ee3\u7801\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u5b8c\u5168\u6062\u590d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9ed8\u8ba4\u200b\u5e94\u200b\u4fdd\u5b58\u200b\u6240\u6709\u200b\u5bc4\u5b58\u5668\u200b</li> <li>\u200b\u4ec5\u200b\u5728\u200b\u660e\u786e\u200b\u4f18\u5316\u200b\u9700\u6c42\u200b\u65f6\u200b\uff1a\u200b\u53ef\u200b\u9488\u5bf9\u6027\u200b\u51cf\u5c11\u200b\u4fdd\u5b58\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u6570\u91cf\u200b\uff0c\u200b\u4f46\u200b\u9700\u200b\u4e25\u683c\u200b\u9a8c\u8bc1\u200b\u5b89\u5168\u6027\u200b</li> </ul>"},{"location":"embedded_development/#122-cortex-r5","title":"1.2.2. Cortex-R5\u200b\u5904\u7406\u5668","text":"<p>ARM\u200b\u5904\u7406\u5668\u200b\u4e2d\u6709\u200b7\u200b\u79cd\u200b\u7c7b\u578b\u200b\u7684\u200b\u5f02\u5e38\u200b\uff0c\u200b\u6309\u200b<code>\u200b\u4f18\u5148\u7ea7\u200b\u4ece\u200b\u9ad8\u5230\u200b\u4f4e\u200b</code>\u200b\u7684\u200b\u6392\u5217\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u590d\u4f4d\u200b\u5f02\u5e38\u200b\uff08Reset\uff09</li> <li>\u200b\u6570\u636e\u200b\u5f02\u5e38\u200b\uff08Data Abort\uff09</li> <li>\u200b\u5feb\u901f\u200b\u4e2d\u65ad\u200b\u5f02\u5e38\u200b\uff08FIQ\uff09</li> <li>\u200b\u5916\u90e8\u200b\u4e2d\u65ad\u200b\u5f02\u5e38\u200b\uff08IRQ\uff09</li> <li>\u200b\u9884\u53d6\u200b\u5f02\u5e38\u200b\uff08Prefetch Abort\uff09</li> <li>\u200b\u672a\u5b9a\u4e49\u200b\u6307\u4ee4\u200b\u5f02\u5e38\u200b\uff08Undefined interrupt\uff09</li> <li>\u200b\u8f6f\u200b\u4e2d\u65ad\u200b\u5f02\u5e38\u200b\uff08SWI\uff0c\u200b\u4f8b\u5982\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff09</li> </ul> <p><code>Cortex-R5 \u200b\u5904\u7406\u5668\u200b\u5728\u200b\u4e2d\u65ad\u200b\u6216\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u65f6\u200b\uff0c\u200b\u5e76\u200b\u6ca1\u6709\u200b\u786c\u4ef6\u200b\u81ea\u52a8\u200b\u538b\u6808\u200b\u7684\u200b\u673a\u5236\u200b\u3002\u200b\u4e0e\u200bCortex-M\u200b\u7cfb\u5217\u200b\u4e0d\u540c\u200b\uff0cCortex-R5 \u200b\u5904\u7406\u5668\u200b\u901a\u5e38\u200b\u9700\u8981\u200b\u5728\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u4f8b\u7a0b\u200b\u4e2d\u200b\u624b\u52a8\u200b\u4fdd\u5b58\u200b\u548c\u200b\u6062\u590d\u200b\u5bc4\u5b58\u5668\u200b\u72b6\u6001\u200b\u3002</code></p> <p>\u200b\u5728\u200b Cortex-R5 \u200b\u5904\u7406\u5668\u200b\u4e2d\u200b\uff0c\u200b\u4e2d\u65ad\u200b\u6216\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u65f6\u200b\uff0c\u200b\u5f00\u53d1\u8005\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u4ee5\u4e0b\u51e0\u70b9\u200b\uff1a</p> <ol> <li> <p>\u200b\u624b\u52a8\u200b\u4fdd\u5b58\u200b\u73b0\u573a\u200b\uff1a \u200b\u4e2d\u65ad\u200b\u670d\u52a1\u4f8b\u7a0b\u200b\u7684\u200b\u5f00\u5934\u200b\u901a\u5e38\u200b\u5305\u62ec\u200b\u624b\u52a8\u200b\u4fdd\u5b58\u200b\u4e00\u90e8\u5206\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u503c\u200b\u5230\u200b\u5806\u6808\u200b\u4e2d\u200b\uff0c\u200b\u4ee5\u200b\u4fdd\u62a4\u200b\u73b0\u573a\u200b\u3002\u200b\u8fd9\u200b\u901a\u5e38\u200b\u5305\u62ec\u200b\u4fdd\u5b58\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\u3001\u200b\u5806\u6808\u200b\u6307\u9488\u200b\u3001\u200b\u94fe\u63a5\u200b\u5bc4\u5b58\u5668\u200b\u7b49\u200b\u3002</p> </li> <li> <p>\u200b\u624b\u52a8\u200b\u6062\u590d\u200b\u73b0\u573a\u200b\uff1a \u200b\u5728\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u4f8b\u7a0b\u200b\u6267\u884c\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u4ece\u200b\u5806\u6808\u200b\u4e2d\u200b\u6062\u590d\u200b\u4e4b\u524d\u200b\u4fdd\u5b58\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u503c\u200b\uff0c\u200b\u786e\u4fdd\u200b\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u5230\u200b\u4e2d\u65ad\u200b\u53d1\u751f\u200b\u65f6\u200b\u7684\u200b\u72b6\u6001\u200b\u3002</p> </li> </ol> <p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b Cortex-R5 \u200b\u4e2d\u65ad\u200b\u670d\u52a1\u4f8b\u7a0b\u200b\u7684\u200b\u793a\u4f8b\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5c55\u793a\u200b\u4e86\u200b\u624b\u52a8\u200b\u4fdd\u5b58\u200b\u548c\u200b\u6062\u590d\u200b\u5bc4\u5b58\u5668\u200b\u72b6\u6001\u200b\u7684\u200b\u8fc7\u7a0b\u200b\uff1a</p> <pre><code>.global my_interrupt_handler\n\n.section .text\n\nmy_interrupt_handler:\n    stmdb   sp!,{r0-r3,r12,lr}  /* state save from compiled code */\n    bl  my_interrupt            /* my_interrupt vector */\n    ldmia   sp!,{r0-r3,r12,lr}  /* state restore from compiled code */\n    subs    pc, lr, #4          /* adjust return */\n</code></pre> <ul> <li> <p>Cortex-R\u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\uff0cLR\u3001SP\u3001xPSR\u200b\u5bc4\u5b58\u5668\u200b\u5728\u200b\u5f02\u5e38\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u90fd\u200b\u6709\u200b\u5f71\u5b50\u200b\u5bc4\u5b58\u5668\u200b</p> <ul> <li>\u200b\u6545\u200b\u5f02\u5e38\u200b\u53d1\u751f\u200b\u65f6\u200b\uff0c\u200b\u786c\u4ef6\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u5c06\u200bPC\u200b\u4fdd\u5b58\u200b\u5230\u200bLR_exception\uff0cxPSR\u200b\u4fdd\u5b58\u200b\u5230\u200bxPSR_exception\u200b\u5bc4\u5b58\u5668\u200b</li> <li>\u200b\u56e0\u6b64\u200b\u5c06\u200bLR_exception\u200b\u538b\u6808\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b\u5f02\u5e38\u200b\u53d1\u751f\u200b\u65f6\u200b\uff0c\u200b\u5c06\u200bPC\u200b\u7684\u200b\u503c\u5165\u200b\u6808\u200b\uff08\u200b\u5373\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\uff09</li> <li>\u200b\u5728\u200b Cortex-R \u200b\u4e2d\u200b\uff0c\u200b\u786c\u4ef6\u200b\u538b\u6808\u200b\u53d1\u751f\u200b\u5728\u200b SP \u200b\u5207\u6362\u200b\u4e4b\u540e\u200b\uff0c\u200b\u800c\u200b Cortex-M \u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\u786c\u4ef6\u200b\u538b\u6808\u200b\u5728\u200b SP \u200b\u5207\u6362\u200b\u4e4b\u524d\u200b</li> </ul> </li> <li> <p>Cortex-R\u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\u91c7\u7528\u200b\u591a\u7ea7\u200b\u6d41\u6c34\u7ebf\u200b\u6267\u884c\u200b\uff0c\u200b\u540c\u65f6\u200bCPU\u200b\u5728\u200b\u6267\u884c\u200b\uff08Execute\uff09\u200b\u9636\u6bb5\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u7ecf\u5386\u200b\u53d6\u6307\u200b\uff08Fetch\uff09\u3001\u200b\u8bd1\u7801\u200b\uff08Decode\uff09\u200b\u4e24\u4e2a\u200b\u9636\u6bb5\u200b</p> <ul> <li>\u200b\u4e00\u822c\u6765\u8bf4\u200b\uff0cPC\u200b\u7684\u200b\u503c\u4f1a\u200b\u6bd4\u200b\u6b63\u5728\u200b\u6267\u884c\u200b\u7684\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\u591a\u51fa\u200b\u4e24\u4e2a\u200b\u6307\u4ee4\u200b\u957f\u5ea6\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u51cf\u53bb\u200b\u4e00\u4e2a\u200b\u6307\u4ee4\u200b\u5bbd\u5ea6\u200b<ul> <li> Cortex-R\u200b\u7cfb\u5217\u200b\u7684\u200b\u82af\u7247\u200b\u5728\u200b\u591a\u7ea7\u200b\u6d41\u6c34\u7ebf\u200b\u6267\u884c\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0cLR_{mode}\uff1a\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\uff08PC + \u200b\u504f\u79fb\u200b\uff0c\u200b\u504f\u79fb\u200b\u503c\u200b\u7531\u200b\u5f02\u5e38\u200b\u7c7b\u578b\u200b\u51b3\u5b9a\u200b\uff09\uff1f</li> </ul> </li> <li>RISC-V\u200b\u5c31\u200b\u4e0d\u200b\u9700\u8981\u200b\u8c03\u6574\u200b\uff0cmepc\uff08Machine Exception PC\uff09\u200b\u5bc4\u5b58\u5668\u200b\u5c31\u200b\u76f4\u63a5\u200b\u4fdd\u5b58\u200b\u6b63\u786e\u200b\u7684\u200b\u89e6\u53d1\u200b\u5f02\u5e38\u200b\u7684\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u5730\u5740\u200b</li> </ul> </li> <li> <p>freertos\u200b\u7684\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\uff1a</p> <pre><code>\u200b\u89e6\u53d1\u200bPendSV\u200b\u5f02\u5e38\u200b\uff08SWI\u200b\u5f02\u5e38\u200b\uff0c\u200b\u7ba1\u7406\u6a21\u5f0f\u200b\uff08Superuser Mode - SVC\uff09\uff09\n    \u2193\n\u200b\u786c\u4ef6\u200b\u81ea\u52a8\u200b\u4fdd\u5b58\u200b LR_exception \u200b\u548c\u200b SPSR_exception \u200b\u5230\u200b SYS\u200b\u6a21\u5f0f\u200b\u6808\u200b\uff08\u200b\u901a\u8fc7\u200bSRSDB\uff09\n    \u2193\n\u200b\u5207\u6362\u200b\u5230\u200bSYS\u200b\u6a21\u5f0f\u200b\uff08CPS #SYS_MODE\uff09\n    \u2193\n\u200b\u8f6f\u4ef6\u200b\u4fdd\u5b58\u200b R0-R12, R14 \u200b\u5230\u200b\u4efb\u52a1\u200b\u6808\u200b\n    \u2193\n\u200b\u4fdd\u5b58\u200b\u4e34\u754c\u200b\u533a\u200b\u8ba1\u6570\u200b\u548c\u200bFPU\u200b\u72b6\u6001\u200b\n    \u2193\n\u200b\u4fdd\u5b58\u200b\u5f53\u524d\u200bSP\u200b\u5230\u200bTCB\n    \u2193\n\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\uff08\u200b\u52a0\u8f7d\u200b\u65b0\u200b\u4efb\u52a1\u200bTCB\uff09\n    \u2193\n\u200b\u6062\u590d\u200b\u65b0\u200b\u4efb\u52a1\u200b\u7684\u200bSP\n    \u2193\n\u200b\u5f39\u200b\u51fa\u65b0\u200b\u4efb\u52a1\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff08R0-R12, R14, FPU\u200b\u7b49\u200b\uff09\n    \u2193\n\u200b\u8fd4\u56de\u200b\uff08MOV PC, LR\uff09\u2192 \u200b\u786c\u4ef6\u200b\u6062\u590d\u200b LR_exception \u200b\u548c\u200b SPSR_exception\n</code></pre> </li> </ul>"},{"location":"embedded_development/#13-cache","title":"1.3. Cache","text":"<ol> <li>Cache\u200b\u7684\u200b\u57fa\u672c\u539f\u7406\u200b</li> </ol>"},{"location":"embedded_development/#14-mpu","title":"1.4. MPU","text":"<p>Memory Protection Unit\uff0c\u200b\u5185\u5b58\u4fdd\u62a4\u200b\u5355\u5143\u200b\u3002</p> <ol> <li> <p>\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u63a7\u5236\u200b\uff1aMPU \u200b\u53ef\u4ee5\u200b\u914d\u7f6e\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\uff0c\u200b\u5305\u62ec\u200b\u8bfb\u200b\u3001\u200b\u5199\u200b\u3001\u200b\u6267\u884c\u200b\u7b49\u200b\u6743\u9650\u200b\u3002\u200b\u901a\u8fc7\u200b\u8bbe\u7f6e\u200b\u4e0d\u540c\u200b\u7684\u200b\u6743\u9650\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u9650\u5236\u200b\u7a0b\u5e8f\u200b\u5bf9\u200b\u5185\u5b58\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u9632\u6b62\u200b\u672a\u7ecf\u200b\u6388\u6743\u200b\u7684\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\u3002</p> <ul> <li>\u200b\u4fdd\u62a4\u200b<code>\u200b\u5916\u8bbe\u200b\u548c\u200b\u5185\u5b58\u200b</code>\u200b\u7684\u200b\u8bfb\u5199\u200b\uff0c\u200b\u9632\u6b62\u200b\u5173\u952e\u200b\u6570\u636e\u200b\u88ab\u200b\u610f\u5916\u200b\u4fee\u6539\u200b</li> <li>\u200b\u63a7\u5236\u200b\u5185\u5b58\u200b\u76f8\u5173\u200b\u8bbf\u95ee\u200b\u5c5e\u6027\u200b<ul> <li>\u200b\u6307\u4ee4\u200b/\u200b\u6570\u636e\u200b\u662f\u5426\u200b\u53ef\u200b\u7f13\u5b58\u200b\u3001\u200b\u4ee3\u7801\u6267\u884c\u200b\uff08load/store\u200b\u6307\u4ee4\u200b\uff09\u200b\u662f\u5426\u200b\u53ef\u200b\u4e71\u5e8f\u200b</li> </ul> </li> </ul> </li> <li> <p>\u200b\u5185\u5b58\u200b\u5206\u533a\u200b\u9694\u79bb\u200b\uff1aMPU \u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5185\u5b58\u200b\u5212\u5206\u200b\u4e3a\u200b\u591a\u4e2a\u200b\u72ec\u7acb\u200b\u7684\u200b\u533a\u57df\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u533a\u57df\u200b\u5177\u6709\u200b\u4e0d\u540c\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u3002\u200b\u8fd9\u79cd\u200b\u9694\u79bb\u200b\u53ef\u4ee5\u200b\u9632\u6b62\u200b\u4e0d\u540c\u200b\u4efb\u52a1\u200b\u6216\u200b\u8fdb\u7a0b\u200b\u4e4b\u95f4\u200b\u76f8\u4e92\u200b\u5e72\u6270\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u7cfb\u7edf\u200b\u7684\u200b\u7a33\u5b9a\u6027\u200b\u3002</p> <ul> <li>\u200b\u9650\u5236\u200b\u4efb\u52a1\u200b\u53ea\u80fd\u200b\u8bfb\u53d6\u200b\u5177\u6709\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u7684\u200b\u5185\u5b58\u200b\u533a\u57df\u200b<ul> <li>\u200b\u5728\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u64cd\u4f5c\u200b\u4e2d\u200b\u5b8c\u6210\u200b\uff08\u200b\u4e00\u822c\u200b\u662f\u200bPendSV\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff09MPU\u200b\u7684\u200b\u5185\u5b58\u200b\u5c5e\u6027\u200b\u914d\u7f6e\u200b</li> </ul> </li> </ul> </li> <li> <p>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\uff1aMPU \u200b\u53ef\u4ee5\u200b\u68c0\u6d4b\u200b\u548c\u200b\u54cd\u5e94\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u5f02\u5e38\u200b\uff0c\u200b\u5982\u200b\u8d8a\u754c\u200b\u8bbf\u95ee\u200b\u3001\u200b\u975e\u6cd5\u200b\u8bbf\u95ee\u200b\u7b49\u200b\u3002\u200b\u5f53\u200b\u53d1\u751f\u200b\u5f02\u5e38\u200b\u65f6\u200b\uff0cMPU \u200b\u53ef\u4ee5\u200b\u89e6\u53d1\u200b\u76f8\u5e94\u200b\u7684\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u673a\u5236\u200b\uff0c\u200b\u4ee5\u200b\u9632\u6b62\u200b\u7cfb\u7edf\u200b\u5d29\u6e83\u200b\u6216\u200b\u6570\u636e\u200b\u635f\u574f\u200b\u3002</p> <ul> <li>\u200b\u68c0\u6d4b\u200b\u5806\u200b\u3001\u200b\u6808\u200b\u662f\u5426\u200b\u6ea2\u51fa\u200b</li> </ul> </li> <li> <p>\u200b\u4ee3\u7801\u200b\u4fdd\u62a4\u200b\uff1aMPU \u200b\u53ef\u4ee5\u200b\u4fdd\u62a4\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u4e0d\u200b\u88ab\u200b\u975e\u6cd5\u200b\u590d\u5236\u200b\u6216\u200b\u4fee\u6539\u200b\u3002\u200b\u901a\u8fc7\u200b\u9650\u5236\u200b\u5bf9\u200b\u4ee3\u7801\u6bb5\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u9632\u6b62\u200b\u6076\u610f\u8f6f\u4ef6\u200b\u653b\u51fb\u200b\u6216\u200b\u75c5\u6bd2\u611f\u67d3\u200b\u3002</p> </li> <li> <p>\u200b\u6570\u636e\u4fdd\u62a4\u200b\uff1aMPU \u200b\u53ef\u4ee5\u200b\u4fdd\u62a4\u200b\u5173\u952e\u200b\u6570\u636e\u200b\u4e0d\u200b\u53d7\u200b\u672a\u7ecf\u200b\u6388\u6743\u200b\u7684\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\u3002\u200b\u901a\u8fc7\u200b\u8bbe\u7f6e\u200b\u6570\u636e\u200b\u6bb5\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u786e\u4fdd\u200b\u6570\u636e\u200b\u7684\u200b\u673a\u5bc6\u6027\u200b\u548c\u200b\u5b8c\u6574\u6027\u200b\u3002</p> </li> </ol>"},{"location":"embedded_development/#141-arm-cortex-m4-mpu","title":"1.4.1. ARM Cortex-M4 MPU","text":"<p>MPU\u200b\u5141\u8bb8\u200b<code>\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u8bbf\u95ee\u200b8\u200b\u4e2a\u200b\u5185\u5b58\u200b\u6216\u200b\u5916\u8bbe\u200b\u533a\u57df\u200b\uff080~7\uff09</code>\uff0c\u200b\u8fd8\u6709\u200b\u4e00\u4e2a\u200b\u7f16\u53f7\u200b\u4e3a\u200b-1\u200b\u7684\u200b\u80cc\u666f\u200b\u533a\u57df\u200b\uff0c\u200b\u533a\u57df\u200b7\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u6700\u9ad8\u200b\uff0c\u200b\u533a\u57df\u200b-1\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u6700\u4f4e\u200b\u3002</p> <ul> <li>\u200b\u4f7f\u80fd\u200bMPU\u200b\u4f46\u200b\u6ca1\u6709\u200b\u8bbe\u7f6e\u200b\u4efb\u4f55\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\uff0c\u200b\u6b64\u65f6\u200b\uff0c\u200b\u80cc\u666f\u200b\u533a\u57df\u200b\uff08\u200b\u6574\u4e2a\u200b\u5185\u5b58\u7a7a\u95f4\u200b\uff09\u200b\u751f\u6548\u200b\uff0c\u200b\u7279\u6743\u200b\u7ea7\u200b\u7a0b\u5e8f\u200b\u8bbf\u95ee\u200b\u6240\u6709\u200b\u5730\u5740\u200b\uff0c\u200b\u800c\u200b\u7528\u6237\u200b\u7ea7\u200b\u7a0b\u5e8f\u200b\u4f1a\u200b\u89e6\u53d1\u200bMemManage fault\u3002</li> <li>\u200b\u80cc\u666f\u200b\u533a\u57df\u200b\u4e00\u822c\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u53ea\u6709\u200b\u7279\u6743\u200b\u7ea7\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b</li> </ul> <p></p> <p>\u200b\u4e0a\u200b\u56fe\u200b\u663e\u793a\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b\u516d\u4e2a\u200b\u533a\u57df\u200b\u7684\u200b\u793a\u4f8b\u200b\u3002\u200b\u533a\u57df\u200b4\u200b\u4e0e\u200b\u533a\u57df\u200b0\u200b\u548c\u200b1\u200b\u91cd\u53e0\u200b\uff0c\u200b\u533a\u57df\u200b5\u200b\u5305\u542b\u200b\u4e8e\u200b\u533a\u57df\u200b3\u3002<code>\u200b\u7531\u4e8e\u200b\u4f18\u5148\u7ea7\u200b\u6309\u200b\u5347\u5e8f\u200b\u6392\u5217\u200b\uff0c\u200b\u91cd\u53e0\u200b\u533a\u57df\u200b(\u200b\u6a59\u8272\u200b)\u200b\u5177\u6709\u200b\u4f18\u5148\u7ea7\u200b</code>\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5982\u679c\u200b\u533a\u57df\u200b0\u200b\u662f\u200b\u53ef\u200b\u5199\u200b\u7684\u200b\uff0c\u200b\u800c\u200b\u533a\u57df\u200b4\u200b\u662f\u200b\u4e0d\u53ef\u200b\u5199\u200b\u7684\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4f4d\u4e8e\u200b0\u200b\u548c\u200b4\u200b\u4e4b\u95f4\u200b\u91cd\u53e0\u200b\u7684\u200b\u5730\u5740\u200b\u662f\u200b\u4e0d\u53ef\u200b\u5199\u200b\u7684\u200b\u3002</p> <ol> <li> <p>MPU\u200b\u5bf9\u4e8e\u200b\u6307\u4ee4\u548c\u6570\u636e\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u5e76\u200b\u6ca1\u6709\u200b\u505a\u200b\u533a\u5206\u200b\uff0c\u200b\u800c\u662f\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u533a\u57df\u200b\u6765\u200b\u63a7\u5236\u200b\u5bf9\u200b\u6570\u636e\u200b\u548c\u200b\u6307\u4ee4\u200b\u7684\u200b\u8bbf\u95ee\u200b\u3002</p> </li> <li> <p>MPU\u200b\u8fd8\u200b\u80fd\u200b\u5b9a\u4e49\u200b\u5176\u5b83\u200b\u5185\u5b58\u200b\u5c5e\u6027\u200b\uff0c\u200b\u5982\u200b\u4e00\u4e2a\u200b\u533a\u57df\u200b\u7684\u200b\u53ef\u200b\u7f13\u5b58\u200b\u6027\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u5c5e\u6027\u200b\u90fd\u200b\u4f1a\u200b\u4f20\u9012\u200b\u7ed9\u200b\u7cfb\u7edf\u200b\u7684\u200bCache\u200b\u5355\u5143\u200b\u6216\u200b\u5185\u5b58\u200b\u63a7\u5236\u5668\u200b\u3002</p> </li> </ol> <p>\u200b\u5185\u5b58\u200b\u7c7b\u578b\u200b</p> <p>\u200b\u4e00\u822c\u200b\u6709\u200b\u4e09\u79cd\u200b\u5e38\u89c1\u200b\u7684\u200b\u5185\u5b58\u200b\u7c7b\u578b\u200b\uff1a</p> <ol> <li> <p>Normal Memory\uff1a\u200b\u5141\u8bb8\u200bCPU\u200b\u4ee5\u200b\u9ad8\u6548\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5bf9\u200b\u5b57\u8282\u200b\u3001\u200b\u534a\u5b57\u200b\u548c\u200b\u5b57\u200b\u8fdb\u884c\u200b\u52a0\u8f7d\u200b\u548c\u200b\u5b58\u50a8\u200b\uff08load/store\u200b\u6307\u4ee4\u200b\uff09\u200b\u64cd\u4f5c\u200b\uff08\u200b\u7f16\u8bd1\u5668\u200b\u4e0d\u200b\u77e5\u9053\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u7c7b\u578b\u200b\uff09\u3002</p> <ul> <li>\u200b\u5bf9\u4e8e\u200b\u666e\u901a\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\uff0c\u200b\u52a0\u8f7d\u200b\u548c\u200b\u5b58\u50a8\u200b\u7684\u200b\u987a\u5e8f\u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u6309\u7167\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u5217\u51fa\u200b\u7684\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\u3002</li> </ul> </li> <li> <p>Device Memory\uff1a\u200b\u52a0\u8f7d\u200b\u548c\u200b\u5b58\u50a8\u200b\u64cd\u4f5c\u200b\u4e25\u683c\u200b\u6309\u7167\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\uff0c\u200b\u4ee5\u200b\u786e\u4fdd\u200b\u5bc4\u5b58\u5668\u200b\u6309\u7167\u200b\u6b63\u786e\u200b\u7684\u200b\u987a\u5e8f\u200b\u8fdb\u884c\u200b\u8bbe\u7f6e\u200b\u3002</p> </li> <li> <p>Strongly Ordered Memory\uff1a\u200b\u4e00\u5207\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u4e25\u683c\u200b\u6309\u7167\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u5217\u51fa\u200b\u7684\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\uff0cCPU\u200b\u4f1a\u200b\u7b49\u5f85\u200b\u52a0\u8f7d\u200b/\u200b\u5b58\u50a8\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u5b8c\u6210\u200b\u540e\u200b\u624d\u200b\u6267\u884c\u7a0b\u5e8f\u200b\u6d41\u4e2d\u200b\u7684\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\uff0c\u200b\u8fd9\u4f1a\u200b\u5bfc\u81f4\u200b\u6027\u80fd\u200b\u4e0b\u964d\u200b\u3002</p> </li> </ol> <p>\u200b\u5185\u5b58\u200b\u5c5e\u6027\u200b</p> <p>MPU\u200b\u7684\u200b\u533a\u57df\u200b\u5c5e\u6027\u200b\u548c\u200b\u5927\u5c0f\u200b\u5bc4\u5b58\u5668\u200b<code>MPU_RASR(Region Attribute and Size Register)\u200b\u7528\u6765\u200b\u8bbe\u7f6e\u200b\u6240\u6709\u200b\u5185\u5b58\u200b\u5c5e\u6027\u200b</code>\uff0c\u200b\u5bc4\u5b58\u5668\u200b\u5404\u4e2a\u200b\u5b57\u6bb5\u200b\u7684\u200b\u529f\u80fd\u200b\u5982\u4e0b\u200b\u8868\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <ol> <li> <p>XN\uff1a\u200b\u63a7\u5236\u4ee3\u7801\u200b\u7684\u200b\u6267\u884c\u200b\u3002\u200b\u5f53\u200bXN=1\u200b\u65f6\u200b\uff0c\u200b\u8bbf\u95ee\u200b\u5bf9\u5e94\u200b\u7684\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u5c06\u200b\u4ea7\u751f\u200bMemManage Fault\u3002</p> </li> <li> <p>AP\uff1a\u200b\u63a7\u5236\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\uff0c\u200b\u5982\u4e0b\u200b\u8868\u200b\u6240\u793a\u200b</p> <p></p> </li> <li> <p>S\uff1a\u200b\u6307\u793a\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u662f\u5426\u200b\u53ef\u200b\u5171\u4eab\u200b\u3002\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u533a\u57df\u200b\u662f\u200b\u53ef\u200b\u5171\u4eab\u200b\u7684\u200b\uff0c\u200b\u90a3\u4e48\u200b\u591a\u4e2a\u200b\u603b\u7ebf\u200b\u4e3b\u63a7\u200b\u53ef\u4ee5\u200b\u540c\u65f6\u200b\u8bbf\u95ee\u200b\u5b83\u200b\uff0c\u200b\u5e76\u4e14\u200b\u7cfb\u7edf\u200b\u4f1a\u200b\u63d0\u4f9b\u6570\u636e\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\u3002\u200b\u7136\u800c\u200b\uff0c\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u533a\u57df\u200b\u662f\u200b\u4e0d\u53ef\u200b\u5171\u4eab\u200b\u7684\u200b\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u8f6f\u4ef6\u200b\u6765\u200b\u63a7\u5236\u200b\u591a\u4e2a\u200b\u603b\u7ebf\u200b\u8bbf\u95ee\u200b\u6570\u636e\u200b\u7684\u200b\u4e00\u81f4\u6027\u200b\u3002</p> <ul> <li>\u200b\u5bf9\u4e8e\u200b\u6709\u200b\u7684\u200b\u82af\u7247\u200b\u6765\u8bf4\u200b\uff0c\u200b\u4e0d\u200b\u652f\u6301\u200b\u786c\u4ef6\u200b\u5c42\u200b\u7684\u200b\u6570\u636e\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\uff0cS\u200b\u5c31\u200b\u7528\u6765\u200b\u6307\u793a\u200b\u8be5\u200b\u533a\u57df\u200b\u662f\u5426\u200b\u4e3a\u200bnon-cacheable</li> </ul> </li> <li> <p>TEX\u3001C\u3001B\uff1a\u200b\u8fd9\u200b\u4e09\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\u5b9a\u4e49\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u7684\u200b\u7f13\u5b58\u200b\u5c5e\u6027\u200b\uff0c\u200b\u5e76\u200b\u80fd\u200b\u5728\u200b\u4e00\u5b9a\u200b\u7a0b\u5ea6\u200b\u4e0a\u200b\u786e\u5b9a\u200b\u5176\u200b\u53ef\u200b\u5171\u4eab\u6027\u200b\uff08S\u200b\u5b57\u200b\u6bb5\u200b\uff09</p> <p></p> <ul> <li>\u200b\u5f53\u200bshareable\u200b\u4f4d\u4e3a\u200b1\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u7f13\u5b58\u200b\u7684\u200b\u7b56\u7565\u200b\u4e0d\u200b\u53d7\u200bTEX/C/B\u200b\u5b57\u6bb5\u200b\u7684\u200b\u5f71\u54cd\u200b\uff0c\u200b\u800c\u200b\u56fa\u5b9a\u200b\u4e3a\u200bnon-cacheable</li> <li> <p>Bufferable\u200b\u548c\u200bCacheable\u200b\u7684\u200b\u4e0d\u540c\u200b\uff1f</p> <ul> <li>Bufferable \u200b\u4e3b\u8981\u200b\u5173\u6ce8\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u7684\u200b\u8bfb\u5199\u200b\u6548\u7387\u200b\uff0c\u200b\u7528\u4e8e\u200b\u9884\u53d6\u200b\u6570\u636e\u200b\u6216\u8005\u200b\u6839\u636e\u200b\u5176\u200b\u7f13\u51b2\u200b\u7b56\u7565\u200b\u51b3\u5b9a\u200b\u4f55\u65f6\u200b\u5c06\u200b\u6570\u636e\u200b\u5199\u56de\u200b\u5185\u5b58\u200b\u3002\u200b\u800c\u200bCacheable \u200b\u5c5e\u6027\u200b\u5219\u200b\u4e3b\u8981\u200b\u5173\u6ce8\u200b\u6570\u636e\u200b\u7684\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\uff0c\u200b\u5141\u8bb8\u200b\u5904\u7406\u5668\u200b\u5c06\u200b\u6570\u636e\u200b\u5b58\u50a8\u200b\u5728\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u4e2d\u4ee5\u200b\u52a0\u5feb\u200b\u8bbf\u95ee\u200b\u3002</li> <li>Bufferable \u200b\u5c5e\u6027\u200b\u6307\u793a\u200b\u662f\u5426\u200b\u5141\u8bb8\u200b\u5bf9\u200b\u8be5\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u8fdb\u884c\u200b\u7f13\u51b2\u200b\u3002\u200b\u5982\u679c\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u88ab\u200b\u6807\u8bb0\u200b\u4e3a\u200b\u53ef\u200b\u7f13\u51b2\u200b\uff0c\u200b\u603b\u7ebf\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5185\u90e8\u200b\u7f13\u51b2\u200b\u6570\u636e\u200b\u7684\u200b\u4f20\u8f93\u200b\u3002\u200b\u7136\u800c\u200b\uff0c\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u7f13\u51b2\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u6570\u636e\u200b\u7684\u200b\u5ef6\u8fdf\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u6570\u636e\u200b\u5b9e\u9645\u4e0a\u200b\u5e76\u200b\u4e0d\u662f\u200b\u7acb\u5373\u200b\u5199\u5165\u200b\u6216\u200b\u8bfb\u53d6\u200b\u3002<ul> <li>Bufferable\u200b\u5c5e\u6027\u200b\u4e0d\u662f\u200b\u76f4\u63a5\u200b\u7684\u200b\u603b\u7ebf\u200b\u914d\u7f6e\u200b\uff0c\u200b\u800c\u662f\u200b\u901a\u8fc7\u200b\u5185\u5b58\u200b\u5c5e\u6027\u200b\u95f4\u63a5\u200b\u63a7\u5236\u200b\u603b\u7ebf\u200b\u4e8b\u52a1\u200b\u7684\u200b\u7f13\u51b2\u200b\u884c\u4e3a\u200b</li> <li>\u200b\u5b83\u200b\u5728\u200b\u786c\u4ef6\u200b\u5c42\u9762\u200b\u901a\u8fc7\u200b\u603b\u7ebf\u200b\u534f\u8bae\u200b\uff08\u200b\u5982\u200bAXI\u200b\u7684\u200bAxCACHE\u200b\u4fe1\u53f7\u200b\uff09\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u4f18\u5316\u200b\u5199\u200b\u64cd\u4f5c\u200b\u7684\u200b\u5ef6\u8fdf\u200b\u548c\u200b\u603b\u7ebf\u200b\u6548\u7387\u200b\uff0c\u200b\u5373\u200b\u901a\u77e5\u200b\u603b\u7ebf\u200b\u63a7\u5236\u5668\u200b\u53ef\u4ee5\u200b\u5ef6\u8fdf\u200b\u5b8c\u6210\u200b\u4e8b\u52a1\u200b\uff08\u200b\u65e0\u9700\u200b\u7acb\u5373\u200b\u5199\u5165\u200b\u76ee\u6807\u200b\u5185\u5b58\u200b\uff09\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5408\u5e76\u200b\u5199\u5165\u200b\u4e8b\u52a1\u200b</li> </ul> </li> <li>Cacheable \u200b\u5c5e\u6027\u200b\u6307\u793a\u200b\u662f\u5426\u200b\u5141\u8bb8\u200b\u5bf9\u200b\u8be5\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u8fdb\u884c\u200b\u7f13\u5b58\u200b\u3002\u200b\u5982\u679c\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u88ab\u200b\u6807\u8bb0\u200b\u4e3a\u200b\u53ef\u200b\u7f13\u5b58\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u5185\u5bb9\u200b\u7f13\u5b58\u200b\u5728\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u4ee5\u200b\u52a0\u5feb\u200b\u5bf9\u200b\u8be5\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u7684\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u3002\u200b\u8fd9\u6837\u200b\u53ef\u4ee5\u200b\u63d0\u9ad8\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6267\u884c\u200b\u6548\u7387\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5904\u7406\u5668\u200b\u53ef\u4ee5\u200b\u66f4\u5feb\u200b\u5730\u200b\u8bbf\u95ee\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u7136\u800c\u200b\uff0c\u200b\u7f13\u5b58\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u4e00\u81f4\u6027\u200b\u95ee\u9898\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5904\u7406\u5668\u200b\u53ef\u80fd\u200b\u4e0d\u4f1a\u200b\u7acb\u5373\u200b\u770b\u5230\u200b\u5bf9\u200b\u5185\u5b58\u200b\u7684\u200b\u66f4\u65b0\u200b\u3002</li> </ul> \u200b\u5185\u5b58\u200b\u7c7b\u578b\u200b Bufferable Cacheable \u200b\u5178\u578b\u200b\u5e94\u7528\u200b\u573a\u666f\u200b Strongly-ordered \u274c \u274c \u200b\u4e25\u683c\u200b\u987a\u5e8f\u200b\u8bbf\u95ee\u200b\u7684\u200b\u786c\u4ef6\u200b\uff08\u200b\u5982\u200b\u4e2d\u65ad\u200b\u63a7\u5236\u5668\u200b\uff09 Device \u2714\ufe0f \u274c \u200b\u5916\u8bbe\u200b\u5bc4\u5b58\u5668\u200b\uff08\u200b\u5982\u200bGPIO\u3001\u200b\u5b9a\u65f6\u5668\u200b\uff09 Normal \u2714\ufe0f/\u274c \u2714\ufe0f/\u274c SRAM\u3001Flash\uff08\u200b\u6839\u636e\u200b\u6027\u80fd\u9700\u6c42\u200b\u914d\u7f6e\u200b\uff09 </li> <li> <p>Write through with no write allocate\uff1a\u200b\u5728\u200b\u547d\u4e2d\u200b\uff08\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u5b58\u5728\u200b\u6240\u200b\u9700\u200b\u6570\u636e\u200b\uff09\u200b\u65f6\u200b\uff0c\u200b\u5c06\u200b\u6570\u636e\u200b\u5199\u5165\u200b\u7f13\u5b58\u200b\u548c\u200b\u4e3b\u5b58\u200b\u3002\u200b\u5728\u200b\u672a\u200b\u547d\u4e2d\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u53ea\u200b\u66f4\u65b0\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u5757\u200b\uff0c\u200b\u800c\u200b\u4e0d\u200b\u5199\u5165\u200b\u7f13\u5b58\u200b\u3002</p> </li> <li>Write-back with no write allocate\uff1a\u200b\u5f53\u200b\u5904\u7406\u5668\u200b\u6267\u884c\u200b\u5199\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u5982\u679c\u200b\u6570\u636e\u200b\u5df2\u7ecf\u200b\u5728\u200b\u7f13\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u5219\u200b\u53ea\u200b\u66f4\u65b0\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\uff0c\u200b\u800c\u200b\u4e0d\u200b\u7acb\u5373\u200b\u5199\u56de\u200b\u4e3b\u5b58\u200b\u3002\u200b\u53ea\u6709\u200b\u5728\u200b\u9700\u8981\u200b\u66ff\u6362\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u65f6\u200b\uff0c\u200b\u624d\u200b\u5c06\u200b\u6700\u65b0\u200b\u7684\u200b\u6570\u636e\u200b\u5199\u56de\u200b\u4e3b\u5b58\u200b\u3002</li> <li>Write-back with write and read allocate\uff1a\u200b\u5f53\u200b\u5904\u7406\u5668\u200b\u6267\u884c\u200b\u5199\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u5982\u679c\u200b\u6570\u636e\u200b\u5df2\u7ecf\u200b\u5728\u200b\u7f13\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u5219\u200b\u66f4\u65b0\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u5e76\u200b\u5199\u200b\u5230\u200b\u4e3b\u5b58\u200b\u3002\u200b\u5f53\u200b\u5904\u7406\u5668\u200b\u6267\u884c\u200b\u8bfb\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u6570\u636e\u200b\u5728\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u6574\u4e2a\u200b\u5757\u200b\u4ece\u200b\u4e3b\u5b58\u200b\u8bfb\u53d6\u200b\u5230\u200b\u7f13\u5b58\u200b\u4e2d\u200b</li> </ul> </li> <li> <p>SRD\uff1a\u200b\u6807\u5fd7\u200b\u7279\u5b9a\u200b\u5b50\u200b\u533a\u57df\u200b\u7684\u200b\u542f\u7528\u200b\u6216\u200b\u7981\u7528\u200b\u72b6\u6001\u200b\u3002\u200b\u5982\u679c\u200b\u7981\u7528\u200b\u4e86\u200b\u67d0\u4e2a\u200b\u5b50\u200b\u533a\u57df\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5728\u200b\u8be5\u5b50\u200b\u533a\u57df\u200b\u8303\u56f4\u200b\u5185\u200b\u7684\u200b\u8bbf\u95ee\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u5176\u4ed6\u200b\u542f\u7528\u200b\u7684\u200b\u533a\u57df\u200b\u6240\u200b\u91cd\u53e0\u200b\u8986\u76d6\u200b\u3002\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u5176\u4ed6\u200b\u542f\u7528\u200b\u7684\u200b\u533a\u57df\u200b\u4e0e\u200b\u7981\u7528\u200b\u7684\u200b\u5b50\u200b\u533a\u57df\u200b\u91cd\u53e0\u200b\uff0c\u200b\u5219\u200bMPU\u200b\u4f1a\u200b\u4ea7\u751f\u200b\u4e00\u4e2a\u200b\u9519\u8bef\u200b\uff0c\u200b\u8868\u793a\u200b\u8be5\u200b\u8bbf\u95ee\u200b\u662f\u200b\u975e\u6cd5\u200b\u7684\u200b\u6216\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u7684\u200b\u3002</p> </li> </ol> <p>\u200b\u6ce8\u610f\u4e8b\u9879\u200b\uff1a</p> <ol> <li> <p>TCM\uff08Tightly Coupled Memories\uff0c\u200b\u7d27\u200b\u8026\u5408\u200b\u5185\u5b58\u200b\uff09\u200b\u59cb\u7ec8\u200b\u88ab\u200b\u89c6\u4e3a\u200b\u4e0d\u53ef\u200b\u7f13\u5b58\u200b\u3001\u200b\u4e0d\u200b\u5171\u4eab\u200b\u7684\u200b\u666e\u901a\u200b\u5185\u5b58\u200b\uff0c\u200b\u800c\u200b\u4e0d\u7ba1\u200bMPU\u200b\u4e3a\u200bTCM\u200b\u4e2d\u200b\u7684\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4ec0\u4e48\u6837\u200b\u7684\u200b\u5185\u5b58\u200b\u7c7b\u578b\u200b\u5c5e\u6027\u200b\u3002</p> </li> <li> <p>\u200b\u5728\u200bARM Cortex-M\u200b\u7cfb\u5217\u200b\u5904\u7406\u5668\u200b\u4e2d\u200b\uff0cDMB\uff08\u200b\u6570\u636e\u200b\u5185\u5b58\u200b\u5c4f\u969c\u200b\uff09\u3001DSB\uff08\u200b\u6570\u636e\u200b\u540c\u6b65\u200b\u5c4f\u969c\u200b\uff09\u3001ISB\uff08\u200b\u6307\u4ee4\u200b\u540c\u6b65\u200b\u5c4f\u969c\u200b\uff09\u200b\u4e0e\u200bMPU\uff08\u200b\u5185\u5b58\u4fdd\u62a4\u200b\u5355\u5143\u200b\uff09\u200b\u5171\u540c\u200b\u534f\u4f5c\u200b\uff0c\u200b\u786e\u4fdd\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u3001\u200b\u987a\u5e8f\u200b\u6027\u200b\u548c\u200b\u4e00\u81f4\u6027\u200b</p> </li> </ol> \u200b\u6307\u4ee4\u200b/\u200b\u6a21\u5757\u200b \u200b\u4f5c\u7528\u200b \u200b\u4e0e\u200bMPU\u200b\u7684\u200b\u5173\u8054\u200b DMB \u200b\u4fdd\u8bc1\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u987a\u5e8f\u200b\uff0c\u200b\u4e0d\u200b\u963b\u585e\u200b\u540e\u7eed\u200b\u6307\u4ee4\u200b \u200b\u5728\u200bMPU\u200b\u533a\u57df\u200b\u5c5e\u6027\u200b\u4e3a\u200bDevice\u200b\u65f6\u200b\uff0c\u200b\u786e\u4fdd\u200b\u5199\u5165\u200b\u5bf9\u5916\u200b\u8bbe\u200b\u53ef\u89c1\u200b DSB \u200b\u5f3a\u5236\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u5b8c\u6210\u200b\u5e76\u200b\u6682\u505c\u200b\u6d41\u6c34\u7ebf\u200b MPU\u200b\u914d\u7f6e\u200b\u4fee\u6539\u200b\u540e\u200b\uff0c\u200b\u786e\u4fdd\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b\u524d\u200b\u5185\u5b58\u200b\u64cd\u4f5c\u200b\u5b8c\u6210\u200b ISB \u200b\u6e05\u7a7a\u200b\u6d41\u6c34\u7ebf\u200b\uff0c\u200b\u91cd\u65b0\u200b\u53d6\u6307\u200b MPU\u200b\u542f\u7528\u200b/\u200b\u4fee\u6539\u200b\u540e\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u540e\u7eed\u200b\u6307\u4ee4\u200b\u57fa\u4e8e\u200b\u65b0\u200b\u914d\u7f6e\u200b\u6267\u884c\u200b MPU \u200b\u5b9a\u4e49\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u7684\u200b\u6743\u9650\u200b\u4e0e\u200b\u5c5e\u6027\u200b \u200b\u4f9d\u8d56\u200b\u5c4f\u969c\u200b\u6307\u4ee4\u200b\u786e\u4fdd\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b\u548c\u200b\u8bbf\u95ee\u200b\u4e00\u81f4\u6027"},{"location":"embedded_development/#15","title":"1.5. \u200b\u534f\u5904\u7406\u5668","text":"<ol> <li>ARM\u200b\u67b6\u6784\u200b-\u200b\u534f\u5904\u7406\u5668\u200b</li> <li>\u200b\u6d45\u8c08\u200bARMv7-A\u200b\u534f\u5904\u7406\u5668\u200bCP15</li> </ol> <p>\u200b\u5728\u200bARM\u200b\u67b6\u6784\u200b\u4e2d\u200b\uff0c\u200b\u534f\u5904\u7406\u5668\u200b\uff08Co-processor\uff09\u200b\u662f\u200b\u4e00\u79cd\u200b\u6269\u5c55\u200b\u5904\u7406\u5668\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5206\u62c5\u200b\u4e3b\u200b\u5904\u7406\u5668\u200b\uff08CPU\uff09\u200b\u7684\u200b\u7279\u5b9a\u200b\u4efb\u52a1\u200b\uff0c\u200b\u63d0\u5347\u200b\u7cfb\u7edf\u200b\u6548\u7387\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5173\u4e8e\u200bARM\u200b\u534f\u5904\u7406\u5668\u200b\u7684\u200b\u8be6\u7ec6\u200b\u89e3\u6790\u200b\uff0c\u200b\u5305\u62ec\u200b\u529f\u80fd\u200b\u5206\u7c7b\u200b\u3001\u200b\u5bc4\u5b58\u5668\u200b\u8bbf\u95ee\u200b\u65b9\u6cd5\u200b\u53ca\u200b\u67b6\u6784\u200b\u6f14\u53d8\u200b\uff1a</p> <p>\u200b\u4e00\u200b\u3001\u200b\u534f\u5904\u7406\u5668\u200b\u7684\u200b\u6838\u5fc3\u4f5c\u7528\u200b</p> <ul> <li>\u200b\u529f\u80fd\u200b\u6269\u5c55\u200b\uff1a\u200b\u5904\u7406\u200b\u4e3b\u200bCPU\u200b\u4e0d\u200b\u64c5\u957f\u200b\u6216\u200b\u6548\u7387\u200b\u4f4e\u4e0b\u200b\u7684\u200b\u4efb\u52a1\u200b\uff0c\u200b\u5982\u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\uff08VFP\uff09\u3001\u200b\u56fe\u50cf\u5904\u7406\u200b\uff08NEON\uff09\u3001\u200b\u8c03\u8bd5\u200b\u63a7\u5236\u200b\uff08Debug\uff09\u3001\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\uff08MMU/Cache\uff09\u200b\u7b49\u200b\u3002</li> <li>\u200b\u6027\u80fd\u200b\u4f18\u5316\u200b\uff1a\u200b\u901a\u8fc7\u200b\u786c\u4ef6\u52a0\u901f\u200b\uff0c\u200b\u51cf\u5c11\u200b\u4e3b\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u8ba1\u7b97\u200b\u8d1f\u8f7d\u200b\uff0c\u200b\u63d0\u5347\u200b\u5b9e\u65f6\u6027\u200b\u548c\u200b\u80fd\u6548\u200b\u3002</li> <li>\u200b\u7075\u6d3b\u6027\u200b\uff1a\u200b\u5141\u8bb8\u200b\u82af\u7247\u200b\u5382\u5546\u200b\u6216\u200b\u7b2c\u4e09\u65b9\u200b\u901a\u8fc7\u200b\u81ea\u5b9a\u4e49\u200b\u534f\u5904\u7406\u5668\u200b\uff08\u200b\u5982\u200bCP0-CP7\uff09\u200b\u5b9e\u73b0\u200b\u4e13\u7528\u200b\u529f\u80fd\u200b\uff08\u200b\u52a0\u5bc6\u200b\u52a0\u901f\u200b\u3001\u200b\u4f20\u611f\u5668\u200b\u63a7\u5236\u200b\u7b49\u200b\uff09\u3002</li> </ul> <p>\u200b\u4e8c\u200b\u3001ARM32\u200b\u534f\u5904\u7406\u5668\u200b\u7684\u200b\u5206\u7c7b\u200b\u4e0e\u200b\u529f\u80fd\u200b</p> <p>ARM32\u200b\u652f\u6301\u200b 16\u200b\u4e2a\u200b\u534f\u5904\u7406\u5668\u200b\uff08cp0~cp15\uff09 \uff0c\u200b\u529f\u80fd\u200b\u5206\u914d\u200b\u5982\u4e0b\u200b\uff1a</p> \u200b\u534f\u5904\u7406\u5668\u200b \u200b\u529f\u80fd\u200b \u200b\u5178\u578b\u200b\u5e94\u7528\u200b cp15 \u200b\u7cfb\u7edf\u63a7\u5236\u200b\uff1a\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\uff08MMU\uff09\u3001\u200b\u7f13\u5b58\u200b\uff08Cache\uff09\u3001\u200b\u5185\u5b58\u4fdd\u62a4\u200b\uff08MPU\uff09\u3001\u200b\u534f\u5904\u7406\u5668\u200b\u8bbf\u95ee\u63a7\u5236\u200b\uff08CPACR\uff09 \u200b\u914d\u7f6e\u200b\u9875\u8868\u200b\u3001\u200b\u7f13\u5b58\u200b\u7b56\u7565\u200b\u3001\u200b\u6743\u9650\u200b\u7ba1\u7406\u200b cp14 \u200b\u8c03\u8bd5\u200b\u7cfb\u7edf\u200b\uff1a\u200b\u65ad\u70b9\u200b\u3001\u200b\u89c2\u5bdf\u70b9\u200b\u3001\u200b\u8ddf\u8e2a\u200b\u63a7\u5236\u200b \u200b\u8c03\u8bd5\u5668\u200b\u8fde\u63a5\u200b\u3001\u200b\u5b9e\u65f6\u200b\u8ddf\u8e2a\u200b\u4ee3\u7801\u6267\u884c\u200b cp10/cp11 \u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\uff08VFP\uff09\u3001SIMD\u200b\u6307\u4ee4\u200b\uff08NEON\uff09 3D\u200b\u6e32\u67d3\u200b\u3001\u200b\u97f3\u9891\u200b\u89e3\u7801\u200b\u3001\u200b\u79d1\u5b66\u8ba1\u7b97\u200b cp8/cp9/cp12/cp13 \u200b\u9884\u7559\u200b\u7ed9\u200bARM\u200b\u5382\u5546\u200b\u4f7f\u7528\u200b \u200b\u672a\u6765\u200b\u6269\u5c55\u200b\u6216\u200b\u4e13\u7528\u200b\u786c\u4ef6\u52a0\u901f\u200b cp0-cp7 \u200b\u9884\u7559\u200b\u7ed9\u200b\u7b2c\u4e09\u65b9\u200b\u6216\u200b\u82af\u7247\u200b\u5382\u5546\u200b\u81ea\u5b9a\u4e49\u200b \u200b\u52a0\u5bc6\u200b\u5f15\u64ce\u200b\u3001AI\u200b\u52a0\u901f\u5668\u200b\u3001\u200b\u5916\u8bbe\u200b\u63a7\u5236\u200b <p>\u200b\u4e09\u200b\u3001\u200b\u68c0\u6d4b\u200b\u534f\u5904\u7406\u5668\u200b\u5b58\u5728\u200b\u7684\u200b\u65b9\u6cd5\u200b</p> <p>\u200b\u901a\u8fc7\u200b CPACR\uff08Co-Processor Access Control Register\uff09 \u200b\u5bc4\u5b58\u5668\u200b\u53ef\u200b\u67e5\u8be2\u200b\u534f\u5904\u7406\u5668\u200b\u652f\u6301\u200b\u60c5\u51b5\u200b\uff1a</p> <ul> <li> <p>\u200b\u5bc4\u5b58\u5668\u200b\u4f4d\u57df\u200b\uff1a  </p> <ul> <li><code>CPACR[31:0]</code> \u200b\u5206\u4e3a\u200b\u591a\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u6bcf\u5b57\u6bb5\u200b\u63a7\u5236\u200b\u4e00\u4e2a\u200b\u534f\u5904\u7406\u5668\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\uff08\u200b\u5982\u200b<code>CPACR[23:20]</code>\u200b\u63a7\u5236\u200bcp11\uff0c<code>CPACR[19:16]</code>\u200b\u63a7\u5236\u200bcp10\uff09\u3002  </li> <li>\u200b\u5b57\u200b\u6bb5\u503c\u200b\u542b\u4e49\u200b\uff1a  <ul> <li><code>0b00</code>\uff1a\u200b\u7981\u6b62\u200b\u8bbf\u95ee\u200b\uff08\u200b\u534f\u5904\u7406\u5668\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u5b58\u5728\u200b\u6216\u200b\u672a\u200b\u542f\u7528\u200b\uff09\u3002  </li> <li><code>0b01</code>\uff1a\u200b\u4ec5\u200b\u7279\u6743\u200b\u6a21\u5f0f\u200b\uff08\u200b\u5982\u200b\u5185\u6838\u200b\u6001\u200b\uff09\u200b\u53ef\u200b\u8bbf\u95ee\u200b\u3002  </li> <li><code>0b11</code>\uff1a\u200b\u5168\u200b\u6a21\u5f0f\u200b\u53ef\u200b\u8bbf\u95ee\u200b\uff08\u200b\u82e5\u200b\u786c\u4ef6\u200b\u652f\u6301\u200b\uff09\u3002  </li> </ul> </li> </ul> </li> <li> <p>\u200b\u64cd\u4f5c\u200b\u793a\u4f8b\u200b\uff08ARMv7\u200b\u6c47\u7f16\u200b\uff09\uff1a </p> </li> </ul> <pre><code>; \u200b\u8bfb\u53d6\u200bCPACR\u200b\u7684\u200b\u503c\u200b\u5230\u200b\u5bc4\u5b58\u5668\u200bR0\n; \u200b\u8bed\u6cd5\u200b\uff1aMRC &lt;coproc&gt;, &lt;opc1&gt;, &lt;Rt&gt;, &lt;CRn&gt;, &lt;CRm&gt;, &lt;opc2&gt;\nMRC p15, 0, R0, c1, c0, 2   \n\n; \u200b\u68c0\u67e5\u200bcp10/cp11\u200b\u662f\u5426\u200b\u542f\u7528\u200b\uff08\u200b\u4f8b\u5982\u200bVFP/NEON\u200b\u652f\u6301\u200b\uff09\nTST R0, #(0xF &lt;&lt; 20)         ; \u200b\u68c0\u67e5\u200bcp10\uff08\u200b\u4f4d\u200b19:16\uff09\u200b\u548c\u200bcp11\uff08\u200b\u4f4d\u200b23:20\uff09\nBNE vfp_neon_supported       ; \u200b\u82e5\u4e0d\u4e3a\u200b0\uff0c\u200b\u8868\u793a\u200b\u534f\u5904\u7406\u5668\u200b\u5b58\u5728\u200b\u4e14\u200b\u53ef\u200b\u8bbf\u95ee\u200b\n</code></pre> <p>\u200b\u56db\u200b\u3001ARM64\u200b\u67b6\u6784\u200b\u7684\u200b\u534f\u5904\u7406\u5668\u200b\u6f14\u53d8\u200b</p> <p>\u200b\u5728\u200bARMv8\uff08ARM64\uff09\u200b\u4e2d\u200b\uff0c\u200b\u534f\u5904\u7406\u5668\u200b\u6982\u5ff5\u200b\u88ab\u200b\u5f31\u5316\u200b\uff0c\u200b\u5176\u200b\u529f\u80fd\u200b\u4e3b\u8981\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u5b9e\u73b0\u200b\uff1a</p> <ol> <li> <p>\u200b\u7cfb\u7edf\u200b\u5bc4\u5b58\u5668\u200b\u66ff\u4ee3\u200b\uff1a</p> <ul> <li>\u200b\u539f\u200bcp15\u200b\u7684\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\u529f\u80fd\u200b\uff08\u200b\u5982\u200bTTBR0_EL1\u3001SCTLR_EL1\uff09\u200b\u6539\u4e3a\u200b\u76f4\u63a5\u200b\u901a\u8fc7\u200b\u7cfb\u7edf\u200b\u5bc4\u5b58\u5668\u200b\u8bbf\u95ee\u200b\u3002  </li> <li>\u200b\u793a\u4f8b\u200b\uff1a\u200b\u542f\u7528\u200bMMU\u200b\u4e0d\u518d\u200b\u901a\u8fc7\u200b\u534f\u5904\u7406\u5668\u200b\u6307\u4ee4\u200b\uff0c\u200b\u800c\u662f\u200b\u914d\u7f6e\u200b<code>SCTLR_EL1.M</code>\u200b\u4f4d\u200b\u3002  </li> </ul> </li> <li> <p>\u200b\u4e13\u7528\u200b\u6307\u4ee4\u96c6\u200b\u6269\u5c55\u200b\uff1a</p> <ul> <li>\u200b\u6d6e\u70b9\u200b/SIMD\uff08NEON\uff09\u200b\u6307\u4ee4\u200b\u76f4\u63a5\u200b\u96c6\u6210\u200b\u5230\u200b\u4e3b\u200b\u6307\u4ee4\u96c6\u200b\uff08\u200b\u5982\u200bARM64\u200b\u7684\u200b<code>ASIMD</code>\uff09\uff0c\u200b\u65e0\u9700\u200b\u534f\u5904\u7406\u5668\u200b\u7f16\u53f7\u200b\u3002  </li> <li>\u200b\u8c03\u8bd5\u200b\u529f\u80fd\u200b\u901a\u8fc7\u200b\u7cfb\u7edf\u200b\u5bc4\u5b58\u5668\u200b\uff08\u200b\u5982\u200b<code>DBGDTRTX_EL0</code>\uff09\u200b\u63a7\u5236\u200b\u3002  </li> </ul> </li> <li> <p>\u200b\u7b2c\u4e09\u65b9\u200b\u52a0\u901f\u200b\u63a5\u53e3\u200b\uff1a</p> <ul> <li>\u200b\u81ea\u5b9a\u4e49\u200b\u52a0\u901f\u200b\u4efb\u52a1\u200b\u66f4\u200b\u591a\u200b\u901a\u8fc7\u200b\u603b\u7ebf\u200b\u534f\u8bae\u200b\uff08\u200b\u5982\u200bAMBA ACE\uff09\u200b\u6216\u200b\u4e13\u7528\u200b\u52a0\u901f\u5668\u200b\uff08\u200b\u5982\u200bNPU\uff09\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u800c\u200b\u975e\u4f20\u7edf\u200b\u534f\u5904\u7406\u5668\u200b\u3002</li> </ul> </li> </ol> <p>\u200b\u4e94\u200b\u3001\u200b\u534f\u5904\u7406\u5668\u200b\u7684\u200b\u5b9e\u9645\u200b\u5e94\u7528\u200b\u573a\u666f\u200b</p> <ol> <li> <p>\u200b\u542f\u7528\u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\uff08ARMv7\uff09\uff1a <pre><code>// 1. \u200b\u68c0\u67e5\u200bCPACR\u200b\u662f\u5426\u200b\u5141\u8bb8\u200b\u8bbf\u95ee\u200bcp10/cp11\nuint32_t cpacr;\n__asm volatile(\"MRC p15, 0, %0, c1, c0, 2\" : \"=r\"(cpacr));\nif ((cpacr &amp; (0xF &lt;&lt; 20)) != 0) {  // cp10/cp11\u200b\u5df2\u200b\u542f\u7528\u200b\n    // 2. \u200b\u542f\u7528\u200b\u6d6e\u70b9\u200b\u5355\u5143\u200b\uff08\u200b\u4ee5\u200bCortex-M4\u200b\u4e3a\u4f8b\u200b\uff09\n    SCB-&gt;CPACR |= (0xF &lt;&lt; 20);     // \u200b\u5141\u8bb8\u200b\u5168\u200b\u6743\u9650\u200b\u8bbf\u95ee\u200b\n    __DSB();                       // \u200b\u6570\u636e\u200b\u540c\u6b65\u200b\u5c4f\u969c\u200b\n    __ISB();                       // \u200b\u6307\u4ee4\u200b\u540c\u6b65\u200b\u5c4f\u969c\u200b\n}\n</code></pre></p> </li> <li> <p>\u200b\u914d\u7f6e\u200bMMU\uff08cp15\u200b\u64cd\u4f5c\u200b\uff09\uff1a <pre><code>; \u200b\u8bbe\u7f6e\u200b\u9875\u8868\u200b\u57fa\u200b\u5730\u5740\u200b\uff08TTBR0\uff09\nLDR R0, =page_table_base\nMCR p15, 0, R0, c2, c0, 0    ; \u200b\u5199\u5165\u200bTTBR0\n\n; \u200b\u542f\u7528\u200bMMU\nMRC p15, 0, R0, c1, c0, 0    ; \u200b\u8bfb\u53d6\u200bSCTLR\nORR R0, R0, #1               ; \u200b\u8bbe\u7f6e\u200bSCTLR.M\u200b\u4f4d\u200b\nMCR p15, 0, R0, c1, c0, 0    ; \u200b\u5199\u56de\u200bSCTLR\nDSB                          ; \u200b\u6570\u636e\u200b\u540c\u6b65\u200b\nISB                          ; \u200b\u6e05\u7a7a\u200b\u6d41\u6c34\u7ebf\u200b\n</code></pre></p> </li> </ol> <p>\u200b\u516d\u200b\u3001\u200b\u6ce8\u610f\u4e8b\u9879\u200b</p> <ol> <li>\u200b\u6743\u9650\u200b\u4e0e\u200b\u5f02\u5e38\u200b\uff1a  <ul> <li>\u200b\u672a\u200b\u542f\u7528\u200b\u534f\u5904\u7406\u5668\u200b\u65f6\u200b\u8bbf\u95ee\u200b\u5176\u200b\u6307\u4ee4\u200b\u4f1a\u200b\u89e6\u53d1\u200b \u200b\u672a\u5b9a\u4e49\u200b\u6307\u4ee4\u200b\u5f02\u5e38\u200b\uff08\u200b\u5982\u200b<code>UsageFault</code>\uff09\u3002  </li> </ul> </li> <li>\u200b\u5b9e\u65f6\u6027\u200b\u7cfb\u7edf\u200b\uff1a  <ul> <li>\u200b\u9891\u7e41\u200b\u5207\u6362\u200b\u534f\u5904\u7406\u5668\u200b\u72b6\u6001\u200b\u53ef\u80fd\u200b\u5f71\u54cd\u200b\u4e2d\u65ad\u200b\u54cd\u5e94\u200b\uff0c\u200b\u9700\u200b\u8bc4\u4f30\u200b\u5b9e\u65f6\u6027\u200b\u8981\u6c42\u200b\u3002  </li> </ul> </li> <li>ARMv7-M\u200b\u5dee\u5f02\u200b\uff1a  <ul> <li>Cortex-M\u200b\u7cfb\u5217\u200b\uff08\u200b\u5982\u200bM3/M4\uff09\u200b\u7684\u200b\u6d6e\u70b9\u200b\u5355\u5143\u200b\u53ef\u80fd\u200b\u901a\u8fc7\u200b\u72ec\u7acb\u200b\u5bc4\u5b58\u5668\u200b\uff08<code>FPCCR</code>\uff09\u200b\u63a7\u5236\u200b\uff0c\u200b\u800c\u200b\u975e\u200bcp10/cp11\u3002  </li> </ul> </li> </ol> <p>\u200b\u4e03\u200b\u3001\u200b\u603b\u7ed3\u200b</p> <p>\u200b\u534f\u5904\u7406\u5668\u200b\u5728\u200bARM32\u200b\u4e2d\u200b\u627f\u62c5\u200b\u5173\u952e\u200b\u7684\u200b\u7cfb\u7edf\u200b\u6269\u5c55\u200b\u529f\u80fd\u200b\uff0c\u200b\u901a\u8fc7\u200bCPACR\u200b\u53ef\u200b\u68c0\u6d4b\u200b\u5176\u200b\u5b58\u5728\u200b\u6027\u200b\uff0c\u200b\u800c\u200bARM64\u200b\u901a\u8fc7\u200b\u7cfb\u7edf\u200b\u5bc4\u5b58\u5668\u200b\u548c\u200b\u6307\u4ee4\u96c6\u200b\u96c6\u6210\u200b\u7b80\u5316\u200b\u4e86\u200b\u8fd9\u200b\u4e00\u200b\u8bbe\u8ba1\u200b\u3002\u200b\u5408\u7406\u200b\u5229\u7528\u200b\u534f\u5904\u7406\u5668\u200b\u80fd\u200b\u663e\u8457\u200b\u63d0\u5347\u200b\u7279\u5b9a\u200b\u4efb\u52a1\u200b\u6027\u80fd\u200b\uff0c\u200b\u4f46\u200b\u9700\u200b\u7ed3\u5408\u200b\u67b6\u6784\u200b\u5dee\u5f02\u200b\u548c\u200b\u786c\u4ef6\u200b\u652f\u6301\u200b\u8fdb\u884c\u200b\u9002\u914d\u200b\u3002</p>"},{"location":"embedded_development/#151-fpu","title":"1.5.1. FPU","text":"<pre><code>// \u200b\u5305\u542b\u200b\u5fc5\u8981\u200b\u7684\u200b\u5934\u6587\u4ef6\u200b\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n// \u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u7528\u4e8e\u200b\u6267\u884c\u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\nfloat calculate(float a, float b) {\n    return a * a + b * b; // \u200b\u4f7f\u7528\u200b\u6d6e\u70b9\u6570\u200b\u8fdb\u884c\u200b\u8ba1\u7b97\u200b\n}\n\nint main() {\n    float result;\n    float input1 = 3.5f;\n    float input2 = 2.0f;\n\n    // \u200b\u542f\u7528\u200bFPU\uff08\u200b\u5177\u4f53\u64cd\u4f5c\u200b\u53ef\u80fd\u200b\u56e0\u200b\u5904\u7406\u5668\u200b\u578b\u53f7\u200b\u800c\u5f02\u200b\uff09\n    // \u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\uff0c\u200b\u5b9e\u9645\u64cd\u4f5c\u200b\u53ef\u80fd\u200b\u56e0\u200b\u5904\u7406\u5668\u200b\u578b\u53f7\u200b\u4e0d\u540c\u200b\u800c\u200b\u6709\u6240\u200b\u5dee\u5f02\u200b\n\n    // CMSIS\u200b\u5e93\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff1a\n    // \u200b\u8bbe\u7f6e\u200bCP10\u200b\u548c\u200bCP11\u200b\u4f7f\u80fd\u200b\u4e3a\u200bfull access\n    SCB-&gt;CPACR |= ((3UL &lt;&lt; 10*2)|(3UL &lt;&lt; 11*2));  \n\n    // \u200b\u8c03\u7528\u200b\u6267\u884c\u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\u7684\u200b\u51fd\u6570\u200b\n    result = calculate(input1, input2);\n\n    // \u200b\u6253\u5370\u200b\u7ed3\u679c\u200b\n    printf(\"Result: %f\\n\", result);\n\n    return 0;\n}\n</code></pre> <p>\u200b\u5728\u200b\u8be5\u200b\u793a\u4f8b\u200b\u4e2d\u200b\uff0c\u200b\u4f7f\u7528\u200b\u4e86\u200bCMSIS\u200b\u5e93\u200b\u7684\u200b\u65b9\u5f0f\u200b\u6765\u200b\u542f\u7528\u200bFPU\u3002\u200b\u901a\u8fc7\u200b\u8bbe\u7f6e\u200b SCB\uff08System Control Block\uff09\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b CPACR\uff08Coprocessor Access Control Register\uff09\u200b\u4f4d\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u80fd\u200bFPU\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u3002</p> <p>\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u5177\u4f53\u200b\u7684\u200b\u64cd\u4f5c\u200b\u53ef\u80fd\u200b\u56e0\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u578b\u53f7\u200b\u800c\u200b\u6709\u6240\u200b\u5dee\u5f02\u200b\u3002\u200b\u5efa\u8bae\u200b\u53c2\u8003\u200b\u76f8\u5173\u200b\u7684\u200bARM Cortex-M\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u6280\u672f\u200b\u6587\u6863\u200b\u6216\u200b\u53c2\u8003\u624b\u518c\u200b\uff0c\u200b\u4ee5\u200b\u83b7\u53d6\u200b\u51c6\u786e\u200b\u7684\u200b\u542f\u7528\u200bFPU\u200b\u7684\u200b\u65b9\u6cd5\u200b\u548c\u200b\u8be6\u7ec6\u200b\u8bf4\u660e\u200b\u3002</p>"},{"location":"embedded_development/#2","title":"2. \u200b\u5916\u8bbe","text":""},{"location":"embedded_development/#21-adc","title":"2.1. ADC","text":""},{"location":"embedded_development/#22-pwm","title":"2.2. PWM","text":""},{"location":"embedded_development/#23-iic","title":"2.3. IIC","text":"<p>Inter-Integrated Circuit\uff0c\u200b\u662f\u200b\u7531\u200b\u98de\u5229\u6d66\u516c\u53f8\u200b\u5f00\u53d1\u200b\u51fa\u6765\u200b\u7684\u200b\u4e00\u79cd\u200b\u4e32\u884c\u603b\u7ebf\u200b\u534f\u8bae\u200b\uff0c\u200b\u5b83\u200b\u662f\u200b\u4e00\u79cd\u200b\u591a\u200b\u4e3b\u673a\u200b\u7684\u200b\u603b\u7ebf\u200b\uff0c\u200b\u5f53\u200b\u53d1\u751f\u200b\u4e3b\u673a\u200b\u7ade\u4e89\u200b\u65f6\u200b\uff0c\u200b\u6709\u200b\u603b\u7ebf\u200b\u4ef2\u88c1\u200b\u673a\u5236\u200b\u3002</p> <p>IIC\u200b\u603b\u7ebf\u200b\u53ea\u6709\u200b2\u200b\u6839\u200b\u4fe1\u53f7\u7ebf\u200b\uff0c\u200b\u4e00\u6839\u200b\u662f\u200b\u6570\u636e\u7ebf\u200bSDA\uff0c\u200b\u4e00\u6839\u200b\u662f\u200b\u65f6\u949f\u200b\u7ebf\u200bSCL\u3002SDA\u200b\u548c\u200bSCL\u200b\u5747\u200b\u4e3a\u200b\u53cc\u5411\u200b\u4fe1\u53f7\u7ebf\u200b\uff0c\u200b\u901a\u8fc7\u200b\u4e0a\u62c9\u200b\u7535\u963b\u200b\u63a5\u6b63\u200b\u7535\u6e90\u200b\u3002\u200b\u5f53\u200b\u603b\u7ebf\u200b\u7a7a\u95f2\u200b\u65f6\u200b\uff0c\u200b\u4e24\u6839\u200b\u7ebf\u200b\u90fd\u200b\u662f\u200b<code>\u200b\u9ad8\u7535\u5e73\u200b</code>\u3002\u200b\u8fde\u63a5\u200b\u5230\u200b\u603b\u7ebf\u200b\u4e0a\u200b\u7684\u200b\u4efb\u4e00\u200b\u5668\u4ef6\u200b\uff0c<code>\u200b\u8f93\u51fa\u200b\u4f4e\u7535\u5e73\u200b\uff0c\u200b\u90fd\u200b\u5c06\u200b\u4f7f\u200b\u603b\u7ebf\u200b\u7684\u200b\u4fe1\u53f7\u200b\u53d8\u200b\u4f4e\u200b\u3002</code></p> <ul> <li>\u200b\u8fde\u63a5\u200b\u603b\u7ebf\u200b\u7684\u200b\u5668\u4ef6\u200b\u8f93\u51fa\u200b\u7ea7\u200b\u5fc5\u987b\u200b\u662f\u200b\u96c6\u7535\u6781\u200b\u6216\u6f0f\u200b\u6781\u200b\u5f00\u8def\u200b\uff0c\u200b\u4ee5\u200b\u5f62\u6210\u200b<code>\u200b\u7ebf\u200b\u4e0e\u200b</code>\u200b\u529f\u80fd\u200b</li> <li>\u200b\u6bcf\u4e2a\u200b\u5177\u6709\u200bIIC\u200b\u63a5\u53e3\u200b\u7684\u200b\u8bbe\u5907\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u4e5f\u200b\u53eb\u505a\u200b<code>\u200b\u8bbe\u5907\u200b\u5730\u5740\u200b</code></li> </ul> <p>IIC\u200b\u603b\u7ebf\u200b\u5728\u200b\u8fdb\u884c\u200b\u6570\u636e\u200b\u4f20\u9001\u200b\u65f6\u200b\uff0c<code>\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200bSCL\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u671f\u95f4\u200b\uff0c\u200b\u6570\u636e\u7ebf\u200bSDA\u200b\u4e0a\u200b\u7684\u200b\u6570\u636e\u200b\u5fc5\u987b\u200b\u4fdd\u6301\u7a33\u5b9a\u200b</code>\u3002\u200b\u53ea\u6709\u200b\u5728\u200b<code>\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\u4e3a\u200b\u4f4e\u7535\u5e73\u200b\u671f\u95f4\u200b\uff0c\u200b\u6570\u636e\u7ebf\u200b\u4e0a\u200b\u7684\u200b\u6570\u636e\u200b\u624d\u200b\u5141\u8bb8\u200b\u53d8\u5316\u200b</code>\u3002</p> <p></p> <ul> <li> <p>\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200bSCL\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u671f\u95f4\u200b\uff0c\u200b\u4f20\u8f93\u6570\u636e\u200b</p> </li> <li> <p>\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200bSCL\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u671f\u95f4\u200b\uff0c\u200b\u6570\u636e\u7ebf\u200b\u4e0a\u200b\u7684\u200b\u7535\u5e73\u200b\u53d8\u5316\u200b\u8ba4\u4e3a\u200b\u662f\u200b<code>\u200b\u6570\u636e\u200b\u7684\u200b\u5f00\u59cb\u200b\u548c\u200b\u7ed3\u675f\u200b</code></p> <ul> <li>\u200b\u8d77\u59cb\u4fe1\u53f7\u200b\uff1a\u200b\u5f53\u65f6\u200b\u949f\u7ebf\u200bSCL\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u65f6\u200b\uff0c\u200b\u6570\u636e\u7ebf\u200bSDA\u200b\u7531\u9ad8\u53d8\u200b\u4f4e\u200b\u3002</li> <li> <p>\u200b\u505c\u6b62\u200b\u4fe1\u53f7\u200b\uff1a\u200b\u5f53\u65f6\u200b\u949f\u7ebf\u200bSCL\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u65f6\u200b\uff0c\u200b\u6570\u636e\u7ebf\u200bSDA\u200b\u7531\u200b\u4f4e\u200b\u53d8\u9ad8\u200b\u3002</p> </li> <li> <p></p> </li> <li> <p>\u200b\u5728\u200b\u8d77\u59cb\u4fe1\u53f7\u200b\u4ee5\u540e\u200b\uff0cIIC\u200b\u603b\u7ebf\u200b\u5c31\u200b\u88ab\u200b\u8ba4\u4e3a\u200b\u662f\u200b\u5904\u4e8e\u200b\u5fd9\u200b\u72b6\u6001\u200b\uff0c\u200b\u76f4\u5230\u200b\u505c\u6b62\u200b\u4fe1\u53f7\u200b\u4ee5\u540e\u200b\u7684\u200b\u51e0\u4e2a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\uff0cIIC\u200b\u603b\u7ebf\u200b\u624d\u200b\u88ab\u200b\u8ba4\u4e3a\u200b\u91cd\u65b0\u200b\u5904\u4e8e\u200b\u7a7a\u95f2\u200b\u72b6\u6001\u200b\u3002</p> </li> </ul> </li> </ul> <p>\u200b\u542f\u52a8\u200b\u603b\u7ebf\u200b\u540e\u200b\uff0c</p> <ol> <li>\u200b\u5fc5\u987b\u200b\u53d1\u9001\u200b\u8bbe\u5907\u200b\u5730\u5740\u200b\uff0c\u200b\u5176\u4e2d\u200b\u9ad8\u200b4\u200b\u4f4d\u662f\u200b\u5668\u4ef6\u200b\u7684\u200b\u7c7b\u578b\u200b\u8bc6\u522b\u200b\u7b26\u200b\uff08EEPROM\u200b\u7684\u200b\u8bc6\u522b\u200b\u7b26\u4e3a\u200b1010\uff09</li> <li>\u200b\u63a5\u7740\u200b3\u200b\u4f4d\u662f\u200b\u7247\u9009\u200b\u4fe1\u53f7\u200b</li> <li>\u200b\u63a5\u7740\u200b1\u200b\u4f4d\u662f\u200b\u8bfb\u5199\u200b\u63a7\u5236\u200b\u4f4d\u200b\uff0c\u200b\u8bfb\u200b\u64cd\u4f5c\u200b\u4e3a\u200b1\uff0c\u200b\u5199\u200b\u64cd\u4f5c\u200b\u4e3a\u200b0\u3002</li> <li>\u200b\u7b2c\u200b9\u200b\u4f4d\u662f\u200b\u5e94\u7b54\u200b\u4fe1\u53f7\u200b\u4f4d\u200b\uff0c\u200b\u4ee5\u200b\u786e\u5b9a\u200b\u6570\u636e\u200b\u4f20\u9001\u200b\u662f\u5426\u200b\u88ab\u200b\u5bf9\u65b9\u200b\u6536\u5230\u200b\u3002\u200b\u5e94\u7b54\u200b\u4fe1\u53f7\u200b\u7531\u200b\u63a5\u6536\u200b\u65b9\u5728\u200b\u6570\u636e\u200b\u5f00\u59cb\u200b\u540e\u200b\u7684\u200b\u7b2c\u200b9\u200b\u4e2a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\u53d1\u9001\u200b\uff0c\u200b\u5728\u200bSCL\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u671f\u95f4\u200b\uff0c\u200b\u63a5\u6536\u200b\u65b9\u5c06\u200bSDA\u200b\u62c9\u4e3a\u200b\u4f4e\u7535\u5e73\u200b\u4ea7\u751f\u200b\u5e94\u7b54\u200b\uff0c\u200b\u7528\u6765\u200b\u7ed3\u675f\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u4f20\u8f93\u200b\u3002\u200b\u4e5f\u5c31\u662f\u8bf4\u200b\uff0c\u200b\u4e00\u5e27\u200b\u5b8c\u6574\u200b\u7684\u200b\u6570\u636e\u200b\u5171\u6709\u200b9\u200b\u4f4d\u200b\u3002<ul> <li>IIC\u200b\u603b\u7ebf\u200b\u6bcf\u6b21\u200b\u4f20\u9001\u200b\u7684\u200b\u6570\u636e\u200b\u5b57\u8282\u200b\u4e0d\u200b\u9650\u200b\uff0c\u200b\u6bcf\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u5fc5\u987b\u200b\u662f\u200b8\u200b\u4f4d\u200b\u3002\u200b\u6570\u636e\u200b\u4f20\u9001\u200b\u65f6\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5148\u9001\u200b\u6700\u9ad8\u200b\u4f4d\u200b(MSB)\uff0c\u200b\u6bcf\u4e2a\u200b\u6570\u636e\u200b\u5b57\u8282\u200b\u540e\u9762\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u786e\u8ba4\u200b\u4f4d\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200b\u5e94\u7b54\u200b(ACK)\u3002\u200b\u5171\u200b9\u200b\u4f4d\u200b\u3002</li> </ul> </li> </ol> <p></p> <ol> <li>IIC\u200b\u7684\u200b\u76f8\u5173\u200b\u95ee\u9898\u200b</li> <li>IIC\u200b\u7684\u200b\u6b7b\u9501\u200b\u95ee\u9898\u200b</li> </ol>"},{"location":"embedded_development/#24-spi","title":"2.4. SPI","text":"<ol> <li>SPI\u200b\u534f\u8bae\u200b\u8be6\u89e3\u200b</li> </ol>"},{"location":"embedded_development/#25-uart","title":"2.5. UART","text":""},{"location":"embedded_development/#26-phy","title":"2.6. PHY","text":"<ol> <li>MDIO(clause 22 \u200b\u4e0e\u200b clause 45)\u200b\u63a5\u53e3\u200b\u7b80\u4ecb\u200b</li> <li>\u200b\u65f6\u5e8f\u200b\u56fe\u200b</li> <li>\u200b\u8bfb\u200b\u5bc4\u5b58\u5668\u200b\u4e09\u79cd\u200b\u673a\u5236\u200b<ul> <li>clause 22\u200b\u76f4\u63a5\u200b\u8bfb\u200b\u5bc4\u5b58\u5668\u200b</li> <li>clause 45\u200b\u7684\u200bMMD\u200b\u5206\u9875\u200b\u673a\u5236\u200b</li> <li>\u200b\u5229\u7528\u200b\u82af\u7247\u200b\u5236\u9020\u5546\u200b\u81ea\u7531\u200b\u5b9a\u4e49\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u95f4\u63a5\u200b\u8bfb\u5199\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5982\u200b0xD\u200b\u5bc4\u5b58\u5668\u200b<ul> <li>PHY\u200b\u662f\u200b IEEE802.3 \u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u4e00\u4e2a\u200b\u6807\u51c6\u200b\u6a21\u5757\u200b\u3002PHY \u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e3a\u200b 5 \u200b\u4f4d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5bc4\u5b58\u5668\u200b\u8303\u56f4\u200b\u662f\u200b0 \u200b\u5230\u200b31 \uff0c\u200b\u6700\u591a\u200b\u6709\u200b 32 \u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u3002IEEE802.3 \u200b\u5b9a\u4e49\u200b\u4e86\u200b\u5730\u5740\u200b\u4e3a\u200b0-15 \u200b\u8fd9\u200b16\u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u529f\u80fd\u200b\uff0c\u200b\u5730\u5740\u200b16-31\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u7559\u7ed9\u200b\u82af\u7247\u200b\u5236\u9020\u5546\u200b\u81ea\u7531\u200b\u5b9a\u4e49\u200b</li> </ul> </li> </ul> </li> <li>RMII\u200b\u548c\u200bRGMII PHY\u200b\u63a5\u53e3\u200b</li> </ol> <ol> <li> <p>\u200b\u6982\u8ff0\u200b</p> <p>\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b\uff0cFPGA\u200b\u6216\u8005\u200bARM\u200b\u5c06\u200b\u4ee5\u592a\u7f51\u200b\u6570\u636e\u200b\u53d1\u9001\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\uff0cPHY\u200b\u4f1a\u200b\u5c06\u200b\u63a5\u6536\u6570\u636e\u200b\u8f6c\u6362\u6210\u200b\u6a21\u62df\u200b\u7684\u200b\u5dee\u5206\u200b\u4fe1\u53f7\u200b\u4f20\u8f93\u200b\u5230\u200bRJ45\u200b\u5ea7\u5b50\u200b\uff0c\u200b\u6700\u540e\u200b\u901a\u8fc7\u200b\u7f51\u7ebf\u200b\u4e0e\u200bCPU\u3001FPGA\u200b\u7b49\u200b\u7f51\u7ebf\u200b\u8fde\u63a5\u200b\u7684\u200b\u8bbe\u5907\u200b\u901a\u4fe1\u200b\u3002PHY\u200b\u82af\u7247\u200b\u5b9e\u73b0\u200b\u7684\u200b\u529f\u80fd\u200b\u76f8\u5f53\u4e8e\u200bOSI\u200b\u6a21\u578b\u200b\u4e2d\u200b\u7684\u200b\u7269\u7406\u5c42\u200b\u3002</p> <p></p> <ul> <li> <p>\u200b\u4e0a\u8ff0\u200b\u4ecb\u7ecd\u200b\u9002\u7528\u200b\u4e8e\u4e09\u901f\u200b\u4ee5\u592a\u7f51\u200b(10M/100M/1000M)\uff0c\u200b\u4e07\u5146\u200b\u4ee5\u592a\u7f51\u200b\u540e\u7eed\u200b\u4f1a\u200b\u8bb2\u89e3\u200b\u3002\u200b\u4ee5\u592a\u7f51\u200bPHY\u200b\u82af\u7247\u200b\u53ef\u4ee5\u200b\u8bbe\u7f6e\u200b\u4e0d\u540c\u200b\u7684\u200b\u4f20\u8f93\u901f\u7387\u200b\uff0c10M\u200b\u8fd8\u662f\u200b100M\uff0c\u200b\u5168\u53cc\u5de5\u200b\u8fd8\u662f\u200b\u534a\u53cc\u5de5\u200b\u3002</p> </li> <li> <p>\u200b\u8981\u200b\u5b9e\u73b0\u200b\u4e0a\u8ff0\u200b\u529f\u80fd\u200b\u5207\u6362\u200b\uff0c\u200b\u4e3b\u63a7\u200b\u82af\u7247\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b\u4e00\u4e2a\u200b\u63a5\u53e3\u200b\u53bb\u200b\u914d\u7f6e\u200b\u8fd9\u4e9b\u200b\u82af\u7247\u200b\u5185\u90e8\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u3002  </p> <ul> <li>\u200b\u914d\u7f6e\u200b\u8fd9\u4e9b\u200b\u5bc4\u5b58\u5668\u200b\u5f80\u5f80\u200b\u6ca1\u6709\u200b\u901f\u5ea6\u200b\u8981\u6c42\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4e32\u53e3\u200b\u5c31\u662f\u200b\u6700\u597d\u200b\u7684\u200b\u9009\u62e9\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u51cf\u5c11\u200b\u8d70\u7ebf\u200b\uff0c\u200b\u4fbf\u4e8e\u200bPCB\u200b\u5e03\u5c40\u200b\u5e03\u7ebf\u200b\u3002</li> <li>\u200b\u6444\u50cf\u5934\u200b\u82af\u7247\u200b\u5b9e\u73b0\u200b\u8fd9\u200b\u7c7b\u200b\u529f\u80fd\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200b\u7c7b\u4f3c\u200bIIC\u200b\u534f\u8bae\u200b\u7684\u200bSCCB\u200b\u4e32\u53e3\u200b\u901a\u4fe1\u534f\u8bae\u200b\uff0c\u200b\u800c\u200b\u4ee5\u592a\u7f51\u200bPHY\u200b\u82af\u7247\u200b\u662f\u200b\u901a\u8fc7\u200bMDIO\u200b\u8fd9\u79cd\u200b\u4e32\u884c\u63a5\u53e3\u200b\u5b9e\u73b0\u200b\u5185\u90e8\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u914d\u7f6e\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u4e0d\u540c\u200b\u7684\u200b\u4ee5\u592a\u7f51\u200bPHY\u200b\u5f80\u5f80\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4e0d\u540c\u200b\u7684\u200b\u63a5\u53e3\u200b\u4e0e\u200b\u4e3b\u63a7\u200b\u82af\u7247\u200b\uff08FPGA/ARM\u200b\u7b49\u200b\uff09\u200b\u4f20\u8f93\u6570\u636e\u200b\uff0c\u200b\u4ee5\u4e09\u901f\u200b\u4ee5\u592a\u7f51\u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200bMII\uff0cRMII\uff0cGMII\uff0cRGMII\u200b\u8fdb\u884c\u200b\u6570\u636e\u4f20\u8f93\u200b\u3002</p> </li> </ul> <p>\u200b\u901a\u8fc7\u200b\u4e0a\u6587\u200b\u63cf\u8ff0\u200b\uff0c\u200b\u5927\u81f4\u200b\u53ef\u4ee5\u200b\u77e5\u9053\u200b\u4ee5\u592a\u7f51\u200bPHY\u200b\u82af\u7247\u200b\u5305\u542b\u200b\u4e09\u7ec4\u200b\u6570\u636e\u7ebf\u200b</p> <ul> <li>\u200b\u4e00\u7ec4\u200b\u7528\u4e8e\u200b\u914d\u7f6e\u200b\u5176\u200b\u5185\u90e8\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u4e32\u884c\u63a5\u53e3\u200bMDIO</li> <li>\u200b\u4e00\u7ec4\u200b\u4e0e\u200bRJ45\u200b\u8fde\u63a5\u200b\u7684\u200b\u7269\u7406\u200b\u5dee\u5206\u200b\u63a5\u53e3\u200b</li> <li>\u200b\u4e00\u7ec4\u200b\u7528\u4e8e\u200b\u548c\u200b\u4e3b\u63a7\u200b\u82af\u7247\u200b\u4f20\u8f93\u6570\u636e\u200b\u7684\u200b\u5e76\u884c\u200b\u603b\u7ebf\u200b\uff0c\u200b\u53ef\u80fd\u200b\u662f\u200bMII\u3001GMII\u3001RMII\u3001GRMII\u200b\u5176\u4e2d\u200b\u4e00\u79cd\u200b\uff0c\u200b\u4e0e\u200b\u786c\u4ef6\u200b\u53ca\u200b\u5bc4\u5b58\u5668\u200b\u914d\u7f6e\u200b\u6709\u5173\u200b\u3002</li> </ul> <p>\u200b\u4e0b\u6587\u200b\u5148\u200b\u8bb2\u89e3\u200b\u4ee5\u592a\u7f51\u200bPHY\u200b\u82af\u7247\u200b\u4e0e\u200b\u4e3b\u63a7\u200b\u82af\u7247\u200b\u4e0d\u540c\u200b\u4f20\u8f93\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b\u65f6\u5e8f\u200b\uff0c\u200b\u7136\u540e\u200b\u8bb2\u89e3\u200b\u914d\u7f6e\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200bMDIO\u200b\u63a5\u53e3\u200b\u65f6\u5e8f\u200b\uff0c\u200b\u540e\u6587\u200b\u901a\u8fc7\u200b\u5bf9\u200b\u5177\u4f53\u200b\u4e3b\u63a7\u200b\u82af\u7247\u200b\u7684\u200b\u624b\u518c\u200b\uff0c\u200b\u539f\u7406\u56fe\u200b\u8bb2\u89e3\u200b\u6765\u200b\u5bf9\u7167\u200b\u8fd9\u4e9b\u200b\u63a5\u53e3\u200b\u3002</p> </li> <li> <p>MII\u200b\u63a5\u53e3\u200b</p> <p>\u200b\u8be5\u200b\u63a5\u53e3\u200b\u76f8\u5173\u200b\u4fe1\u53f7\u200b\u5982\u56fe\u6240\u793a\u200b\uff0c\u200b\u6709\u200bMII\uff08Media Independent Interface\uff09\u200b\u63a5\u53e3\u200b\u5927\u81f4\u200b\u53ef\u4ee5\u200b\u5206\u4e3a\u200b\u4e24\u7ec4\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u4e00\u7ec4\u200b\u4fe1\u53f7\u200b\u8d1f\u8d23\u200b\u53d1\u9001\u6570\u636e\u200b\u7ed9\u200bMAC\u200b\u4fa7\u200b\uff0c\u200b\u53e6\u4e00\u7ec4\u200b\u5c06\u200bMAC\u200b\u9700\u8981\u200b\u53d1\u9001\u200b\u7684\u200b\u4fe1\u53f7\u200b\u8f93\u5165\u200b\uff0c\u200b\u7136\u540e\u200b\u8f6c\u6362\u6210\u200b\u6a21\u62df\u200b\u5dee\u5206\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u7ecf\u8fc7\u200bRJ45\u200b\u63a5\u53e3\u200b\u8f93\u51fa\u200b\u3002</p> <p></p> <p>\u200b\u8be5\u200b\u63a5\u53e3\u200b\u7684\u200b\u4fe1\u53f7\u200b\u7684\u200b\u76f8\u5173\u200b\u542b\u4e49\u200b\u5982\u8868\u200b1\u200b\u6240\u793a\u200b\uff0c\u200b\u8868\u4e2d\u200b\u4fe1\u53f7\u200b\u65b9\u5411\u200b\u9488\u5bf9\u200bPHY\u200b\u82af\u7247\u200b\u6765\u8bf4\u200b\uff0cI\u200b\u8868\u793a\u200b\u8f93\u5165\u200b\uff0cO\u200b\u8868\u793a\u200b\u8f93\u51fa\u200b\u3002</p> <p>MII\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b</p> \u200b\u4fe1\u53f7\u200b \u200b\u65b9\u5411\u200b \u200b\u4f4d\u200b\u5bbd\u200b \u200b\u542b\u4e49\u200b RX_CLK O 1 \u200b\u53d1\u9001\u200b\u65f6\u949f\u200b\uff0cPHY\u200b\u82af\u7247\u200b\u4ea7\u751f\u200b\uff0c100Mbps\u200b\u65f6\u4e3a\u200b25MHz\uff0c10Mbps\u200b\u65f6\u4e3a\u200b  2.5MHz\u3002 RX_DV O 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u53d1\u9001\u200b\u7684\u200b\u6570\u636e\u200b\u6709\u6548\u200b\u3002 RX_ER O 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u53d1\u9001\u6570\u636e\u200b\u7684\u200b\u9519\u8bef\u200b\uff0c\u200b\u63a5\u6536\u7aef\u200b\u4e0d\u200b\u63a5\u53d7\u200b\u8be5\u200b\u6570\u636e\u200b\u3002 RX_D O 4 \u200b\u53d1\u9001\u200b\u6570\u636e\u603b\u7ebf\u200b\u3002 TX_CLK O 1 \u200b\u63a5\u6536\u200b\u65f6\u949f\u200b\uff0cPHY\u200b\u82af\u7247\u200b\u4ea7\u751f\u200b\uff0c\u200b\u9891\u7387\u200b\u4e0e\u200bRX_CLK\u200b\u4e00\u81f4\u200b\u3002 TX_EN I 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u63a5\u6536\u200b\u7684\u200b\u6570\u636e\u200b\u6709\u6548\u200b\u3002 TX_ER I 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u63a5\u6536\u200b\u7684\u200b\u6570\u636e\u5305\u200b\u6709\u8bef\u200b\uff0c\u200b\u4e22\u5f03\u200b\u8be5\u200b\u6570\u636e\u5305\u200b\u3002 TX_D I 4 \u200b\u63a5\u6536\u200b\u6570\u636e\u603b\u7ebf\u200b\u3002 CRS O 1 \u200b\u8f7d\u6ce2\u200b\u4fa6\u6d4b\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u540c\u6b65\u200b\u4e8e\u200b\u53c2\u8003\u200b\u65f6\u949f\u200b\uff0c\u200b\u6709\u200b\u6570\u636e\u4f20\u8f93\u200b\uff0cCRS\u200b\u5c31\u200b\u6709\u6548\u200b\uff0c\u200b\u4ec5\u200bPHY\u200b\u5728\u200b\u534a\u53cc\u5de5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u6709\u6548\u200b\u3002 COL O 1 \u200b\u51b2\u7a81\u68c0\u6d4b\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u540c\u6b65\u200b\u4e8e\u200b\u53c2\u8003\u200b\u65f6\u949f\u200b\uff0c\u200b\u4ec5\u200bPHY\u200b\u5728\u200b\u534a\u53cc\u5de5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u6709\u6548\u200b\u3002 <p>PHY\u200b\u82af\u7247\u200b\u5411\u200bMAC\u200b\u4f20\u8f93\u6570\u636e\u200b\u7684\u200b\u63a5\u53e3\u200b\u65f6\u5e8f\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0cPHY\u200b\u82af\u7247\u200b\u5728\u200bRX_CLK\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u8f93\u51fa\u200b\u6570\u636e\u200bRX_DATA\uff0c\u200b\u4e24\u4e2a\u200b\u65f6\u949f\u200b\u53d1\u9001\u200b\u4e00\u200b\u5b57\u8282\u200b\u6570\u636e\u200b\uff0c\u200b\u5148\u200b\u53d1\u9001\u200b\u4f4e\u200b\u56db\u4f4d\u200b\u6570\u636e\u200b\uff0c\u200b\u540e\u200b\u53d1\u9001\u200b\u9ad8\u200b\u56db\u4f4d\u200b\u6570\u636e\u200b\uff0c\u200b\u53d1\u9001\u6570\u636e\u200b\u65f6\u200bRX_DV\u200b\u4fe1\u53f7\u200b\u62c9\u9ad8\u200b\u3002<code>MAC\u200b\u4fa7\u200b\u5728\u200b\u65f6\u949f\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u91c7\u96c6\u200bRX_DV\u200b\u548c\u200bRX_DATA\u200b\u72b6\u6001\u200b</code>\u3002</p> <p></p> <p>\u200b\u4e0b\u56fe\u200b\u662f\u200b\u8be5\u200b\u63a5\u53e3\u200bMAC\u200b\u4fa7\u53d1\u200b\u6570\u636e\u200b\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\u7684\u200b\u65f6\u5e8f\u200b\uff0c\u200b\u4f9d\u65e7\u200b\u662f\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u8f93\u51fa\u200b\u6570\u636e\u200b\uff0c\u200b\u65b9\u4fbf\u200b\u63a5\u6536\u7aef\u200b\u5728\u200b\u4e0a\u5347\u200b\u6cbf\u5bf9\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u91c7\u6837\u200b\u3002</p> <p></p> <p>MII\u200b\u63a5\u53e3\u200b\u53ea\u80fd\u200b\u5b9e\u73b0\u200b100Mbps\u300110Mbps\u200b\u901f\u7387\u200b\u7684\u200b\u6570\u636e\u4f20\u8f93\u200b\uff0c<code>\u200b\u4e0d\u80fd\u200b\u5b9e\u73b0\u200b1000Mbps</code>\u3002 \u200b\u53d1\u9001\u200b\u3001\u200b\u63a5\u6536\u200b\u7684\u200b\u6570\u636e\u7ebf\u200b\u5747\u200b\u4e3a\u200b4\u200b\u4f4d\u200b\uff0c\u200b\u5219\u200b\u6bcf\u4e2a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\u53d1\u9001\u200b\u6216\u200b\u63a5\u6536\u200b4\u200b\u4f4d\u200b\u6570\u636e\u200b\u3002</p> <ul> <li>\u200b\u5982\u679c\u200b\u8981\u200b\u5b9e\u73b0\u200b100Mbps\u200b\u901a\u4fe1\u200b\u901f\u7387\u200b\uff0c\u200b\u90a3\u4e48\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\u5c31\u200b\u5e94\u8be5\u200b\u662f\u200b25MHz\u3002</li> <li>\u200b\u5982\u679c\u200b\u8981\u200b\u5b9e\u73b0\u200b10Mbps\u200b\u901a\u4fe1\u200b\u901f\u7387\u200b\uff0c\u200b\u90a3\u4e48\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\u5c31\u200b\u5e94\u8be5\u200b\u662f\u200b2.5MHz\u3002</li> </ul> <p>\u200b\u63a5\u53e3\u200b\u7684\u200b\u65f6\u5e8f\u200b\u603b\u4f53\u200b\u6bd4\u8f83\u7b80\u5355\u200b\uff0c\u200b\u6ce8\u610f\u200b\u53d1\u9001\u200b\u3001\u200b\u63a5\u6536\u200b\u7684\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\u90fd\u200b\u662f\u200bPHY\u200b\u82af\u7247\u200b\u8f93\u51fa\u200b\u5373\u53ef\u200b\uff0cFPGA\u200b\u4e00\u822c\u200b\u4f7f\u7528\u200b\u7684\u200b\u90fd\u200b\u662f\u200b\u5343\u5146\u200b\u4ee5\u592a\u7f51\u200b\uff0c\u200b\u8981\u6c42\u200b\u8f83\u200b\u9ad8\u65f6\u200b\uff0c\u200b\u4f7f\u7528\u200b\u4e07\u5146\u7f51\u200b\uff0c\u200b\u6240\u4ee5\u200bMII\u200b\u63a5\u53e3\u200b\u5728\u200bFPGA\u200b\u4e2d\u200b\u4e0d\u662f\u200b\u5f88\u200b\u5e38\u89c1\u200b\uff0c\u200b\u5728\u200bARM\u200b\u4e2d\u200b\u66f4\u200b\u5e38\u89c1\u200b\u3002</p> </li> <li> <p>RMII\u200b\u63a5\u53e3\u200b</p> <p>RMII\uff08Reduced Media Independent Interface\uff09\u200b\u63a5\u53e3\u200b\u5176\u5b9e\u200b\u5c31\u662f\u200bMII\u200b\u63a5\u53e3\u200b\u7684\u200b\u7b80\u5316\u200b\u7248\u672c\u200b\uff0c\u200b\u5c06\u200bTX_CLK\u200b\u548c\u200bRX_CLK\u200b\u5408\u5e76\u200b\u4e3a\u200b\u53cc\u5411\u200b\u65f6\u949f\u200b\u7ebf\u200bREF_CLK\uff0c\u200b\u7531\u200b\u5916\u90e8\u200b\u7684\u200b\u6676\u632f\u200b\u540c\u65f6\u200b\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\u548c\u200bMAC\u200b\u4e3b\u63a7\u200b\u82af\u7247\u200b\u63d0\u4f9b\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\u3002\u200b\u5c06\u200b4\u200b\u4f4d\u200b\u7684\u200b\u6570\u636e\u7ebf\u200b\u7b80\u5316\u200b\u4e3a\u200b2\u200b\u4f4d\u200b\u3002\u200b\u5bf9\u5e94\u200b\u7684\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b\u5982\u56fe\u6240\u793a\u200b\u3002</p> <p></p> <p>RMII\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b</p> \u200b\u4fe1\u53f7\u200b \u200b\u65b9\u5411\u200b \u200b\u4f4d\u200b\u5bbd\u200b \u200b\u542b\u4e49\u200b REF_CLK I 1 \u200b\u53c2\u8003\u200b\u65f6\u949f\u200b\uff0c\u200b\u5916\u90e8\u200b\u6676\u632f\u200b\u4ea7\u751f\u200b\uff0c100Mbps\u200b\u65f6\u4e3a\u200b50MHz\uff0c10Mbps\u200b\u65f6\u4e3a\u200b5MHz\u3002 CRS_DV O 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u53d1\u9001\u200b\u7684\u200b\u6570\u636e\u200b\u6709\u6548\u200b\u3002 RX_ER O 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u53d1\u9001\u6570\u636e\u200b\u7684\u200b\u9519\u8bef\u200b\uff0c\u200b\u63a5\u6536\u7aef\u200b\u4e0d\u200b\u63a5\u53d7\u200b\u8be5\u200b\u6570\u636e\u200b\u3002 RX_D O 2 \u200b\u53d1\u9001\u200b\u6570\u636e\u603b\u7ebf\u200b\u3002 TX_EN I 1 \u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u63a5\u6536\u200b\u7684\u200b\u6570\u636e\u200b\u6709\u6548\u200b\u3002 TX_D I 2 \u200b\u63a5\u6536\u200b\u6570\u636e\u603b\u7ebf\u200b\u3002 <p>RMII\u200b\u5c06\u200b\u53d1\u9001\u200b\u65f6\u949f\u200b\u3001\u200b\u63a5\u6536\u200b\u65f6\u949f\u200b\u5408\u5e76\u200b\u4e3a\u200b\u53c2\u8003\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u628a\u200b4\u200b\u4f4d\u200b\u7684\u200b\u6570\u636e\u7ebf\u200b\u7b80\u5316\u200b\u4e3a\u200b2\u200b\u4f4d\u200b\u6570\u636e\u7ebf\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7b80\u5316\u200bPCB\u200b\u5e03\u5c40\u200b\u5e03\u7ebf\u200b\u3002</p> <p>RMII\u200b\u540c\u6837\u200b\u53ea\u80fd\u200b\u5b9e\u73b0\u200b100Mbps\u200b\u548c\u200b10Mbps</p> <ul> <li>\u200b\u5f53\u4ee5\u200b100Mbps\u200b\u901f\u7387\u200b\u4f20\u8f93\u6570\u636e\u200b\u65f6\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u65f6\u949f\u200b\u4f20\u8f93\u200b2\u200b\u4f4d\u200b\u6570\u636e\u200b\uff0c\u200b\u6b64\u65f6\u200b\u53c2\u8003\u200b\u65f6\u949f\u200b\u5e94\u8be5\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b50MHz\u3002</li> <li>\u200b\u5f53\u4ee5\u200b10Mbps\u200b\u901f\u7387\u200b\u4f20\u8f93\u6570\u636e\u200b\u65f6\u200b\uff0c\u200b\u53c2\u8003\u200b\u65f6\u949f\u200b\u5e94\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b5MHz\u3002</li> </ul> <p>RMII\u200b\u63a5\u53e3\u200b\u65f6\u5e8f\u200b\u4e0e\u200bMII\u200b\u5b8c\u5168\u4e00\u81f4\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e0d\u200b\u5728\u200b\u8d58\u8ff0\u200b\u3002</p> </li> <li> <p>GMII\u200b\u63a5\u53e3\u200b</p> <p>GMII\uff08Gigabit Media Independent Interface\uff09\u200b\u63a5\u53e3\u200b\u662f\u200b\u6bd4\u8f83\u200b\u5e38\u89c1\u200b\u7684\u200b\u5343\u5146\u200b\u7f51\u200b\u63a5\u53e3\u200b\uff0c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b\u5982\u56fe\u6240\u793a\u200b\u3002</p> <p></p> <p>\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b\u7684\u200b\u542b\u4e49\u200b\u4e0e\u200bMII\u200b\u63a5\u53e3\u200b\u4e00\u81f4\u200b\uff0c\u200b\u6b64\u5904\u200b\u5c31\u200b\u4e0d\u200b\u5728\u200b\u8d58\u8ff0\u200b\uff0c\u200b\u6ce8\u610f\u200bMII\u200b\u7684\u200b\u63a5\u6536\u200b\u65f6\u949f\u200b\u548c\u200b\u53d1\u9001\u200b\u65f6\u949f\u200b\u5747\u200b\u7531\u200bPHY\u200b\u82af\u7247\u200b\u8f93\u51fa\u200b\uff0c\u200b\u800c\u200bGMII\u200b\u7684\u200bTX_CLK\u200b\u662f\u200b\u7531\u200bMAC\u200b\u8f93\u51fa\u200b\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\u7684\u200b\u3002\u200b\u6b64\u5916\u200b\u5c31\u662f\u200b\u6570\u636e\u4f4d\u200b\u5bbd\u200b\u7531\u200bMII\u200b\u7684\u200b4\u200b\u4f4d\u200b\u53d8\u4e3a\u200b\u4e86\u200b8\u200b\u4f4d\u200b\u3002</p> <p>PHY\u200b\u82af\u7247\u200b\u53d1\u9001\u6570\u636e\u200b\u7ed9\u200bMAC\u200b\u7684\u200b\u63a5\u53e3\u200b\u65f6\u5e8f\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4e0e\u200bMII\u200b\u63a5\u53e3\u200b\u4e00\u6837\u200b\uff0cPHY\u200b\u82af\u7247\u200b\u5728\u200bRX_CLK\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u8f93\u51fa\u200b\u6570\u636e\u200b\uff0cMAC\u200b\u5728\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u91c7\u96c6\u200b\u6570\u636e\u200b\uff0c\u200b\u4f46\u662f\u200bGMII\u200b\u63a5\u53e3\u200b\u6bcf\u4e2a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\u4f20\u8f93\u200b\u4e00\u200b\u5b57\u8282\u200b\u6570\u636e\u200b\u3002</p> <p></p> <p>MAC\u200b\u53d1\u9001\u6570\u636e\u200b\u5230\u200bPHY\u200b\u82af\u7247\u200b\u7684\u200b\u63a5\u53e3\u200b\u65f6\u5e8f\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u5728\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u8f93\u51fa\u200b\u4e00\u200b\u5b57\u8282\u200b\u6570\u636e\u200b\u5373\u53ef\u200b\u3002</p> <p></p> <p>\u200b\u8be5\u200b\u63a5\u53e3\u200b\u652f\u6301\u200b1000Mbps\uff0c\u200b\u5411\u4e0b\u517c\u5bb9\u200b100Mbps\u200b\u548c\u200b10Mbps\u3002\u200b\u7531\u4e8e\u200b\u6570\u636e\u7ebf\u200b\u4f4d\u200b\u5bbd\u200b\u4e3a\u200b8\u200b\u4f4d\u200b\uff0c\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u65f6\u949f\u200b\u7684\u200b\u5355\u6cbf\u200b\u8fdb\u884c\u200b\u6570\u636e\u4f20\u8f93\u200b\u3002\u200b\u5982\u679c\u200b\u8981\u200b\u5b9e\u73b0\u200b1000Mbps\u200b\u4f20\u8f93\u901f\u7387\u200b\uff0c\u200b\u90a3\u4e48\u200b\u53d1\u9001\u200b\u548c\u200b\u63a5\u6536\u200b\u7684\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\u5e94\u8be5\u200b\u4e3a\u200b125MHz\u3002</p> </li> <li> <p>RGMII\u200b\u63a5\u53e3\u200b</p> <p>RGMII\uff08Reduced Gigabit Media Independent Interface\uff09\u200b\u63a5\u53e3\u200b\u5c31\u662f\u200b\u628a\u200bGMII\u200b\u63a5\u53e3\u200b\u7684\u200b\u6570\u636e\u7ebf\u200b\u505a\u200b\u7b80\u5316\u200b\u5904\u7406\u200b\uff0c\u200b\u4e5f\u200b\u80fd\u591f\u200b\u5b9e\u73b0\u200b\u5343\u5146\u200b\u7f51\u200b\uff0c\u200b\u63a5\u53e3\u200b\u4fe1\u53f7\u200b\u5982\u56fe\u6240\u793a\u200b\u3002</p> <p></p> <p>\u200b\u76f8\u6bd4\u200bGMII\u200b\u63a5\u53e3\u200b\uff0cRGMII\u200b\u63a5\u53e3\u200b\u7684\u200b\u6570\u636e\u7ebf\u200b\u7531\u200b8\u200b\u4f4d\u200b\u7f29\u51cf\u5230\u200b4\u200b\u4f4d\u200b\uff0cRX_DV\u200b\u4e0e\u200bRX_ER\u200b\u4fe1\u53f7\u200b\u5408\u6210\u200b\u4e3a\u200bRX_CTL\u200b\u4fe1\u53f7\u200b\u3002\u200b\u8be5\u200b\u63a5\u53e3\u200b\u5b9e\u73b0\u200b1000Mbps\u200b\u4f20\u8f93\u901f\u7387\u200b\u65f6\u200b\uff0c\u200b\u65f6\u949f\u200b\u4f9d\u65e7\u200b\u662f\u200b125MHz\uff0c\u200b\u4e0b\u56fe\u200b\u662f\u200b\u8be5\u200b\u63a5\u53e3\u200bMAC\u200b\u4fa7\u200b\u53d1\u9001\u6570\u636e\u200b\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\u7684\u200b\u65f6\u5e8f\u200b\u56fe\u200b\u3002</p> <p></p> <p>MAC\u200b\u4fa7\u200b\u5728\u200b\u65f6\u949f\u200bTX_CLK\u200b\u7684\u200b\u4e0a\u5347\u200b\u6cbf\u5c06\u200b\u9700\u8981\u200b\u53d1\u9001\u6570\u636e\u200b\u7684\u200b\u4f4e\u200b4\u200b\u4f4d\u200b\u8f93\u51fa\u200b\u5230\u200b\u6570\u636e\u7ebf\u200bTXD\uff0c\u200b\u5728\u200b\u65f6\u949f\u200bTX_CLK\u200b\u4e0b\u964d\u200b\u6cbf\u5c06\u200b\u4f20\u8f93\u6570\u636e\u200b\u7684\u200b\u9ad8\u200b4\u200b\u4f4d\u200b\u8f93\u51fa\u200b\u5230\u200b\u6570\u636e\u7ebf\u200bTXD\uff0c\u200b\u56e0\u6b64\u200b\u6bcf\u4e2a\u200b\u65f6\u949f\u200b\u4f20\u8f93\u200b1\u200b\u5b57\u8282\u200b\u6570\u636e\u200b\uff0c125MHz\u200b\u7684\u200b\u65f6\u949f\u200b\u5c31\u200b\u80fd\u200b\u5b9e\u73b0\u200b1000Mbps\u200b\u901f\u7387\u200b\u3002</p> <p>MAC\u200b\u4fa7\u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u5c06\u200bTX_CLK\u200b\u8f93\u51fa\u200b\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\u4f7f\u7528\u200b\uff0c\u200b\u56e0\u4e3a\u200bTX_CLK\u200b\u7684\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u548c\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u5bf9\u5e94\u200b\u7684\u200bTXD\u200b\u4fe1\u53f7\u200b\u90fd\u200b\u5904\u4e8e\u200b\u53d8\u5316\u200b\u9636\u6bb5\u200b\uff0c\u200b\u6b64\u65f6\u200b\u91c7\u96c6\u200b\u6570\u636e\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u9519\u200b\uff0cTX_CLK\u200b\u5468\u671f\u200b\u4e3a\u200b8ns\uff0c\u200b\u5c06\u200bTX_CLK\u200b\u5ef6\u8fdf\u200b2ns\u200b\u540e\u200b\u8f93\u51fa\u200b\u7ed9\u200bPHY\u200b\u82af\u7247\u200b\u4f5c\u4e3a\u200bTX_CLK\uff0c\u200b\u5ef6\u8fdf\u200b\u540e\u200b\u7684\u200b\u4fe1\u53f7\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u548c\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u5bf9\u5e94\u200b\u7684\u200bTXD\u200b\u5c31\u662f\u200b\u7a33\u5b9a\u200b\u7684\u200b\uff0c\u200b\u6b64\u65f6\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u7a33\u5b9a\u200b\u91c7\u96c6\u200b\u6570\u636e\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200bTX_CTL\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u8be5\u200b\u4fe1\u53f7\u200b\u5c06\u200bTX_EN\u200b\u548c\u200bTX_ER\u200b\u7ed3\u5408\u200b\uff0c\u200b\u5728\u200bTX_CLK\u200b\u4e0a\u5347\u200b\u6cbf\u200b\uff0cTX_CTL\u200b\u8f93\u51fa\u200bTX_EN\u200b\u7684\u200b\u72b6\u6001\u200b\uff0c\u200b\u9ad8\u7535\u5e73\u200b\u8868\u793a\u200b\u6570\u636e\u200b\u6709\u6548\u200b\uff0c\u200b\u5728\u200bTX_CLK\u200b\u4e0b\u964d\u200b\u6cbf\u200b\uff0c\u200b\u6b64\u65f6\u200b\u8f93\u51fa\u200bTX_EN\u200b\u5f02\u6216\u200bTX_ER\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u6240\u4ee5\u200b\u53ea\u6709\u200b\u5f53\u200bTX_CTL\u200b\u5728\u200bTX_CLK\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u548c\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u540c\u65f6\u200b\u4e3a\u200b\u9ad8\u7535\u5e73\u200b\u65f6\u200b\u6570\u636e\u200b\u624d\u200b\u662f\u200b\u6709\u6548\u200b\u7684\u200b\u3002</p> <p>RX_CLK\u200b\u540c\u7406\u200b\uff0cRX\u200b\u76f8\u5173\u200b\u7684\u200b\u65f6\u5e8f\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p>RGMII\u200b\u63a5\u53e3\u200b\u4f9d\u65e7\u200b\u53ef\u4ee5\u200b\u5b9e\u73b0\u200b100Mbps\u200b\u548c\u200b10Mbps\u200b\u901f\u7387\u200b\u4f20\u8f93\u6570\u636e\u200b\u3002</p> <ul> <li>\u200b\u5f53\u200b\u4f20\u8f93\u901f\u7387\u200b\u4e3a\u200b100Mbps\u200b\u65f6\u200b\uff0c\u200b\u6570\u636e\u4f4d\u200b\u5bbd\u4e3a\u200b4\u200b\u4f4d\u200b\uff0c\u200b\u6240\u4ee5\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\u4e3a\u200b25MHz\u200b\u5373\u53ef\u200b\u3002\u200b\u53ea\u200b\u5728\u200b\u65f6\u949f\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u8f93\u51fa\u200b\u6570\u636e\u200b\uff0c\u200b\u4f46\u662f\u200bTX_CTL\u200b\u548c\u200bRX_CTL\u200b\u4f9d\u65e7\u200b\u9700\u8981\u200b\u5728\u200b\u4e0a\u5347\u200b\u6cbf\u200b\u548c\u200b\u4e0b\u964d\u200b\u6cbf\u200b\u4f20\u8f93\u6570\u636e\u200b\u3002 </li> <li>\u200b\u5f53\u200b\u4f20\u8f93\u901f\u7387\u200b\u4e3a\u200b10Mbps\u200b\u65f6\u200b\uff0c\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\u4e3a\u200b2.5MHz\u3002</li> </ul> </li> </ol>"},{"location":"embedded_development/#27-can","title":"2.7. CAN","text":""},{"location":"embedded_development/#28-dma","title":"2.8. DMA","text":"<p>DMA\u200b\u7684\u200b\u82f1\u6587\u200b\u62fc\u5199\u200b\u662f\u200b<code>Direct Memory Access</code>\uff0c\u200b\u6c49\u8bed\u200b\u7684\u200b\u610f\u601d\u200b\u5c31\u662f\u200b\u76f4\u63a5\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u662f\u200b\u4e00\u79cd\u200b\u4e0d\u200b\u7ecf\u8fc7\u200bCPU\u200b\u800c\u200b\u76f4\u63a5\u200b\u4ece\u200b\u5185\u5b58\u200b\u5b58\u53d6\u6570\u636e\u200b\u7684\u200b\u6570\u636e\u4ea4\u6362\u200b\u6a21\u5f0f\u200b\u3002</p> <ul> <li>PIO\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u786c\u76d8\u200b\u548c\u200b\u5185\u5b58\u200b\u4e4b\u95f4\u200b\u7684\u200b\u6570\u636e\u4f20\u8f93\u200b\u662f\u200b\u7531\u200bCPU\u200b\u6765\u200b\u63a7\u5236\u200b\u7684\u200b\uff1b</li> <li>\u200b\u800c\u200b\u5728\u200bDMA\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0cCPU\u200b\u53ea\u987b\u200b\u5411\u200bDMA\u200b\u63a7\u5236\u5668\u200b\u4e0b\u8fbe\u200b\u6307\u4ee4\u200b\uff0c\u200b\u8ba9\u200bDMA\u200b\u63a7\u5236\u5668\u200b\u6765\u200b\u5904\u7406\u200b\u6570\u200b\u7684\u200b\u4f20\u9001\u200b\uff0c\u200b\u6570\u636e\u200b\u4f20\u9001\u200b\u5b8c\u6bd5\u200b\u518d\u200b\u628a\u200b\u4fe1\u606f\u53cd\u9988\u200b\u7ed9\u200bCPU\uff0c\u200b\u8fd9\u6837\u200b\u5c31\u200b\u5f88\u5927\u200b\u7a0b\u5ea6\u200b\u4e0a\u200b\u51cf\u8f7b\u200b\u4e86\u200bCPU\u200b\u8d44\u6e90\u200b\u5360\u6709\u7387\u200b\u3002</li> </ul> <p>DMA \u200b\u4f20\u9001\u200b\u65b9\u5f0f\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u9ad8\u4e8e\u200b\u7a0b\u5e8f\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u4e24\u8005\u200b\u7684\u200b\u533a\u522b\u200b\u4e3b\u8981\u200b\u8868\u73b0\u200b\u5728\u200b\u5bf9\u200bCPU\u200b\u7684\u200b\u5e72\u6270\u200b\u7a0b\u5ea6\u200b\u4e0d\u540c\u200b\u3002</p> <ul> <li>\u200b\u4e2d\u65ad\u8bf7\u6c42\u200b\u4e0d\u4f46\u200b\u4f7f\u200bCPU\u200b\u505c\u4e0b\u6765\u200b\uff0c\u200b\u800c\u4e14\u200b\u8981\u200bCPU\u200b\u6267\u884c\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\u4e3a\u200b\u4e2d\u65ad\u8bf7\u6c42\u200b\u670d\u52a1\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u8bf7\u6c42\u200b\u5305\u62ec\u200b\u4e86\u200b\u5bf9\u200b\u65ad\u70b9\u200b\u548c\u200b\u73b0\u573a\u200b\u7684\u200b\u5904\u7406\u200b\u4ee5\u53ca\u200bCPU\u200b\u4e0e\u200b\u5916\u8bbe\u200b\u7684\u200b\u4f20\u9001\u200b\uff0c\u200b\u6240\u4ee5\u200bCPU\u200b\u4ed8\u51fa\u200b\u4e86\u200b\u5f88\u591a\u200b\u7684\u200b\u4ee3\u4ef7\u200b</li> <li>DMA\u200b\u8bf7\u6c42\u200b\u4ec5\u4ec5\u200b\u4f7f\u200bCPU\u200b\u6682\u505c\u200b\u4e00\u4e0b\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u5bf9\u200b\u65ad\u70b9\u200b\u548c\u200b\u73b0\u573a\u200b\u7684\u200b\u5904\u7406\u200b\uff0c\u200b\u5e76\u4e14\u200b\u662f\u200b\u7531\u200bDMA\u200b\u63a7\u5236\u200b\u5916\u8bbe\u200b\u4e0e\u200b\u4e3b\u5b58\u200b\u4e4b\u95f4\u200b\u7684\u200b\u6570\u636e\u200b\u4f20\u9001\u200b\uff0c\u200b\u65e0\u9700\u200bCPU\u200b\u7684\u200b\u5e72\u9884\u200b\uff0cDMA\u200b\u53ea\u662f\u200b\u501f\u7528\u200b\u4e86\u200b\u4e00\u70b9\u200bCPU\u200b\u7684\u200b\u65f6\u95f4\u200b\u800c\u5df2\u200b\u3002</li> <li> <p>CPU\u200b\u5bf9\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u8bf7\u6c42\u200b\u7684\u200b\u54cd\u5e94\u200b\u65f6\u95f4\u200b\u4e0d\u540c\u200b</p> <ul> <li>\u200b\u5bf9\u200b\u4e2d\u65ad\u8bf7\u6c42\u200b\u4e00\u822c\u200b\u90fd\u200b\u5728\u200b\u6267\u884c\u200b\u5b8c\u200b<code>\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\u672b\u5c3e\u200b\u54cd\u5e94\u200b</code></li> <li>\u200b\u5bf9\u200bDMA\u200b\u7684\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u7531\u4e8e\u200b\u8003\u8651\u200b\u5b83\u200b\u7684\u200b\u9ad8\u6548\u6027\u200b\uff0cCPU\u200b\u5728\u200b\u6bcf\u6761\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u7684\u200b\u5404\u4e2a\u200b\u9636\u6bb5\u200b\u4e4b\u4e2d\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8ba9\u7ed9\u200bDMA\u200b\u4f7f\u7528\u200b\uff0c\u200b\u662f\u200b\u7acb\u5373\u200b\u54cd\u5e94\u200b</li> </ul> </li> <li> <p>FIFO\u3010DMA\u200b\u5b9e\u73b0\u200b\u539f\u7406\u200b\u62d3\u5c55\u200b\u3011</p> <ul> <li>FIFO\u200b\u5b58\u50a8\u5668\u200b\u662f\u200b\u4e00\u4e2a\u200b<code>\u200b\u5148\u5165\u200b\u5148\u51fa\u200b</code>\u200b\u7684\u200b\u53cc\u53e3\u200b\u7f13\u51b2\u5668\u200b\uff0c\u200b\u5373\u200b\u7b2c\u4e00\u4e2a\u200b\u8fdb\u5165\u200b\u5176\u5185\u200b\u7684\u200b\u6570\u636e\u200b\u7b2c\u4e00\u4e2a\u200b\u88ab\u200b\u79fb\u51fa\u200b\uff0c\u200b\u5176\u4e2d\u200b\u4e00\u4e2a\u200b\u5b58\u50a8\u5668\u200b\u7684\u200b\u8f93\u5165\u200b\u53e3\u200b\uff0c\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u53e3\u200b\u662f\u200b\u5b58\u50a8\u5668\u200b\u7684\u200b\u8f93\u51fa\u200b\u53e3\u200b\u3002\u200b\u4e3b\u8981\u200b\u6709\u200b\u4e09\u4e2a\u200b\u65b9\u9762\u200b\u7684\u200b\u4f5c\u7528\u200b\uff1a<ul> <li>\u200b\u5bf9\u200b\u8fde\u7eed\u200b\u7684\u200b\u6570\u636e\u6d41\u200b\u8fdb\u884c\u200b\u7f13\u5b58\u200b\uff0c\u200b\u9632\u6b62\u200b\u5728\u200b\u8fdb\u673a\u200b\u548c\u200b\u5b58\u50a8\u200b\u64cd\u4f5c\u200b\u65f6\u200b\u4e22\u5931\u200b\u6570\u636e\u200b</li> <li>\u200b\u6570\u636e\u200b\u96c6\u4e2d\u200b\u8d77\u6765\u200b\u8fdb\u884c\u200b\u8fdb\u673a\u200b\u548c\u200b\u5b58\u50a8\u200b\uff0c\u200b\u53ef\u200b\u907f\u514d\u200b\u9891\u7e41\u200b\u7684\u200b\u603b\u7ebf\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u51cf\u8f7b\u200bCPU\u200b\u7684\u200b\u8d1f\u62c5\u200b</li> <li>\u200b\u5141\u8bb8\u200b\u7cfb\u7edf\u200b\u8fdb\u884c\u200bDMA\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u6570\u636e\u200b\u7684\u200b\u4f20\u8f93\u901f\u5ea6\u200b<ul> <li>\u200b\u8fd9\u662f\u200b\u81f3\u5173\u91cd\u8981\u200b\u7684\u200b\u4e00\u70b9\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u91c7\u7528\u200bDMA\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u6570\u636e\u4f20\u8f93\u200b\u5c06\u200b\u8fbe\u200b\u4e0d\u5230\u200b\u4f20\u8f93\u200b\u8981\u6c42\u200b\uff0c\u200b\u800c\u4e14\u200b\u5927\u5927\u589e\u52a0\u200bCPU\u200b\u7684\u200b\u8d1f\u62c5\u200b\uff0c\u200b\u65e0\u6cd5\u200b\u540c\u65f6\u200b\u5b8c\u6210\u200b\u6570\u636e\u200b\u7684\u200b\u5b58\u50a8\u200b\u5de5\u4f5c\u200b\u3002</li> </ul> </li> </ul> </li> <li>fifo\u200b\u53cd\u538b\u200b\u673a\u5236\u200b</li> </ul> </li> </ul>"},{"location":"embedded_development/#3","title":"3. \u200b\u56fa\u4ef6\u200b&amp;\u200b\u9a71\u52a8\u200b\u5f00\u53d1","text":""},{"location":"embedded_development/#31","title":"3.1. \u200b\u7a0b\u5e8f\u200b\u70e7\u5f55","text":"<ol> <li>ICP\uff08In Circuit Programing\uff09\u200b\u5728\u200b\u7535\u8def\u200b\u7f16\u7a0b\u200b<ul> <li>\u200b\u4f7f\u7528\u200bSWD\u200b\u63a5\u53e3\u200b\u8fdb\u884c\u200b\u70e7\u5f55\u200b\uff0c\u200b\u5982\u200bJ-Link\u200b\u70e7\u5f55\u5668\u200b\u548c\u200bJ-Flash\u200b\u8f6f\u4ef6\u200b\u914d\u5408\u200b\u4f7f\u7528\u200b</li> </ul> </li> <li>ISP\uff08In System Programing\uff09\u200b\u5728\u200b\u7cfb\u7edf\u200b\u7f16\u7a0b\u200b<ul> <li>\u200b\u4f7f\u7528\u200b\u5f15\u5bfc\u200b\u7a0b\u5e8f\u200b\uff08Bootloader\uff09\u200b\u52a0\u4e0a\u200bUART/USB\u200b\u7b49\u200b\u5916\u8bbe\u200b\u8fdb\u884c\u200b\u70e7\u5f55\u200b</li> </ul> </li> <li>IAP\uff08In applicating Programing\uff09\u200b\u5728\u200b\u5e94\u7528\u200b\u7f16\u7a0b\u200b<ul> <li>\u200b\u8f6f\u4ef6\u200b\u81ea\u8eab\u200b\u5b9e\u73b0\u200b\u5728\u7ebf\u200b\u7535\u200b\u64e6\u9664\u200b\u548c\u200b\u7f16\u7a0b\u200b\u7684\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u4e0d\u200b\u4f7f\u7528\u200b\u4efb\u4f55\u200b\u5de5\u5177\u200b\u3002\u200b\u7a0b\u5e8f\u200b\u901a\u5e38\u200b\u5206\u6210\u200b\u4e24\u5757\u200b\uff0c\u200b\u5206\u522b\u200b\u4e3a\u200b\u5f15\u5bfc\u200b\u7a0b\u5e8f\u200b\u548c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b</li> </ul> </li> </ol>"},{"location":"embedded_development/#32","title":"3.2. \u200b\u521d\u59cb\u5316\u200b\u8fc7\u7a0b","text":"<p>\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b\u8fc7\u7a0b\u200b\u4e00\u822c\u200b\u5206\u4e3a\u200b 3 \u200b\u4e2a\u200b\u8fc7\u7a0b\u200b\uff0c\u200b\u81ea\u200b\u5e95\u5411\u4e0a\u200b\u3001\u200b\u4ece\u200b\u786c\u4ef6\u200b\u5230\u200b\u8f6f\u4ef6\u200b\u7684\u200b\u4f9d\u6b21\u200b\u4e3a\u200b\uff1a\u200b\u7247\u7ea7\u200b\u521d\u59cb\u5316\u200b\u3001\u200b\u677f\u7ea7\u200b\u521d\u59cb\u5316\u200b\u3001\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u521d\u59cb\u5316\u200b\u3002</p> <ol> <li> <p>\u200b\u7247\u7ea7\u200b\u521d\u59cb\u5316\u200b</p> <ul> <li>\u200b\u628a\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u4ece\u200b\u4e0a\u200b\u7535\u65f6\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u72b6\u6001\u200b\u9010\u6b65\u200b\u8bbe\u7f6e\u200b\u6210\u200b\u7cfb\u7edf\u200b\u6240\u200b\u8981\u6c42\u200b\u7684\u200b\u5de5\u4f5c\u200b\u72b6\u6001\u200b\uff0c\u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200b\u7eaf\u200b\u786c\u4ef6\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u8fc7\u7a0b\u200b\uff0c\u200b\u5b8c\u6210\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u3002<ul> <li>\u200b\u5305\u62ec\u200b\u8bbe\u7f6e\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u7684\u200b<code>\u200b\u6838\u5fc3\u200b\u5bc4\u5b58\u5668\u200b</code>\u200b\u548c\u200b<code>\u200b\u63a7\u5236\u200b\u5bc4\u5b58\u5668\u200b</code>\u3001\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u6838\u5fc3\u200b\u5de5\u4f5c\u200b\u6a21\u5f0f\u200b\u548c\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u7684\u200b\u5c40\u90e8\u200b\u603b\u7ebf\u200b\u6a21\u5f0f\u200b\u7b49\u200b\u3002</li> <li>\u200b\u4e00\u822c\u200b\u7528\u200b\u6c47\u7f16\u200b\uff0c\u200b\u8fd9\u90e8\u5206\u200b\u57fa\u672c\u200b\u82af\u7247\u200b\u539f\u5382\u200b\u4f1a\u200b\u63d0\u4f9b\u200b\u3002</li> </ul> </li> </ul> </li> <li> <p>\u200b\u677f\u7ea7\u200b\u521d\u59cb\u5316\u200b</p> <ul> <li>\u200b\u540c\u65f6\u200b\u5305\u542b\u200b\u8f6f\u786c\u4ef6\u200b\u4e24\u200b\u90e8\u5206\u200b\u5728\u5185\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u8fc7\u7a0b\u200b\uff0c<code>\u200b\u5b8c\u6210\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u4ee5\u5916\u200b\u7684\u200b\u5176\u4ed6\u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u7684\u200b\u521d\u59cb\u5316\u200b</code>\uff0c\u200b\u540c\u65f6\u200b\u8bbe\u7f6e\u200b\u67d0\u4e9b\u200b\u8f6f\u4ef6\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u548c\u200b\u53c2\u6570\u200b\uff0c\u200b\u4e3a\u200b\u968f\u540e\u200b\u7684\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u521d\u59cb\u5316\u200b\u548c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u8fd0\u884c\u200b\u5efa\u7acb\u200b\u786c\u4ef6\u200b\u548c\u200b\u8f6f\u4ef6\u200b\u73af\u5883\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b</p> <ul> <li>\u200b\u8be5\u200b\u521d\u59cb\u5316\u200b\u8fc7\u7a0b\u200b\u4ee5\u200b\u8f6f\u4ef6\u200b\u521d\u59cb\u5316\u200b\u4e3a\u4e3b\u200b\uff0c\u200b\u4e3b\u8981\u200b\u8fdb\u884c\u200b<code>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7684\u200b\u521d\u59cb\u5316\u200b</code>\u3002</li> <li>BSP\uff08Board Support Package\uff09\u200b\u5c06\u200b\u5bf9\u200b\u5d4c\u5165\u5f0f\u200b\u5fae\u5904\u7406\u5668\u200b\u7684\u200b\u63a7\u5236\u6743\u200b\u8f6c\u200b\u4ea4\u7ed9\u200b\u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u7531\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5b8c\u6210\u200b\u4f59\u4e0b\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5305\u542b\u200b\u52a0\u8f7d\u200b\u548c\u200b\u521d\u59cb\u5316\u200b\u4e0e\u200b\u786c\u4ef6\u200b\u65e0\u5173\u200b\u7684\u200b\u8bbe\u5907\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\uff0c\u200b\u5efa\u7acb\u200b\u7cfb\u7edf\u200b\u5185\u5b58\u200b\u533a\u200b\uff0c\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u521d\u59cb\u5316\u200b\u5176\u4ed6\u200b\u7cfb\u7edf\u8f6f\u4ef6\u200b\u6a21\u5757\u200b\uff0c\u200b\u5982\u200b\u7f51\u7edc\u7cfb\u7edf\u200b\u3001\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u7b49\u200b\u3002\u200b\u6700\u540e\u200b\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u521b\u5efa\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u73af\u5883\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u4ea4\u7ed9\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u5165\u53e3\u200b\u3002</li> </ul> </li> </ol>"},{"location":"embedded_development/#33","title":"3.3. \u200b\u9a71\u52a8\u200b\u5f00\u53d1","text":""},{"location":"embedded_development/#4","title":"4. \u200b\u64cd\u4f5c\u7cfb\u7edf","text":"<ol> <li>\u200b\u91ce\u706b\u200b-FreeRTOS\u200b\u5185\u6838\u200b\u5b9e\u73b0\u200b\u4e0e\u200b\u5e94\u7528\u200b\u5f00\u53d1\u200b\u5b9e\u6218\u200b\u6307\u5357\u200b</li> <li>FreeRTOS\u200b\u79fb\u690d\u200b\u53c2\u8003\u200b</li> <li>\u200b\u539f\u5b50\u200b\u6307\u4ee4\u200b</li> </ol>"},{"location":"embedded_development/#40","title":"4.0. \u200b\u5185\u6838\u200b\u5bf9\u8c61","text":"<p>FreeRTOS \u200b\u7684\u200b \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b \u200b\u662f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6838\u5fc3\u200b\u673a\u5236\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5b9e\u73b0\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u200b\u3001\u200b\u4efb\u52a1\u200b\u95f4\u901a\u4fe1\u200b\u3001\u200b\u540c\u6b65\u200b\u548c\u200b\u8d44\u6e90\u200b\u63a7\u5236\u200b\u3002\u200b\u5b83\u4eec\u200b\u662f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u8d44\u6e90\u200b\u7684\u200b\u57fa\u672c\u200b\u62bd\u8c61\u200b\uff0c\u200b\u7531\u200b\u5185\u6838\u200b\u7edf\u4e00\u200b\u7ba1\u7406\u200b\u548c\u200b\u8c03\u5ea6\u200b\u3002\u200b\u7406\u89e3\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5173\u952e\u5728\u4e8e\u200b\u4ee5\u4e0b\u51e0\u70b9\u200b\uff1a</p> <p>1. \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u672c\u8d28\u200b</p> <p>\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u662f\u200b FreeRTOS \u200b\u5185\u6838\u200b\u7ba1\u7406\u200b\u7684\u200b \u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5bf9\u8c61\u200b\u4ee3\u8868\u200b\u4e00\u79cd\u200b\u7cfb\u7edf\u8d44\u6e90\u200b\uff08\u200b\u5982\u200b\u961f\u5217\u200b\u3001\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4efb\u52a1\u200b\u7b49\u200b\uff09 \uff0c\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u5171\u540c\u200b\u7279\u6027\u200b\uff1a</p> <ul> <li>\u200b\u7c7b\u578b\u5316\u200b\uff1a\u200b\u6bcf\u4e2a\u200b\u5bf9\u8c61\u200b\u6709\u200b\u660e\u786e\u200b\u7c7b\u578b\u200b\uff08\u200b\u5982\u200b\u961f\u5217\u200b\u3001\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4efb\u52a1\u200b\u7b49\u200b\uff09\uff0c\u200b\u7c7b\u578b\u200b\u51b3\u5b9a\u200b\u4e86\u200b\u5176\u200b\u884c\u4e3a\u200b\u548c\u200b\u64cd\u4f5c\u200b\u65b9\u5f0f\u200b\u3002</li> <li>\u200b\u53e5\u67c4\u200b\u5316\u200b\uff1a\u200b\u901a\u8fc7\u200b \u200b\u53e5\u67c4\u200b\uff08Handle\uff09 \u200b\u8bbf\u95ee\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u53e5\u67c4\u200b\u662f\u200b\u4e00\u4e2a\u200b\u6307\u9488\u200b\u6216\u200b\u7d22\u5f15\u200b\uff0c\u200b\u6307\u5411\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5185\u5b58\u200b\u7ed3\u6784\u200b\u3002</li> <li>\u200b\u8d44\u6e90\u7ba1\u7406\u200b\uff1a\u200b\u5185\u6838\u200b\u8d1f\u8d23\u200b\u5bf9\u8c61\u200b\u7684\u200b\u521b\u5efa\u200b\u3001\u200b\u5220\u9664\u200b\u3001\u200b\u8c03\u5ea6\u200b\u548c\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u3002</li> <li>\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\uff1a\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u64cd\u4f5c\u200b\uff08\u200b\u5982\u200b\u53d1\u9001\u200b/\u200b\u63a5\u6536\u6570\u636e\u200b\uff09\u200b\u662f\u200b\u539f\u5b50\u200b\u7684\u200b\uff0c\u200b\u7531\u200b\u5185\u6838\u200b\u4fdd\u8bc1\u200b\u5728\u200b\u591a\u4efb\u52a1\u200b\u73af\u5883\u200b\u4e0b\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u3002</li> </ul> <p>2. \u200b\u5e38\u89c1\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7c7b\u578b\u200b</p> <p>FreeRTOS \u200b\u4e2d\u200b\u4e3b\u8981\u200b\u7684\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u5305\u62ec\u200b\uff1a</p> \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b \u200b\u529f\u80fd\u200b\u63cf\u8ff0\u200b \u200b\u4efb\u52a1\u200b\uff08Task\uff09 \u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\uff08TCB\uff09\uff0c\u200b\u5305\u542b\u200b\u4efb\u52a1\u200b\u72b6\u6001\u200b\u3001\u200b\u4f18\u5148\u7ea7\u200b\u3001\u200b\u6808\u200b\u6307\u9488\u200b\u7b49\u200b\u4fe1\u606f\u200b\u3002 \u200b\u961f\u5217\u200b\uff08Queue\uff09 \u200b\u4efb\u52a1\u200b\u95f4\u200b\u4f20\u9012\u6570\u636e\u200b\u7684\u200b\u901a\u9053\u200b\uff0c\u200b\u652f\u6301\u200b\u963b\u585e\u200b\u548c\u200b\u975e\u200b\u963b\u585e\u200b\u64cd\u4f5c\u200b\u3002 \u200b\u4fe1\u53f7\u91cf\u200b\uff08Semaphore\uff09 \u200b\u57fa\u4e8e\u200b\u961f\u5217\u200b\u5b9e\u73b0\u200b\u7684\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\uff0c\u200b\u7528\u4e8e\u200b\u8d44\u6e90\u200b\u8ba1\u6570\u200b\u6216\u200b\u4e8b\u4ef6\u200b\u901a\u77e5\u200b\u3002 \u200b\u4e92\u65a5\u200b\u91cf\u200b\uff08Mutex\uff09 \u200b\u7279\u6b8a\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u652f\u6301\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\uff0c\u200b\u7528\u4e8e\u200b\u4fdd\u62a4\u200b\u5171\u4eab\u8d44\u6e90\u200b\u3002 \u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\uff08Event Group\uff09 \u200b\u901a\u8fc7\u200b\u4f4d\u200b\u6807\u5fd7\u200b\u5b9e\u73b0\u200b\u591a\u4efb\u52a1\u200b\u4e8b\u4ef6\u200b\u540c\u6b65\u200b\uff0c\u200b\u652f\u6301\u200b\u201c\u200b\u4e0e\u200b\u201d\u200b\u548c\u200b\u201c\u200b\u6216\u200b\u201d\u200b\u89e6\u53d1\u200b\u903b\u8f91\u200b\u3002 \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\uff08Timer\uff09 \u200b\u57fa\u4e8e\u200b\u7cfb\u7edf\u200b\u65f6\u949f\u200b\u7684\u200b\u5b9a\u65f6\u5668\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5230\u671f\u200b\u540e\u200b\u89e6\u53d1\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u3002 \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\uff08Task Notification\uff09 \u200b\u8f7b\u91cf\u7ea7\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u76f4\u63a5\u200b\u5d4c\u5165\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\uff08TCB\uff09\uff0c\u200b\u7528\u4e8e\u200b\u66ff\u4ee3\u200b\u4fe1\u53f7\u91cf\u200b\u6216\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u3002 <p>3. \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u6838\u5fc3\u200b\u7ed3\u6784\u200b</p> <p>\u200b\u6240\u6709\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u5728\u200b\u5b9e\u73b0\u200b\u4e0a\u200b\u90fd\u200b\u662f\u200b \u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u7531\u200b FreeRTOS \u200b\u5185\u6838\u200b\u7edf\u4e00\u200b\u7ba1\u7406\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a</p> <p>(1) \u200b\u961f\u5217\u200b\uff08Queue\uff09\u200b\u7684\u200b\u7ed3\u6784\u200b</p> <pre><code>typedef struct QueueDefinition {\n    int8_t *pcHead;           // \u200b\u961f\u5217\u200b\u5b58\u50a8\u200b\u533a\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\n    int8_t *pcTail;           // \u200b\u961f\u5217\u200b\u5b58\u50a8\u200b\u533a\u200b\u7ed3\u675f\u200b\u5730\u5740\u200b\n    volatile UBaseType_t uxMessagesWaiting; // \u200b\u5f53\u524d\u200b\u961f\u5217\u200b\u4e2d\u200b\u7684\u200b\u6d88\u606f\u200b\u6570\u91cf\u200b\n    UBaseType_t uxLength;     // \u200b\u961f\u5217\u200b\u6700\u5927\u200b\u957f\u5ea6\u200b\uff08\u200b\u6d88\u606f\u200b\u6570\u91cf\u200b\uff09\n    UBaseType_t uxItemSize;   // \u200b\u6bcf\u4e2a\u200b\u6d88\u606f\u200b\u7684\u200b\u5927\u5c0f\u200b\uff08\u200b\u5b57\u8282\u200b\uff09\n    // ... \u200b\u5176\u4ed6\u200b\u540c\u6b65\u63a7\u5236\u200b\u5b57\u200b\u6bb5\u200b\uff08\u200b\u5982\u200b\u4e92\u65a5\u200b\u91cf\u200b\u3001\u200b\u963b\u585e\u200b\u4efb\u52a1\u200b\u5217\u8868\u200b\uff09\n} xQUEUE;\n</code></pre> <p>(2) \u200b\u4efb\u52a1\u200b\uff08Task\uff09\u200b\u7684\u200b\u7ed3\u6784\u200b</p> <p>\u200b\u4efb\u52a1\u200b\u5bf9\u8c61\u200b\u901a\u8fc7\u200b \u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\uff08TCB\uff09 \u200b\u8868\u793a\u200b\uff1a</p> <pre><code>typedef struct tskTaskControlBlock {\n    volatile StackType_t *pxTopOfStack;  // \u200b\u6808\u9876\u200b\u6307\u9488\u200b\n    ListItem_t xStateListItem;           // \u200b\u4efb\u52a1\u200b\u72b6\u6001\u200b\u94fe\u8868\u200b\u9879\u200b\uff08\u200b\u5c31\u7eea\u200b\u3001\u200b\u963b\u585e\u200b\u7b49\u200b\uff09\n    UBaseType_t uxPriority;              // \u200b\u4efb\u52a1\u200b\u4f18\u5148\u7ea7\u200b\n    // ... \u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\uff08\u200b\u5982\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u503c\u200b\u3001\u200b\u5c40\u90e8\u200b\u5b58\u50a8\u200b\u6307\u9488\u200b\u7b49\u200b\uff09\n} tskTCB;\n</code></pre> <p>4. \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u7ba1\u7406\u673a\u5236\u200b</p> <p>(1) \u200b\u521b\u5efa\u200b\u4e0e\u200b\u5220\u9664\u200b</p> <ul> <li>\u200b\u52a8\u6001\u521b\u5efa\u200b\uff1a\u200b\u901a\u8fc7\u200b API\uff08\u200b\u5982\u200b<code>xQueueCreate()</code>\u3001<code>xTaskCreate()</code>\uff09\u200b\u5728\u200b \u200b\u5806\u200b\u5185\u5b58\u200b \u200b\u4e2d\u200b\u52a8\u6001\u5206\u914d\u200b\u5bf9\u8c61\u200b\u3002</li> <li>\u200b\u9759\u6001\u200b\u521b\u5efa\u200b\uff1a\u200b\u901a\u8fc7\u200b\u9884\u200b\u5206\u914d\u200b\u7684\u200b\u9759\u6001\u200b\u5185\u5b58\u200b\uff08\u200b\u5982\u200b<code>xQueueCreateStatic()</code>\uff09\u200b\u521b\u5efa\u5bf9\u8c61\u200b\uff0c\u200b\u907f\u514d\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u200b\u3002</li> <li>\u200b\u5220\u9664\u200b\uff1a\u200b\u901a\u8fc7\u200b<code>vQueueDelete()</code>\u3001<code>vTaskDelete()</code>\u200b\u7b49\u200b API \u200b\u91ca\u653e\u200b\u5bf9\u8c61\u200b\u8d44\u6e90\u200b\u3002</li> </ul> <p>(2) \u200b\u5bf9\u8c61\u200b\u53e5\u67c4\u200b</p> <ul> <li>\u200b\u6bcf\u4e2a\u200b\u5bf9\u8c61\u200b\u521b\u5efa\u200b\u540e\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b \u200b\u53e5\u67c4\u200b\uff08\u200b\u5982\u200b<code>QueueHandle_t</code>\u3001<code>TaskHandle_t</code>\uff09\uff0c\u200b\u540e\u7eed\u200b\u64cd\u4f5c\u200b\u9700\u200b\u901a\u8fc7\u200b\u53e5\u67c4\u200b\u8bbf\u95ee\u200b\u5bf9\u8c61\u200b\u3002</li> <li>\u200b\u53e5\u67c4\u200b\u672c\u8d28\u200b\u662f\u200b \u200b\u6307\u9488\u200b\uff08\u200b\u6307\u5411\u200b\u5bf9\u8c61\u200b\u6570\u636e\u7ed3\u6784\u200b\uff09\u200b\u6216\u200b \u200b\u7d22\u5f15\u200b \uff08\u200b\u5728\u200b\u5185\u5b58\u200b\u6c60\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff09\u3002</li> </ul> <p>(3) \u200b\u540c\u6b65\u200b\u4e0e\u200b\u963b\u585e\u200b</p> <ul> <li>\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u64cd\u4f5c\u200b\uff08\u200b\u5982\u200b<code>xQueueSend()</code>\u3001<code>xSemaphoreTake()</code>\uff09\u200b\u53ef\u80fd\u200b\u89e6\u53d1\u200b \u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u200b\u7ba1\u7406\u200b\u4efb\u52a1\u200b\u7684\u200b\u963b\u585e\u200b\u94fe\u8868\u200b\u3002</li> <li>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5f53\u961f\u200b\u5217\u4e3a\u200b\u7a7a\u65f6\u200b\uff0c\u200b\u4efb\u52a1\u200b\u8c03\u7528\u200b<code>xQueueReceive()</code>\u200b\u4f1a\u200b\u88ab\u200b\u963b\u585e\u200b\u5e76\u200b\u6302\u5165\u200b\u961f\u5217\u200b\u7684\u200b\u963b\u585e\u200b\u94fe\u8868\u200b\uff0c\u200b\u76f4\u5230\u200b\u6709\u200b\u6570\u636e\u200b\u5230\u8fbe\u200b\u3002</li> </ul> <p>5. \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u7279\u70b9\u200b</p> <p>(1) \u200b\u8f7b\u91cf\u5316\u200b</p> <ul> <li>FreeRTOS \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u8bbe\u8ba1\u200b\u7d27\u51d1\u200b\uff0c\u200b\u907f\u514d\u200b\u5197\u4f59\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u9002\u5408\u200b\u8d44\u6e90\u200b\u53d7\u9650\u200b\u7684\u200b\u5d4c\u5165\u5f0f\u200b\u573a\u666f\u200b\u3002</li> <li>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u76f4\u63a5\u200b\u5d4c\u5165\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\uff08TCB\uff09\uff0c\u200b\u65e0\u9700\u200b\u989d\u5916\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u3002</li> </ul> <p>(2) \u200b\u57fa\u4e8e\u200b\u961f\u5217\u200b\u7684\u200b\u62bd\u8c61\u200b</p> <ul> <li>\u200b\u8bb8\u591a\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\uff08\u200b\u5982\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff09\u200b\u57fa\u4e8e\u200b\u961f\u5217\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u51cf\u5c11\u200b\u4ee3\u7801\u200b\u5197\u4f59\u200b\u3002</li> <li>\u200b\u4f8b\u5982\u200b\uff1a<ul> <li>\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\uff1a\u200b\u957f\u5ea6\u200b\u4e3a\u200b 1 \u200b\u7684\u200b\u961f\u5217\u200b\uff0c\u200b\u6570\u636e\u9879\u200b\u5927\u5c0f\u200b\u4e3a\u200b 0\u3002</li> <li>\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff1a\u200b\u5728\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\u57fa\u7840\u200b\u4e0a\u200b\u589e\u52a0\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\u903b\u8f91\u200b\u3002</li> </ul> </li> </ul> <p>(3) \u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b</p> <ul> <li>\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff08Mutex\uff09\u200b\u652f\u6301\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\uff0c\u200b\u9632\u6b62\u200b\u4f18\u5148\u7ea7\u200b\u53cd\u8f6c\u200b\u95ee\u9898\u200b\uff1a<ul> <li>\u200b\u5f53\u200b\u4f4e\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u6301\u6709\u200b\u4e92\u65a5\u200b\u91cf\u200b\u65f6\u200b\uff0c\u200b\u82e5\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u5c1d\u8bd5\u200b\u83b7\u53d6\u200b\uff0c\u200b\u4f4e\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u4f1a\u200b\u88ab\u200b\u4e34\u65f6\u200b\u63d0\u5347\u200b\u3002</li> </ul> </li> </ul> <p>6. \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u4e0e\u200b\u8d44\u6e90\u7ba1\u7406\u200b</p> <p>(1) \u200b\u5185\u5b58\u200b\u5206\u914d\u200b</p> <ul> <li>\u200b\u52a8\u6001\u521b\u5efa\u200b\u7684\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u4f7f\u7528\u200b FreeRTOS \u200b\u7684\u200b\u5806\u200b\u7ba1\u7406\u5668\u200b\uff08\u200b\u5982\u200b<code>heap_4.c</code>\uff09\u200b\u5206\u914d\u5185\u5b58\u200b\u3002</li> <li>\u200b\u9759\u6001\u200b\u521b\u5efa\u200b\u9700\u200b\u7528\u6237\u200b\u9884\u200b\u5206\u914d\u5185\u5b58\u200b\uff0c\u200b\u589e\u5f3a\u200b\u786e\u5b9a\u6027\u200b\uff08\u200b\u9002\u5408\u200b\u786c\u200b\u5b9e\u65f6\u200b\u7cfb\u7edf\u200b\uff09\u3002</li> </ul> <p>(2) \u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b</p> <ul> <li>\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u64cd\u4f5c\u200b\u901a\u8fc7\u200b \u200b\u4e34\u754c\u200b\u533a\u200b\u4fdd\u62a4\u200b \u200b\u6216\u200b \u200b\u8c03\u5ea6\u200b\u5668\u9501\u200b \u200b\u786e\u4fdd\u200b\u539f\u5b50\u200b\u6027\u200b\u3002</li> <li>\u200b\u4f8b\u5982\u200b\uff0c<code>xQueueSend()</code>\u200b\u5728\u200b\u53d1\u9001\u6570\u636e\u200b\u65f6\u4f1a\u200b\u6682\u65f6\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\u6216\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u3002</li> </ul> <p>(3) \u200b\u5bf9\u8c61\u200b\u6240\u6709\u6743\u200b</p> <ul> <li>\u200b\u67d0\u4e9b\u200b\u5bf9\u8c61\u200b\uff08\u200b\u5982\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff09\u200b\u5177\u6709\u200b<code>\u200b\u6240\u6709\u6743\u200b</code>\u200b\u6982\u5ff5\u200b\uff1a<ul> <li>\u200b\u53ea\u6709\u200b\u83b7\u53d6\u200b\uff08Take\uff09\u200b\u4e92\u65a5\u200b\u91cf\u200b\u7684\u200b\u4efb\u52a1\u200b\u624d\u80fd\u200b\u91ca\u653e\u200b\uff08Give\uff09\u200b\u5b83\u200b\u3002</li> </ul> </li> </ul> <p>7. \u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u7684\u200b\u4f7f\u7528\u200b\u573a\u666f\u200b</p> \u200b\u5bf9\u8c61\u200b \u200b\u5178\u578b\u200b\u573a\u666f\u200b \u200b\u961f\u5217\u200b \u200b\u4efb\u52a1\u200b\u95f4\u200b\u4f20\u9012\u200b\u7ed3\u6784\u5316\u200b\u6570\u636e\u200b\uff08\u200b\u5982\u200b\u4f20\u611f\u5668\u200b\u8bfb\u6570\u200b\u3001\u200b\u63a7\u5236\u200b\u547d\u4ee4\u200b\uff09\u3002 \u200b\u4e92\u65a5\u200b\u91cf\u200b \u200b\u4fdd\u62a4\u200b\u5171\u4eab\u8d44\u6e90\u200b\uff08\u200b\u5982\u200b\u5168\u5c40\u53d8\u91cf\u200b\u3001\u200b\u5916\u8bbe\u200b\u5bc4\u5b58\u5668\u200b\uff09\u3002 \u200b\u4e8b\u4ef6\u200b\u7ec4\u200b \u200b\u591a\u4efb\u52a1\u200b\u7b49\u5f85\u200b\u591a\u4e2a\u200b\u4e8b\u4ef6\u200b\u7ec4\u5408\u200b\uff08\u200b\u5982\u200b\u201c\u200b\u7f51\u7edc\u8fde\u63a5\u200b\u6210\u529f\u200b\u4e14\u200b\u6570\u636e\u200b\u5230\u8fbe\u200b\u201d\uff09\u3002 \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b \u200b\u9ad8\u9891\u200b\u8f7b\u91cf\u7ea7\u200b\u540c\u6b65\u200b\uff08\u200b\u5982\u200b\u4ee3\u66ff\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u51cf\u5c11\u200b\u5185\u5b58\u200b\u5f00\u9500\u200b\uff09\u3002 \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b \u200b\u5468\u671f\u6027\u200b\u4efb\u52a1\u200b\u89e6\u53d1\u200b\uff08\u200b\u5982\u200b\u6bcf\u200b 100ms \u200b\u91c7\u96c6\u200b\u4e00\u6b21\u200b\u6570\u636e\u200b\uff09\u3002 <p>8. \u200b\u603b\u7ed3\u200b</p> <p>FreeRTOS \u200b\u7684\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u662f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u529f\u80fd\u200b\u7684\u200b\u6838\u5fc3\u200b\u8f7d\u4f53\u200b\uff0c\u200b\u7406\u89e3\u200b\u5176\u672c\u8d28\u200b\u9700\u200b\u5173\u6ce8\u200b\u4ee5\u4e0b\u51e0\u70b9\u200b\uff1a</p> <ol> <li>\u200b\u6570\u636e\u7ed3\u6784\u200b\uff1a\u200b\u6bcf\u4e2a\u200b\u5bf9\u8c61\u200b\u662f\u200b\u7279\u5b9a\u200b\u7c7b\u578b\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c\u200b\u7531\u200b\u5185\u6838\u200b\u7ba1\u7406\u200b\u3002</li> <li>\u200b\u53e5\u67c4\u200b\u5316\u200b\u8bbf\u95ee\u200b\uff1a\u200b\u901a\u8fc7\u200b\u53e5\u67c4\u200b\u64cd\u4f5c\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u9690\u85cf\u200b\u5e95\u5c42\u200b\u7ec6\u8282\u200b\u3002</li> <li>\u200b\u540c\u6b65\u200b\u4e0e\u200b\u963b\u585e\u200b\uff1a\u200b\u5bf9\u8c61\u200b\u64cd\u4f5c\u200b\u53ef\u80fd\u200b\u89e6\u53d1\u200b\u4efb\u52a1\u200b\u72b6\u6001\u200b\u5207\u6362\u200b\uff08\u200b\u5c31\u7eea\u200b\u3001\u200b\u963b\u585e\u200b\u7b49\u200b\uff09\u3002</li> <li>\u200b\u8d44\u6e90\u200b\u6548\u7387\u200b\uff1a\u200b\u8bbe\u8ba1\u200b\u8f7b\u91cf\u5316\u200b\uff0c\u200b\u9002\u5408\u200b\u5d4c\u5165\u5f0f\u200b\u573a\u666f\u200b\uff0c\u200b\u90e8\u5206\u200b\u5bf9\u8c61\u200b\uff08\u200b\u5982\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\uff09\u200b\u4e3a\u200b\u4f18\u5316\u200b\u6027\u80fd\u200b\u800c\u751f\u200b\u3002</li> </ol> <p>\u200b\u901a\u8fc7\u200b\u5408\u7406\u200b\u4f7f\u7528\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5f00\u53d1\u8005\u200b\u53ef\u4ee5\u200b\u6784\u5efa\u200b\u9ad8\u6548\u200b\u3001\u200b\u53ef\u9760\u200b\u7684\u200b\u591a\u4efb\u52a1\u200b\u5b9e\u65f6\u200b\u7cfb\u7edf\u200b\u3002</p>"},{"location":"embedded_development/#41","title":"4.1. \u200b\u4efb\u52a1\u8c03\u5ea6","text":"<p>\u200b\u4efb\u52a1\u8c03\u5ea6\u200b\u7684\u200b\u4f9d\u8d56\u200b\uff1a</p> <ol> <li>\u200b\u4efb\u52a1\u200b\u4f18\u5148\u7ea7\u200b\u5217\u8868\u200b\uff0c\u200b\u5373\u200b\u53cc\u5411\u200b\u5faa\u73af\u200b\u5217\u8868\u200b\uff08\u200b\u6bcf\u200b\u4e00\u4e2a\u200b\u5217\u8868\u200b\u9879\u200b\u90fd\u200b\u80fd\u200b\u7d22\u5f15\u200b\u5230\u200b\u4e00\u4e2a\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\uff09<ul> <li>\u200b\u53cc\u5411\u200b\u5faa\u73af\u200b\u5217\u8868\u200b\u53ef\u4ee5\u200b\u4fdd\u969c\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u65f6\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u4efb\u52a1\u200b\u90fd\u200b\u80fd\u200b\u8f6e\u8be2\u200b<ul> <li>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5bf9\u4e8e\u200bfreertos\u200b\u6765\u8bf4\u200b\uff0c\u200b\u5b58\u5728\u200b\u4ee5\u4e0b\u200b\u4f18\u5148\u7ea7\u200b\u5217\u8868\u200b     <pre><code>// \u200b\u53ef\u80fd\u200b\u7528\u5230\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u5217\u8868\u200b\npxReadyTasksLists[ configMAX_PRIORITIES ] // \u200b\u51c6\u5907\u200b\u8fd0\u884c\u200b\u72b6\u6001\u200b\u7684\u200b\u4efb\u52a1\u200b\npxDelayedTaskList // \u200b\u963b\u585e\u72b6\u6001\u200b\u7684\u200b\u4efb\u52a1\u200b\npxOverflowDelayedTaskList // \u200b\u963b\u585e\u72b6\u6001\u200b\u7684\u200b\u4efb\u52a1\u200b\n// \u200b\u56e0\u4e3a\u200b\u8c03\u5ea6\u200b\u5668\u6302\u200b\u8d77\u200b\uff0c\u200b\u4efb\u4f55\u200b\u88ab\u200b\u6062\u590d\u200b\uff08vTaskResume()\uff09\u200b\u6216\u200b\u65b0\u521b\u5efa\u200b\uff08xTaskCreate()\uff09\u200b\u7684\u200b\u4efb\u52a1\u200b\n// \u200b\u65e0\u6cd5\u200b\u7acb\u5373\u200b\u52a0\u5165\u200b\u5c31\u7eea\u200b\u5217\u8868\u200b\n// \u200b\u8fd9\u4e9b\u200b\u4efb\u52a1\u200b\u4f1a\u200b\u88ab\u200b\u4e34\u65f6\u200b\u6dfb\u52a0\u200b\u5230\u200bxPendingReadyList\u200b\u4e2d\u200b\uff0c\u200b\u7b49\u5f85\u200b\u8c03\u5ea6\u200b\u5668\u200b\u6062\u590d\u200b\u540e\u5904\u7406\u200b\n// \u200b\u76f4\u63a5\u200b\u64cd\u4f5c\u200b\u5c31\u7eea\u200b\u5217\u8868\u200b\u53ef\u80fd\u200b\u5bfc\u81f4\u200b\u5e76\u53d1\u200b\u95ee\u9898\u200b\uff08\u200b\u5982\u200b\u4e2d\u65ad\u200b\u4e0e\u200b\u4efb\u52a1\u200b\u540c\u65f6\u200b\u4fee\u6539\u200b\u5217\u8868\u200b\uff09\nxPendingReadyList  \nxSuspendedTaskList // \u200b\u8c03\u5ea6\u200b\u5668\u6302\u200b\u8d77\u200b\u6302\u200b\u8d77\u200b\u7684\u200b\u4efb\u52a1\u200b\uff0c\u200b\u5373\u200b\u5904\u4e8e\u200b\u6302\u200b\u8d77\u200b\u72b6\u6001\u200b\u7684\u200b\u4efb\u52a1\u200b\n</code></pre></li> <li>\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200btskTCB\u200b\u7684\u200bxStateListItem\u200b\u53d8\u91cf\u200b\u7684\u200b\u529f\u80fd\u200b\u662f\u200b \u200b\u5c06\u200b\u4efb\u52a1\u200b\u94fe\u63a5\u200b\u5230\u200b\u4e0e\u200b\u72b6\u6001\u200b\u76f8\u5173\u200b\u7684\u200b\u94fe\u8868\u200b\u4e2d\u200b\uff0c\u200b\u76f4\u63a5\u53c2\u4e0e\u200b\u8c03\u5ea6\u200b\u5668\u200b\u51b3\u7b56\u200b\uff0c\u200b\u662f\u200b\u4efb\u52a1\u200b\u72b6\u6001\u200b\u7ba1\u7406\u200b\u7684\u200b\u6838\u5fc3\u200b\uff0c<ul> <li>\u200b\u5c31\u7eea\u200b\u5217\u8868\u200b\uff08pxReadyTasksLists\uff09\uff1a\u200b\u4efb\u52a1\u200b\u5904\u4e8e\u200b\u5c31\u7eea\u200b\u72b6\u6001\u200b\uff0c\u200b\u7b49\u5f85\u200b\u8c03\u5ea6\u200b</li> <li>\u200b\u963b\u585e\u200b\u5217\u8868\u200b\uff08pxDelayedTaskList\u3001pxOverflowDelayedTaskList\uff09\uff1a\u200b\u4efb\u52a1\u200b\u56e0\u200b\u5ef6\u65f6\u200b\u6216\u200b\u7b49\u5f85\u200b\u8d44\u6e90\u200b\u800c\u200b\u6302\u200b\u8d77\u200b</li> <li>\u200b\u6302\u200b\u8d77\u200b\u5217\u8868\u200b\uff08xSuspendedTaskList\uff09\uff1a\u200b\u4efb\u52a1\u200b\u88ab\u200b\u663e\u5f0f\u200b\u6302\u200b\u8d77\u200b\uff08vTaskSuspend()\uff09</li> <li>xStateListItem\u200b\u53d8\u91cf\u200b\u53ef\u4ee5\u200b\u7d22\u5f15\u200b\u5230\u200b<code>\u200b\u5f53\u524d\u200b\u94fe\u63a5\u200b\u7684\u200b\u72b6\u6001\u200b\u94fe\u8868\u200b\u548c\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\u7684\u200b\u9996\u200b\u5730\u5740\u200b</code>\uff0c\u200b\u65b9\u4fbf\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u4ee3\u7801\u200b\u7684\u200b\u5b9e\u73b0\u200b</li> </ul> </li> <li>\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200btskTCB\u200b\u7684\u200bxEventListItem\u200b\u53d8\u91cf\u200b\u529f\u80fd\u200b \u200b\u5c06\u200b\u4efb\u52a1\u200b\u94fe\u63a5\u200b\u5230\u200b\u4e0e\u200b\u8bf8\u5982\u200b\u961f\u5217\u200b\u3001\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u3001\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u7b49\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\u56e0\u200b\u963b\u585e\u200b\u800c\u200b\u8bbe\u8ba1\u200b\u7684\u200b\u5ef6\u65f6\u200b\u94fe\u8868\u200b\u4e2d\u200b<ul> <li>\u200b\u662f\u200b\u4e8b\u4ef6\u200b\u540c\u6b65\u200b\u7684\u200b\u6865\u6881\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u4efb\u52a1\u200b\u5bf9\u200b\u590d\u6742\u200b\u4e8b\u4ef6\u200b\u6761\u4ef6\u200b\u7684\u200b\u7b49\u5f85\u200b</li> <li>xEventListItem\u200b\u53d8\u91cf\u200b\u53ef\u4ee5\u200b\u7d22\u5f15\u200b\u5230\u200b<code>\u200b\u5f53\u524d\u200b\u94fe\u63a5\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5ef6\u65f6\u200b\u94fe\u8868\u200b\u548c\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b\u7684\u200b\u9996\u200b\u5730\u5740\u200b</code>\uff0c\u200b\u65b9\u4fbf\u200b\u4e8b\u4ef6\u200b\u540c\u6b65\u200b\u4ee3\u7801\u200b\u7684\u200b\u5b9e\u73b0\u200b</li> </ul> </li> </ul> </li> <li>\u200b\u4f18\u5148\u7ea7\u200b\u8ba1\u7b97\u200b\uff08uxTopReadyPriority\uff09<ul> <li>\u200b\u786c\u4ef6\u200b\u65b9\u6cd5\u200b\u5c31\u662f\u200b\u4f7f\u7528\u200b\u5904\u7406\u5668\u200b\u81ea\u5e26\u200b\u7684\u200b\u786c\u4ef6\u200b\u6307\u4ee4\u200b\u6765\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u6bd4\u5982\u200b Cortex-M \u200b\u5904\u7406\u5668\u200b\u5c31\u200b\u5e26\u6709\u200b\u7684\u200b\u8ba1\u7b97\u200b\u524d\u5bfc\u200b0\u200b\u4e2a\u6570\u200b\u6307\u4ee4\u200b\uff1aCLZ\uff0c\u200b\u51fd\u6570\u200b\u5982\u4e0b\u200b\uff1a     <pre><code>    #define taskSELECT_HIGHEST_PRIORITY_TASK()  \\\n    {                       \\\n        UBaseType_t uxTopPriority;  \\\n                        \\\n        //\u200b\u67e5\u627e\u200b\u5305\u542b\u200b\u4efb\u52a1\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\uff0c\u200b\u4ee5\u200b\u524d\u5bfc\u200b\u96f6\u200b\u7684\u200b\u65b9\u5f0f\u200b\u67e5\u627e\u200b\n        portGET_HIGHEST_PRIORITY( uxTopPriority\uff0c uxTopReadyPriority );\n            configASSERT( listCURRENT_LIST_LENGTH( &amp;( pxReadyTasksLists[ uxTopPriority ] ) ) &gt; 0 ); \n        //\u200b\u901a\u8fc7\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u83b7\u53d6\u200b\u5c31\u7eea\u200b\u4efb\u52a1\u200b\n        listGET_OWNER_OF_NEXT_ENTRY( pxCurrentTCB\uff0c &amp;( pxReadyTasksLists[ uxTopPriority ] ) );\n    }\n</code></pre></li> <li>\u200b\u901a\u200b \u200b\u8fc7\u200b \u200b\u51fd\u200b \u200b\u6570\u200b portGET_HIGHEST_PRIORITY() \u200b\u83b7\u53d6\u200b\u5904\u4e8e\u200b\u5c31\u7eea\u200b\u6001\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\uff0cportGET_HIGHEST_PRIORITY \u200b\u672c\u8d28\u200b\u4e0a\u200b\u662f\u200b\u4e2a\u200b\u5b8f\u200b\uff0c\u200b\u5b9a\u4e49\u200b\u5982\u4e0b\u200b\uff1a     <pre><code>    #define portGET_HIGHEST_PRIORITY( uxTopPriority\uff0c uxReadyPriorities ) \n    {\n        uxTopPriority = ( 31UL - ( uint32_t ) __clz( ( uxReadyPriorities ) ) )\n    }\n</code></pre></li> <li>\u200b\u4f7f\u7528\u200b\u786c\u4ef6\u200b\u65b9\u6cd5\u200b\u7684\u200b\u65f6\u5019\u200b uxTopReadyPriority \u200b\u5c31\u200b\u4e0d\u200b\u4ee3\u8868\u200b\u5904\u4e8e\u200b\u5c31\u7eea\u200b\u6001\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4e86\u200b\uff0c\u200b\u800c\u662f\u200b\u4f7f\u7528\u200b\u6bcf\u4e2a\u200b bit \u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u4f18\u5148\u7ea7\u200b\uff0cbit0 \u200b\u4ee3\u8868\u200b\u4f18\u5148\u7ea7\u200b 0\uff0cbit31 \u200b\u5c31\u200b\u4ee3\u8868\u200b\u4f18\u5148\u7ea7\u200b 31\uff0c\u200b\u5f53\u200b\u67d0\u4e2a\u200b\u4f18\u5148\u7ea7\u200b\u6709\u200b\u5c31\u7eea\u200b\u4efb\u52a1\u200b\u7684\u8bdd\u200b\u5c31\u200b\u5c06\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b bit \u200b\u7f6e\u200b 1\u3002</li> <li>\u200b\u4ece\u200b\u8fd9\u91cc\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u770b\u51fa\u200b\uff0c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u786c\u4ef6\u200b\u65b9\u6cd5\u200b\u7684\u8bdd\u200b\u6700\u200b\u591a\u200b\u53ea\u80fd\u200b\u6709\u200b 32 \u200b\u4e2a\u200b\u4f18\u5148\u7ea7\u200b\u3002__clz(uxReadyPriorities)\u200b\u5c31\u662f\u200b\u8ba1\u7b97\u200b uxReadyPriorities\uff08unsigned long\uff09\u200b\u7684\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\uff0c\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\u5c31\u662f\u6307\u200b\u4ece\u200b\u6700\u9ad8\u200b\u4f4d\u200b\u5f00\u59cb\u200b(bit31)\u200b\u5230\u200b\u7b2c\u4e00\u4e2a\u200b\u4e3a\u200b 1 \u200b\u7684\u200b bit\uff0c\u200b\u5176\u95f4\u200b 0 \u200b\u7684\u200b\u4e2a\u6570\u200b\u3002\u200b\u5982\u4e0b\u200b\u4f8b\u5b50\u200b\uff1a\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u200b 1000 0000 0000 0000 \u200b\u7684\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\u5c31\u200b\u4e3a\u200b 0\u3002 \u200b\u4e8c\u8fdb\u5236\u200b\u6570\u200b 0000 1001 1111 0001 \u200b\u7684\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\u5c31\u662f\u200b 4\u3002</li> <li>\u200b\u5f97\u5230\u200b uxTopReadyPriority \u200b\u7684\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\u4ee5\u540e\u200b\u5728\u200b\u7528\u200b 31 \u200b\u51cf\u53bb\u200b\u8fd9\u4e2a\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\u5f97\u5230\u200b\u7684\u200b\u5c31\u662f\u200b\u5904\u4e8e\u200b\u5c31\u7eea\u200b\u6001\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4e86\u200b\uff0c\u200b\u6bd4\u5982\u200b\u4f18\u5148\u7ea7\u200b 30 \u200b\u4e3a\u200b\u6b64\u65f6\u200b\u7684\u200b\u5904\u4e8e\u200b\u5c31\u7eea\u200b\u6001\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\uff0c30 \u200b\u7684\u200b\u524d\u5bfc\u200b\u96f6\u200b\u4e2a\u6570\u200b\u4e3a\u200b 1\uff0c\u200b\u90a3\u4e48\u200b 31 - 1 = 30\uff0c\u200b\u5f97\u5230\u200b\u5904\u4e8e\u200b\u5c31\u7eea\u200b\u6001\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4e3a\u200b 30\u3002</li> </ul> </li> </ul> </li> <li>\u200b\u4efb\u52a1\u200b\u63a7\u5236\u200b\u5757\u200b</li> <li>\u200b\u4efb\u52a1\u200b\u7684\u200b\u5806\u6808\u200b\u6bb5\u200b</li> <li>\u200b\u542f\u52a8\u200b\u9996\u6b21\u200b\u4efb\u52a1\u200b\u7684\u200bSVC\u200b\u4e2d\u65ad\u200b</li> <li>PendSV\u200b\u4e2d\u65ad\u200b\uff08\u200b\u89e6\u53d1\u200b\u4e0a\u4e0b\u6587\u200b\u8f6c\u6362\u200b\uff09\u200b\u548c\u200bSYSTICK\u200b\u4e2d\u65ad\u200b\uff08\u200b\u4f1a\u200b\u95f4\u63a5\u200b\u89e6\u53d1\u200bPendSV\u200b\u4e2d\u65ad\u200b\uff09<ul> <li>CPU\u200b\u4e0a\u4e0b\u6587\u200b\u7ef4\u62a4\u200b\uff08\u200b\u5373\u200bCPU\u200b\u76f8\u5173\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u7ef4\u62a4\u200b\uff09</li> <li>\u200b\u4efb\u52a1\u200b\u4e0a\u4e0b\u6587\u200b\uff08\u200b\u4efb\u52a1\u200b\u5806\u6808\u200b\u6bb5\u200b\u7684\u200b\u7ef4\u62a4\u200b\uff09</li> <li>PendSV_Handler\u200b\u662f\u200b\u7528\u4e8e\u200b\u6bcf\u6b21\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u4e2d\u65ad\u200b\uff08\u200b\u7531\u200bSYSTICK\u200b\u4e2d\u65ad\u200b\u6216\u8005\u200b\u4efb\u52a1\u200b\u4e3b\u52a8\u200b\u89e6\u53d1\u200b\uff09</li> <li>SysTick_Handler\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5b9a\u65f6\u5668\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b</li> </ul> </li> </ol> <p>\u200b\u4efb\u52a1\u8c03\u5ea6\u200b\u5206\u914d\u200b\uff1a</p> <ul> <li>IRQ \u200b\u4efb\u52a1\u200b\uff1aIRQ \u200b\u4efb\u52a1\u200b\u662f\u200b\u6307\u200b\u901a\u8fc7\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\u8fdb\u884c\u200b\u89e6\u53d1\u200b\u7684\u200b\u4efb\u52a1\u200b\uff0c\u200b\u6b64\u7c7b\u200b\u4efb\u52a1\u200b\u5e94\u8be5\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u6240\u6709\u200b\u4efb\u52a1\u200b\u91cc\u9762\u200b\u4f18\u5148\u7ea7\u200b\u6700\u9ad8\u200b\u7684\u200b\u3002</li> <li>\u200b\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u540e\u53f0\u4efb\u52a1\u200b\uff1a\u200b\u6bd4\u5982\u200b\u6309\u952e\u200b\u68c0\u6d4b\u200b\uff0c\u200b\u89e6\u6478\u200b\u68c0\u6d4b\u200b\uff0cUSB \u200b\u6d88\u606f\u200b\u5904\u7406\u200b\uff0c\u200b\u4e32\u53e3\u200b\u6d88\u606f\u200b\u5904\u7406\u200b\u7b49\u200b\uff0c\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5f52\u4e3a\u200b\u8fd9\u200b\u4e00\u7c7b\u200b\u4efb\u52a1\u200b\u3002</li> <li>\u200b\u4f4e\u4f18\u5148\u7ea7\u200b\u7684\u200b\u65f6\u95f4\u200b\u7247\u200b\u8c03\u5ea6\u200b\u4efb\u52a1\u200b\uff1a\u200b\u6bd4\u5982\u200b\u754c\u9762\u663e\u793a\u200b\uff0cLED \u200b\u6570\u7801\u7ba1\u200b\u7684\u200b\u663e\u793a\u200b\u7b49\u200b\u4e0d\u200b\u9700\u8981\u200b\u5b9e\u65f6\u200b\u6267\u884c\u200b\u7684\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5f52\u4e3a\u200b\u8fd9\u200b\u4e00\u7c7b\u200b\u4efb\u52a1\u200b\u3002 \u200b\u5b9e\u9645\u200b\u5e94\u7528\u200b\u4e2d\u200b\u7528\u6237\u200b\u4e0d\u5fc5\u200b\u62d8\u6ce5\u4e8e\u200b\u5c06\u200b\u8fd9\u4e9b\u200b\u4efb\u52a1\u200b\u90fd\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u4f18\u5148\u7ea7\u200b 1 \u200b\u7684\u200b\u540c\u200b\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8bbe\u7f6e\u200b\u591a\u4e2a\u200b\u4f18\u5148\u7ea7\u200b\uff0c\u200b\u53ea\u200b\u9700\u6ce8\u610f\u200b\u8fd9\u200b\u7c7b\u200b\u4efb\u52a1\u200b\u4e0d\u200b\u9700\u8981\u200b\u9ad8\u200b\u5b9e\u65f6\u6027\u200b\u3002</li> <li>\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\uff1a\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u662f\u200b\u7cfb\u7edf\u200b\u4efb\u52a1\u200b\u3002</li> <li>\u200b\u7279\u522b\u200b\u6ce8\u610f\u200b\uff1aIRQ \u200b\u4efb\u52a1\u200b\u548c\u200b\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u5fc5\u987b\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u963b\u585e\u200b\u5f0f\u200b\uff0c\u200b\u53ea\u6709\u200b\u8fd9\u6837\u200b\uff0c\u200b\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u624d\u200b\u4f1a\u200b\u91ca\u653e\u200b CPU \u200b\u7684\u200b\u4f7f\u7528\u6743\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f4e\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u624d\u200b\u6709\u200b\u673a\u4f1a\u200b\u5f97\u5230\u200b\u6267\u884c\u200b\u3002</li> </ul> <p>\u200b\u53c2\u8003\u200b\u6587\u6863\u200b\uff1a</p> <ul> <li>https://zhuanlan.zhihu.com/p/554825433</li> <li>https://o2ospring.github.io/20210615/</li> <li>https://blog.csdn.net/weixin_55672545/article/details/130453893</li> </ul>"},{"location":"embedded_development/#42","title":"4.2. \u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u3001\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e92\u65a5\u200b\u91cf\u200b\u3001\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u3001\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u548c\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5173\u7cfb","text":"<p>FreeRTOS \u200b\u4e2d\u200b\u7684\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u3001\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e92\u65a5\u200b\u91cf\u200b\u3001\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u3001\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u548c\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u662f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u63d0\u4f9b\u200b\u7684\u200b\u591a\u79cd\u200b\u6838\u5fc3\u200b\u673a\u5236\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5b9e\u73b0\u200b\u4efb\u52a1\u200b\u95f4\u901a\u4fe1\u200b\u3001\u200b\u540c\u6b65\u200b\u548c\u200b\u8d44\u6e90\u7ba1\u7406\u200b\u3002\u200b\u5b83\u4eec\u200b\u4e4b\u95f4\u200b\u5b58\u5728\u200b\u5c42\u6b21\u5316\u200b\u7684\u200b\u5173\u7cfb\u200b\uff0c\u200b\u90e8\u5206\u200b\u673a\u5236\u200b\u57fa\u4e8e\u200b\u5176\u4ed6\u200b\u673a\u5236\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u540c\u65f6\u200b\u5728\u200b\u4e0d\u540c\u200b\u573a\u666f\u200b\u4e0b\u200b\u4e92\u8865\u200b\u534f\u4f5c\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5b83\u4eec\u200b\u7684\u200b\u8be6\u7ec6\u200b\u5173\u7cfb\u200b\u548c\u200b\u5bf9\u6bd4\u200b\u5206\u6790\u200b\uff1a</p> <p>1. \u200b\u5e95\u5c42\u200b\u5b9e\u73b0\u200b\u5173\u7cfb\u200b</p> <p>(1) \u200b\u6d88\u606f\u200b\u961f\u5217\u200b\uff08Queue\uff09\u200b\u662f\u200b\u57fa\u7840\u200b</p> <ul> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b \u200b\u662f\u200b FreeRTOS \u200b\u4e2d\u200b\u6700\u5e95\u5c42\u200b\u7684\u200b\u901a\u4fe1\u200b\u673a\u5236\u200b\uff0c\u200b\u5176\u4ed6\u200b\u9ad8\u7ea7\u200b\u673a\u5236\u200b\uff08\u200b\u5982\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff09\u200b\u5747\u200b\u57fa\u4e8e\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u5b9e\u73b0\u200b\u3002</li> <li>\u200b\u5b9e\u73b0\u200b\u65b9\u5f0f\u200b\uff1a   \u200b\u4fe1\u53f7\u91cf\u200b\u548c\u200b\u4e92\u65a5\u200b\u91cf\u200b\u901a\u8fc7\u200b\u957f\u5ea6\u200b\u4e3a\u200b 1 \u200b\u7684\u200b\u961f\u5217\u200b\u5b9e\u73b0\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a<ul> <li>\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\uff1a\u200b\u961f\u5217\u200b\u4e2d\u200b\u5b58\u653e\u200b\u7a7a\u200b\u6d88\u606f\u200b\uff08\u200b\u65e0\u200b\u5b9e\u9645\u200b\u6570\u636e\u200b\uff09\u3002</li> <li>\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff08Mutex\uff09\uff1a\u200b\u7279\u6b8a\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u652f\u6301\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\u3002</li> <li>\u200b\u8ba1\u6570\u200b\u4fe1\u53f7\u91cf\u200b\uff1a\u200b\u961f\u5217\u200b\u957f\u5ea6\u200b\u5927\u4e8e\u200b 1\uff0c\u200b\u8bb0\u5f55\u200b\u53ef\u7528\u200b\u8d44\u6e90\u200b\u6570\u91cf\u200b\u3002</li> </ul> </li> </ul> <p>(2) \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\uff08Task Notification\uff09\u200b\u662f\u200b\u8f7b\u91cf\u7ea7\u200b\u66ff\u4ee3\u200b</p> <ul> <li>\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b \u200b\u76f4\u63a5\u200b\u64cd\u4f5c\u200b\u4efb\u52a1\u200b\u7684\u200b\u63a7\u5236\u200b\u5757\u200b\uff08TCB\uff09\uff0c\u200b\u65e0\u9700\u200b\u521b\u5efa\u200b\u72ec\u7acb\u200b\u5185\u6838\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u56e0\u6b64\u200b\u66f4\u200b\u9ad8\u6548\u200b\u3002</li> <li>\u200b\u529f\u80fd\u200b\u8986\u76d6\u200b\uff1a<ul> <li>\u200b\u53ef\u200b\u6a21\u62df\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e8b\u4ef6\u200b\u6807\u5fd7\u200b\u7ec4\u7b49\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u80fd\u200b\u4f20\u9012\u6570\u636e\u200b\uff08\u200b\u9700\u200b\u914d\u5408\u200b\u5168\u5c40\u53d8\u91cf\u200b\uff09\u3002</li> </ul> </li> </ul> <p>2. \u200b\u529f\u80fd\u200b\u5bf9\u6bd4\u200b\u4e0e\u200b\u534f\u4f5c\u200b</p> <p>(1) \u200b\u6570\u636e\u200b\u4f20\u9012\u200b vs \u200b\u540c\u6b65\u63a7\u5236\u200b</p> \u200b\u673a\u5236\u200b \u200b\u6570\u636e\u200b\u4f20\u9012\u200b \u200b\u540c\u6b65\u63a7\u5236\u200b \u200b\u8d44\u6e90\u7ba1\u7406\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b \u200b\u6d88\u606f\u200b\u961f\u5217\u200b \u2714\ufe0f \u2714\ufe0f \u274c \u200b\u4efb\u52a1\u200b\u95f4\u200b\u4f20\u9012\u200b\u7ed3\u6784\u5316\u200b\u6570\u636e\u200b \u200b\u4fe1\u53f7\u91cf\u200b \u274c \u2714\ufe0f \u2714\ufe0f \u200b\u8d44\u6e90\u200b\u8ba1\u6570\u200b\u3001\u200b\u4efb\u52a1\u200b\u540c\u6b65\u200b \u200b\u4e92\u65a5\u200b\u91cf\u200b \u274c \u2714\ufe0f \u2714\ufe0f \u200b\u4fdd\u62a4\u200b\u5171\u4eab\u8d44\u6e90\u200b\uff08\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\uff09 \u200b\u4e8b\u4ef6\u200b\u7ec4\u200b \u274c \u2714\ufe0f \u274c \u200b\u591a\u200b\u4e8b\u4ef6\u200b\u7ec4\u5408\u200b\u89e6\u53d1\u200b \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b \u274c \u2714\ufe0f \u2714\ufe0f \u200b\u8f7b\u91cf\u7ea7\u200b\u540c\u6b65\u200b\uff08\u200b\u66ff\u4ee3\u200b\u4fe1\u53f7\u91cf\u200b/\u200b\u4e8b\u4ef6\u200b\uff09 \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b \u274c \u2714\ufe0f \u274c \u200b\u5b9a\u65f6\u200b\u89e6\u53d1\u200b\u56de\u8c03\u200b\u6216\u200b\u540c\u6b65\u200b\u4efb\u52a1\u200b <p>(2) \u200b\u534f\u4f5c\u200b\u573a\u666f\u200b\u793a\u4f8b\u200b</p> <ul> <li>\u200b\u5b9a\u65f6\u5668\u200b + \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\uff1a  </li> </ul> <p>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u5230\u671f\u200b\u540e\u200b\uff0c\u200b\u901a\u8fc7\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u5524\u9192\u200b\u4efb\u52a1\u200b\u5904\u7406\u4e8b\u4ef6\u200b\u3002</p> <ul> <li>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b + \u200b\u4fe1\u53f7\u91cf\u200b\uff1a  </li> </ul> <p>\u200b\u591a\u4e2a\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u5982\u200b\u7f51\u7edc\u200b\u6570\u636e\u200b\u5230\u8fbe\u200b\u3001\u200b\u4f20\u611f\u5668\u200b\u89e6\u53d1\u200b\uff09\u200b\u901a\u8fc7\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u7ec4\u5408\u200b\uff0c\u200b\u89e6\u53d1\u200b\u4fe1\u53f7\u91cf\u200b\u901a\u77e5\u200b\u4efb\u52a1\u200b\u3002</p> <ul> <li>\u200b\u4e92\u65a5\u200b\u91cf\u200b + \u200b\u961f\u5217\u200b\uff1a  </li> </ul> <p>\u200b\u4fdd\u62a4\u200b\u5171\u4eab\u8d44\u6e90\u200b\uff08\u200b\u5982\u200b\u961f\u5217\u200b\uff09\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u907f\u514d\u200b\u591a\u4efb\u52a1\u200b\u7ade\u4e89\u200b\u3002</p> <p>3. \u200b\u5c42\u6b21\u5316\u200b\u67b6\u6784\u200b</p> <pre><code>FreeRTOS \u200b\u5185\u6838\u200b\n\u251c\u2500\u2500 \u200b\u6d88\u606f\u200b\u961f\u5217\u200b\uff08Queue\uff09 \u2192 \u200b\u57fa\u7840\u200b\u901a\u4fe1\u200b\u673a\u5236\u200b\n\u2502   \u251c\u2500\u2500 \u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\uff08Binary Semaphore\uff09\n\u2502   \u251c\u2500\u2500 \u200b\u8ba1\u6570\u200b\u4fe1\u53f7\u91cf\u200b\uff08Counting Semaphore\uff09\n\u2502   \u2514\u2500\u2500 \u200b\u4e92\u65a5\u200b\u91cf\u200b\uff08Mutex\uff09 \u2192 \u200b\u652f\u6301\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\n\u251c\u2500\u2500 \u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\uff08Event Group\uff09 \u2192 \u200b\u72ec\u7acb\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u6807\u5fd7\u200b\u4f4d\u200b\u7ba1\u7406\u200b\n\u251c\u2500\u2500 \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\uff08Task Notification\uff09 \u2192 \u200b\u8f7b\u91cf\u7ea7\u200b\u66ff\u4ee3\u200b\u4fe1\u53f7\u91cf\u200b/\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\n\u2514\u2500\u2500 \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\uff08Software Timer\uff09 \u2192 \u200b\u57fa\u4e8e\u200b Tick \u200b\u4e2d\u65ad\u200b\uff0c\u200b\u4e0e\u200b\u4efb\u52a1\u200b\u540c\u6b65\u200b\u534f\u4f5c\u200b\n</code></pre> <p>4. \u200b\u5173\u952e\u200b\u533a\u522b\u200b\u4e0e\u200b\u9009\u62e9\u200b\u5efa\u8bae\u200b</p> \u200b\u7279\u6027\u200b \u200b\u8d44\u6e90\u200b\u5360\u7528\u200b \u200b\u5b9e\u65f6\u6027\u200b \u200b\u529f\u80fd\u200b\u590d\u6742\u5ea6\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b \u200b\u6d88\u606f\u200b\u961f\u5217\u200b \u200b\u9ad8\u200b \u200b\u4e2d\u200b \u200b\u652f\u6301\u200b\u6570\u636e\u200b\u4f20\u9012\u200b \u200b\u590d\u6742\u200b\u6570\u636e\u4f20\u8f93\u200b\uff08\u200b\u5982\u200b\u4f20\u611f\u5668\u200b\u6570\u636e\u200b\uff09 \u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b \u200b\u6781\u4f4e\u200b \u200b\u9ad8\u200b \u200b\u4ec5\u200b\u540c\u6b65\u200b/\u200b\u7b80\u5355\u200b\u72b6\u6001\u200b\u4f20\u9012\u200b \u200b\u9ad8\u9891\u200b\u8f7b\u91cf\u200b\u540c\u6b65\u200b\uff08\u200b\u66ff\u4ee3\u200b\u4fe1\u53f7\u91cf\u200b\uff09 \u200b\u4e8b\u4ef6\u200b\u7ec4\u200b \u200b\u4e2d\u200b \u200b\u4e2d\u200b \u200b\u591a\u200b\u4e8b\u4ef6\u200b\u7ec4\u5408\u200b\u89e6\u53d1\u200b \u200b\u591a\u200b\u6761\u4ef6\u200b\u534f\u540c\u200b\u89e6\u53d1\u200b\uff08\u200b\u5982\u200b AND/OR\uff09 \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b \u200b\u4e2d\u200b \u200b\u4f9d\u8d56\u200b\u914d\u7f6e\u200b \u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\u89e6\u53d1\u200b \u200b\u5468\u671f\u6027\u200b\u4efb\u52a1\u200b\uff08\u200b\u5982\u200b\u6570\u636e\u200b\u91c7\u96c6\u200b\uff09 <p>5. \u200b\u603b\u7ed3\u200b</p> <ul> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b \u200b\u662f\u200b\u6838\u5fc3\u200b\u57fa\u7840\u8bbe\u65bd\u200b\uff0c\u200b\u5176\u4ed6\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\uff08\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e92\u65a5\u200b\u91cf\u200b\uff09\u200b\u57fa\u4e8e\u200b\u5176\u200b\u5b9e\u73b0\u200b\u3002</li> <li>\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b \u200b\u662f\u200b\u8f7b\u91cf\u7ea7\u200b\u66ff\u4ee3\u200b\u65b9\u6848\u200b\uff0c\u200b\u9002\u5408\u200b\u9ad8\u9891\u200b\u540c\u6b65\u200b\u573a\u666f\u200b\uff0c\u200b\u4f46\u200b\u529f\u80fd\u200b\u6709\u9650\u200b\u3002</li> <li>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b \u200b\u548c\u200b \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b \u200b\u63d0\u4f9b\u200b\u7279\u5b9a\u200b\u573a\u666f\u200b\u7684\u200b\u4f18\u5316\u200b\u652f\u6301\u200b\uff08\u200b\u591a\u200b\u4e8b\u4ef6\u200b\u7ec4\u5408\u200b\u3001\u200b\u5b9a\u65f6\u200b\u89e6\u53d1\u200b\uff09\u3002</li> <li>\u200b\u5b9e\u9645\u200b\u5f00\u53d1\u200b\u4e2d\u9700\u200b\u6839\u636e\u200b \u200b\u5b9e\u65f6\u6027\u200b\u8981\u6c42\u200b \u3001 \u200b\u8d44\u6e90\u200b\u5f00\u9500\u200b \u200b\u548c\u200b \u200b\u529f\u80fd\u200b\u9700\u6c42\u200b \u200b\u7efc\u5408\u200b\u9009\u62e9\u200b\u673a\u5236\u200b\u3002</li> </ul> <p>\u200b\u901a\u8fc7\u200b\u5408\u7406\u200b\u7ec4\u5408\u200b\u8fd9\u4e9b\u200b\u673a\u5236\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u6784\u5efa\u200b\u9ad8\u6548\u200b\u3001\u200b\u53ef\u200b\u7ef4\u62a4\u200b\u7684\u200b\u5b9e\u65f6\u200b\u591a\u4efb\u52a1\u200b\u7cfb\u7edf\u200b\u3002</p>"},{"location":"embedded_development/#421","title":"4.2.1. \u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u6d88\u606f\u200b\u961f\u5217","text":"<ol> <li> <p>\u200b\u6240\u6709\u200b\u7684\u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5747\u4f1a\u200b\u5f00\u542f\u200b\u4e34\u754c\u200b\u533a\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\uff01\uff01\uff01</p> </li> <li> <p><code>\u200b\u961f\u5217\u200b</code>\u200b\u662f\u200b\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e3b\u8981\u200b\u7684\u200b\u4efb\u52a1\u200b\u95f4\u200b\u901a\u8baf\u200b\u65b9\u5f0f\u200b\u3002</p> <ul> <li>\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4efb\u52a1\u200b\u4e0e\u200b\u4efb\u52a1\u200b\u95f4\u200b\u3001\u200b\u4e2d\u65ad\u200b\u548c\u200b\u4efb\u52a1\u200b\u95f4\u200b\u4f20\u9001\u200b\u4fe1\u606f\u200b</li> <li>\u200b\u53d1\u9001\u5230\u200b\u961f\u5217\u200b\u7684\u200b\u6d88\u606f\u200b\u662f\u200b\u901a\u8fc7\u200b\u62f7\u8d1d\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u961f\u5217\u200b\u5b58\u50a8\u200b\u7684\u200b\u6570\u636e\u200b\u662f\u200b\u539f\u200b\u6570\u636e\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u539f\u200b\u6570\u636e\u200b\u7684\u200b\u5f15\u7528\u200b</li> </ul> </li> <li> <p>\u200b\u961f\u5217\u200b\u53d1\u9001\u200b\u6216\u200b\u63a5\u6536\u200b\u8fc7\u7a0b\u200b\u4e2d\u4f1a\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\uff0c\u200b\u901a\u8fc7\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u800c\u975e\u200b\u4f9d\u8d56\u200b\u786c\u4ef6\u200b\u539f\u5b50\u200b\u6307\u4ee4\u200b\u6216\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\u7684\u200b\u9ad8\u6548\u200b\u539f\u5b50\u200b\u6027\u200b\u4fdd\u62a4\u200b\u3002</p> <ul> <li>\u200b\u8fd9\u79cd\u200b\u8bbe\u8ba1\u200b\u5728\u200b \u200b\u5355\u6838\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b \u200b\u4e2d\u200b\u5e73\u8861\u200b\u4e86\u200b\u5b9e\u65f6\u6027\u200b\u3001\u200b\u4ee3\u7801\u200b\u53ef\u79fb\u690d\u6027\u200b\u53ca\u200b\u6027\u80fd\u200b\u5f00\u9500\u200b\uff0c\u200b\u6210\u4e3a\u200b\u5176\u200b\u5e7f\u6cdb\u5e94\u7528\u200b\u7684\u200b\u57fa\u77f3\u200b</li> <li>\u200b\u5bf9\u4e8e\u200b\u591a\u6838\u200b\u6216\u200b\u8d85\u5927\u89c4\u6a21\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u9700\u200b\u7ed3\u5408\u200b\u5176\u4ed6\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\uff08\u200b\u5982\u200b\u81ea\u65cb\u200b\u9501\u200b\uff09</li> </ul> <p>\u200b\u4e00\u200b\u3001\u200b\u786e\u4fdd\u200b\u6570\u636e\u200b\u64cd\u4f5c\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b</p> <p>\u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\u6d89\u53ca\u200b\u5bf9\u200b\u5171\u4eab\u200b\u6570\u636e\u7ed3\u6784\u200b\uff08\u200b\u5982\u200b\u961f\u5217\u200b\u5934\u5c3e\u200b\u6307\u9488\u200b\u3001\u200b\u6d88\u606f\u200b\u8ba1\u6570\u5668\u200b\uff09\u200b\u7684\u200b\u4fee\u6539\u200b\uff0c\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u53ef\u200b\u9632\u6b62\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u5bfc\u81f4\u200b\u7684\u200b \u200b\u4e2d\u95f4\u72b6\u6001\u200b\u4e0d\u200b\u4e00\u81f4\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a</p> <ul> <li>\u200b\u5199\u5165\u200b\u961f\u5217\u200b\uff1a\u200b\u82e5\u200b\u5728\u200b\u4fee\u6539\u200b\u961f\u5217\u200b\u5c3e\u200b\u6307\u9488\u200b\u65f6\u200b\u53d1\u751f\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\uff0c\u200b\u5176\u4ed6\u200b\u4efb\u52a1\u200b\u53ef\u80fd\u200b\u8bfb\u53d6\u200b\u5230\u200b\u672a\u200b\u5b8c\u5168\u200b\u66f4\u65b0\u200b\u7684\u200b\u6307\u9488\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u6570\u636e\u200b\u9519\u4e71\u200b\u3002</li> <li>\u200b\u8bfb\u53d6\u200b\u961f\u5217\u200b\uff1a\u200b\u4efb\u52a1\u200b\u5728\u200b\u53d6\u51fa\u200b\u6d88\u606f\u200b\u65f6\u200b\uff0c\u200b\u82e5\u200b\u672a\u200b\u53ca\u65f6\u200b\u66f4\u65b0\u200b\u961f\u5217\u200b\u5934\u200b\u6307\u9488\u200b\uff0c\u200b\u5176\u4ed6\u200b\u4efb\u52a1\u200b\u53ef\u80fd\u200b\u8bef\u5224\u200b\u961f\u5217\u200b\u72b6\u6001\u200b\u3002</li> </ul> <p>\u200b\u901a\u8fc7\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\uff0c\u200b\u786e\u4fdd\u200b\u5f53\u524d\u4efb\u52a1\u200b\u72ec\u5360\u200b\u961f\u5217\u200b\u8bbf\u95ee\u200b\u6743\u200b\uff0c\u200b\u76f4\u5230\u200b\u64cd\u4f5c\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u4e8c\u200b\u3001\u200b\u907f\u514d\u200b\u4f18\u5148\u7ea7\u200b\u53cd\u8f6c\u200b\u4e0e\u200b\u6b7b\u9501\u200b</p> <p>\u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\u5e38\u200b\u4f34\u968f\u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\uff08\u200b\u5982\u200b\u961f\u5217\u200b\u6ee1\u65f6\u200b\u7b49\u5f85\u200b\uff09\uff0c\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u53ef\u200b \u200b\u5b89\u5168\u200b\u7ba1\u7406\u200b\u963b\u585e\u200b\u961f\u5217\u200b\uff1a</p> <ol> <li> <p>\u200b\u963b\u585e\u200b\u5217\u8868\u200b\u64cd\u4f5c\u200b </p> <p>\u200b\u5f53\u200b\u4efb\u52a1\u200b\u56e0\u200b\u961f\u5217\u200b\u6ee1\u200b/\u200b\u7a7a\u9700\u200b\u963b\u585e\u200b\u65f6\u200b\uff0c\u200b\u9700\u5c06\u200b\u5176\u200b\u52a0\u5165\u200b\u7b49\u5f85\u200b\u5217\u8868\u200b\u3002\u200b\u82e5\u200b\u6b64\u65f6\u200b\u53d1\u751f\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\uff0c\u200b\u65b0\u200b\u4efb\u52a1\u200b\u53ef\u80fd\u200b\u4fee\u6539\u200b\u540c\u4e00\u200b\u961f\u5217\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u7b49\u5f85\u200b\u5217\u8868\u200b\u88ab\u200b\u7834\u574f\u200b\u3002</p> </li> <li> <p>\u200b\u5524\u9192\u200b\u903b\u8f91\u200b\u5b89\u5168\u200b </p> <p>\u200b\u5176\u4ed6\u200b\u4efb\u52a1\u200b\u6216\u200b\u4e2d\u65ad\u200b\u91ca\u653e\u200b\u961f\u5217\u200b\u7a7a\u95f4\u200b\u65f6\u200b\uff0c\u200b\u9700\u200b\u5524\u9192\u200b\u7b49\u5f85\u200b\u4efb\u52a1\u200b\u3002\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u786e\u4fdd\u200b\u5524\u9192\u200b\u64cd\u4f5c\u200b\u4e0e\u200b\u961f\u5217\u200b\u72b6\u6001\u200b\u4fee\u6539\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b\uff0c\u200b\u907f\u514d\u200b\u9057\u6f0f\u200b\u5524\u9192\u200b\u6216\u200b\u91cd\u590d\u200b\u5524\u9192\u200b\u3002</p> </li> </ol> <p>\u200b\u4e09\u200b\u3001\u200b\u4f18\u5316\u200b\u4e2d\u65ad\u200b\u5904\u7406\u200b\u517c\u5bb9\u6027\u200b</p> <p>FreeRTOS\u200b\u91c7\u7528\u200b \u200b\u5206\u5c42\u200b\u4e34\u754c\u200b\u533a\u200b\u4fdd\u62a4\u200b\u7b56\u7565\u200b\uff1a</p> <ul> <li>\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\uff1a\u200b\u4ec5\u200b\u7981\u6b62\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\uff0c\u200b\u4e2d\u65ad\u200b\u4ecd\u200b\u53ef\u200b\u89e6\u53d1\u200b\uff08ISR\u200b\u53ef\u200b\u7ee7\u7eed\u200b\u64cd\u4f5c\u200b\u961f\u5217\u200b\uff09\u3002</li> <li>\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\uff1a\u200b\u5b8c\u5168\u200b\u963b\u6b62\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u548c\u200b\u4e2d\u65ad\u200b\u54cd\u5e94\u200b\uff0c\u200b\u4ee3\u4ef7\u200b\u66f4\u9ad8\u200b\u3002</li> </ul> <p>\u200b\u5728\u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\u4e2d\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u800c\u975e\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u5141\u8bb8\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\uff08ISR\uff09\u200b\u7ee7\u7eed\u200b\u8fd0\u884c\u200b\uff0c\u200b\u51cf\u5c11\u200b\u7cfb\u7edf\u200b\u5ef6\u8fdf\u200b\uff0c\u200b\u540c\u65f6\u200b\u4fdd\u8bc1\u200b\u4efb\u52a1\u200b\u7ea7\u200b\u64cd\u4f5c\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b\u3002</p> <p>\u200b\u56db\u200b\u3001\u200b\u6027\u80fd\u200b\u4e0e\u200b\u5b9e\u65f6\u6027\u200b\u5e73\u8861\u200b</p> <ol> <li> <p>\u200b\u4f4e\u200b\u5f00\u9500\u200b\u64cd\u4f5c\u200b </p> <p>\u200b\u6302\u200b\u8d77\u200b/\u200b\u6062\u590d\u200b\u8c03\u5ea6\u200b\u5668\u4ec5\u200b\u6d89\u53ca\u200b\u4fee\u6539\u200b\u8c03\u5ea6\u200b\u5668\u200b\u72b6\u6001\u53d8\u91cf\u200b\uff08\u200b\u5982\u200b <code>uxSchedulerSuspended</code>\uff09\uff0c\u200b\u65e0\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u5f00\u9500\u200b\uff0c\u200b\u9002\u7528\u200b\u4e8e\u200b\u9ad8\u9891\u200b\u8c03\u7528\u200b\u7684\u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\u3002</p> </li> <li> <p>\u200b\u51cf\u5c11\u200b\u4e34\u754c\u200b\u533a\u200b\u65f6\u95f4\u200b </p> <p>\u200b\u76f8\u6bd4\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u7684\u200b\u4e34\u754c\u200b\u533a\u200b\u66f4\u200b\u77ed\u200b\uff0c\u200b\u5bf9\u200b\u5b9e\u65f6\u6027\u200b\u5f71\u54cd\u200b\u66f4\u200b\u5c0f\u200b\uff0c\u200b\u5c24\u5176\u200b\u9002\u5408\u200b\u591a\u4efb\u52a1\u200b\u9891\u7e41\u200b\u901a\u4fe1\u200b\u7684\u200b\u573a\u666f\u200b\u3002</p> </li> </ol> <p>\u200b\u4e94\u200b\u3001\u200b\u5bf9\u6bd4\u200b\u5176\u4ed6\u200b\u540c\u6b65\u200b\u673a\u5236\u200b</p> \u200b\u673a\u5236\u200b \u200b\u9002\u7528\u200b\u573a\u666f\u200b \u200b\u961f\u5217\u200b\u64cd\u4f5c\u200b\u4e2d\u200b\u7684\u200b\u5c40\u9650\u6027\u200b \u200b\u4e92\u65a5\u200b\u91cf\u200b \u200b\u4fdd\u62a4\u200b\u957f\u671f\u200b\u6301\u6709\u200b\u7684\u200b\u8d44\u6e90\u200b \u200b\u53ef\u80fd\u200b\u5f15\u53d1\u200b\u4f18\u5148\u7ea7\u200b\u53cd\u8f6c\u200b\u6216\u200b\u9012\u5f52\u200b\u8c03\u7528\u200b \u200b\u4fe1\u53f7\u91cf\u200b \u200b\u7b80\u5355\u200b\u8ba1\u6570\u200b\u540c\u6b65\u200b \u200b\u65e0\u6cd5\u200b\u76f4\u63a5\u200b\u4fdd\u62a4\u200b\u961f\u5217\u200b\u6570\u636e\u7ed3\u6784\u200b\u5b8c\u6574\u6027\u200b \u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b \u200b\u6781\u77ed\u200b\u4e34\u754c\u200b\u533a\u200b\uff08\u200b\u5982\u200b\u5bc4\u5b58\u5668\u200b\u64cd\u4f5c\u200b\uff09 \u200b\u4e2d\u65ad\u200b\u5ef6\u8fdf\u200b\u9ad8\u200b\uff0c\u200b\u7834\u574f\u200b\u7cfb\u7edf\u200b\u5b9e\u65f6\u6027\u200b \u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b \u200b\u77ed\u65f6\u200b\u4efb\u52a1\u200b\u7ea7\u200b\u539f\u5b50\u200b\u64cd\u4f5c\u200b \u200b\u5e73\u8861\u200b\u6027\u80fd\u200b\u4e0e\u200b\u5b89\u5168\u6027\u200b\uff0c\u200b\u6700\u200b\u9002\u5408\u200b\u961f\u5217\u200b <p>\u200b\u516d\u200b\u3001\u200b\u5b9e\u73b0\u200b\u6d41\u7a0b\u200b\u793a\u4f8b\u200b\uff08\u200b\u4ee5\u200b<code>xQueueSend()</code>\u200b\u4e3a\u4f8b\u200b\uff09</p> <ol> <li> <p>\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b </p> <pre><code>taskENTER_CRITICAL();  // \u200b\u901a\u8fc7\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u8fdb\u5165\u200b\u4e34\u754c\u200b\u533a\u200b\n</code></pre> </li> <li> <p>\u200b\u68c0\u67e5\u200b\u961f\u5217\u200b\u72b6\u6001\u200b </p> <ul> <li>\u200b\u82e5\u200b\u961f\u5217\u200b\u672a\u6ee1\u200b\uff0c\u200b\u76f4\u63a5\u200b\u5199\u5165\u200b\u6570\u636e\u200b\u5e76\u200b\u66f4\u65b0\u200b\u6307\u9488\u200b\u3002</li> <li>\u200b\u82e5\u200b\u961f\u5217\u200b\u5df2\u6ee1\u200b\uff0c\u200b\u5c06\u200b\u5f53\u524d\u4efb\u52a1\u200b\u52a0\u5165\u200b\u7b49\u5f85\u200b\u53d1\u9001\u200b\u5217\u8868\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u6062\u590d\u200b\u8c03\u5ea6\u200b\u5668\u200b </p> <pre><code>taskEXIT_CRITICAL();   // \u200b\u6062\u590d\u200b\u8c03\u5ea6\u200b\u5668\u200b\uff0c\u200b\u5fc5\u8981\u200b\u65f6\u200b\u89e6\u53d1\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\n</code></pre> </li> <li> <p>\u200b\u5524\u9192\u200b\u7b49\u5f85\u200b\u4efb\u52a1\u200b </p> <p>\u200b\u82e5\u6709\u200b\u4efb\u52a1\u200b\u5728\u200b\u7b49\u5f85\u200b\u63a5\u6536\u200b\uff0c\u200b\u4e14\u200b\u961f\u5217\u200b\u4e2d\u6709\u200b\u6570\u636e\u200b\uff0c\u200b\u5524\u9192\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u3002</p> </li> </ol> <p>\u200b\u4e03\u200b\u3001\u200b\u8bbe\u8ba1\u200b\u6743\u8861\u200b\u4e0e\u200b\u9002\u7528\u6027\u200b</p> <ul> <li> <p>\u200b\u4f18\u52bf\u200b\uff1a</p> <ul> <li>\u200b\u517c\u5bb9\u200b\u6240\u6709\u200b\u67b6\u6784\u200b\uff0c\u200b\u65e0\u9700\u200b\u786c\u4ef6\u200b\u539f\u5b50\u200b\u6307\u4ee4\u200b\u652f\u6301\u200b\u3002  </li> <li>\u200b\u4e2d\u65ad\u200b\u54cd\u5e94\u200b\u5ef6\u8fdf\u200b\u4f4e\u200b\uff0c\u200b\u9002\u5408\u200b\u5b9e\u65f6\u6027\u200b\u8981\u6c42\u200b\u9ad8\u200b\u7684\u200b\u573a\u666f\u200b\u3002 </li> </ul> </li> <li> <p>\u200b\u5c40\u9650\u6027\u200b\uff1a</p> <ul> <li>\u200b\u6302\u200b\u8d77\u200b\u671f\u95f4\u200b\u65e0\u6cd5\u200b\u5904\u7406\u200b\u4efb\u52a1\u200b\u4f18\u5148\u7ea7\u200b\u53d8\u5316\u200b\uff0c\u200b\u9700\u200b\u786e\u4fdd\u200b\u4e34\u754c\u200b\u533a\u200b\u6781\u77ed\u200b\u3002  </li> <li>\u200b\u4e0d\u9002\u200b\u7528\u4e8e\u200b\u591a\u6838\u200b\u7cfb\u7edf\u200b\uff08FreeRTOS\u200b\u4e3b\u8981\u200b\u9488\u5bf9\u200b\u5355\u6838\u200b\u8bbe\u8ba1\u200b\uff09\u3002</li> </ul> </li> </ul> </li> </ol> <pre><code>typedef struct QueuePointers\n{\n    int8_t * pcTail;     // \u200b\u961f\u5217\u200b\u5c3e\u200b\u5730\u5740\u200b\n    int8_t * pcReadFrom; // \u200b\u961f\u5217\u200b\u9996\u200b\u5730\u5740\u200b\n} QueuePointers_t;\n\ntypedef struct SemaphoreData\n{\n    TaskHandle_t xMutexHolder;        // TCB\u200b\u53e5\u67c4\u200b\n    UBaseType_t uxRecursiveCallCount; // \u200b\u5f53\u200b\u7528\u4f5c\u200b\u9012\u5f52\u200b\u4e92\u65a5\u200b\u91cf\u200b\u7684\u200b\u65f6\u5019\u200b\u7528\u6765\u200b\u8bb0\u5f55\u200b\u9012\u5f52\u200b\u4e92\u65a5\u200b\u91cf\u200b\u88ab\u200b\u8c03\u7528\u200b\u7684\u200b\u6b21\u6570\u200b\n} SemaphoreData_t;\n\ntypedef struct QueueDefinition\n{\n    int8_t *pcHead;    // \u200b\u6307\u5411\u200b\u961f\u5217\u200b\u5b58\u50a8\u200b\u533a\u200b\u5f00\u59cb\u200b\u5730\u5740\u200b\n    int8_t *pcTail;    // \u200b\u6307\u5411\u200b\u961f\u5217\u200b\u5b58\u50a8\u200b\u533a\u200b\u6700\u540e\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\n    int8_t *pcWriteTo; // \u200b\u6307\u5411\u200b\u5b58\u50a8\u200b\u533a\u4e2d\u4e0b\u200b\u4e00\u4e2a\u200b\u7a7a\u95f2\u200b\u533a\u57df\u200b\n\n    union\n    {\n        QueuePointers_t xQueue;     // \u200b\u961f\u5217\u200b\u4fe1\u606f\u200b\n        SemaphoreData_t xSemaphore; // \u200b\u4fe1\u53f7\u91cf\u200b\u4fe1\u606f\u200b\n    } u;\n\n    List_t xTasksWaitingToSend;    // \u200b\u7b49\u5f85\u200b\u53d1\u9001\u200b\u4efb\u52a1\u200b\u5217\u8868\u200b\uff0c\u200b\u90a3\u4e9b\u200b\u56e0\u4e3a\u200b\u961f\u5217\u200b\u6ee1\u200b\u5bfc\u81f4\u200b\u5165\u961f\u200b\u5931\u8d25\u200b\u800c\u200b\u8fdb\u5165\u200b\u963b\u585e\u200b\u6001\u200b\u7684\u200b\u4efb\u52a1\u200b\u5c31\u200b\u4f1a\u200b\u6302\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u5217\u8868\u200b\u4e0a\u200b\n    List_t xTasksWaitingToReceive; // \u200b\u7b49\u5f85\u200b\u63a5\u53d7\u4efb\u52a1\u200b\u5217\u8868\u200b\uff0c\u200b\u90a3\u4e9b\u200b\u56e0\u4e3a\u200b\u961f\u5217\u200b\u7a7a\u200b\u5bfc\u81f4\u200b\u51fa\u961f\u200b\u5931\u8d25\u200b\u800c\u200b\u8fdb\u5165\u200b\u963b\u585e\u200b\u6001\u200b\u7684\u200b\u4efb\u52a1\u200b\u5c31\u200b\u4f1a\u200b\u6302\u5230\u200b\u6b64\u200b\u5217\u8868\u200b\u4e0a\u200b\n\n    volatile UBaseType_t uxMessagesWaiting; // \u200b\u961f\u5217\u200b\u4e2d\u200b\u5f53\u524d\u200b\u6d88\u606f\u200b\u6570\u91cf\u200b\n    UBaseType_t uxLength;                   // \u200b\u521b\u5efa\u200b\u961f\u5217\u200b\u65f6\u200b\u6307\u5b9a\u200b\u7684\u200b\u961f\u5217\u200b\u957f\u5ea6\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200b\u961f\u5217\u200b\u4e2d\u200b\u6700\u5927\u200b\u5141\u8bb8\u200b\u7684\u200b\u961f\u5217\u200b\u9879\u200b\u6570\u91cf\u200b\n    UBaseType_t uxItemSize;                 // \u200b\u521b\u5efa\u200b\u961f\u5217\u200b\u65f6\u200b\u6307\u5b9a\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u961f\u5217\u200b\u9879\u200b\u6700\u5927\u200b\u957f\u5ea6\u200b\uff0c\u200b\u5355\u4f4d\u200b\u5b57\u8282\u200b\n\n    volatile int8_t cRxLock; // \u200b\u5f53\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u4ee5\u540e\u200b\u7528\u6765\u200b\u7edf\u8ba1\u200b\u4ece\u200b\u961f\u5217\u200b\u4e2d\u200b\u63a5\u6536\u200b\u5230\u200b\u7684\u200b\u961f\u5217\u200b\u9879\u200b\u6570\u91cf\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200b\u51fa\u961f\u200b\u7684\u200b\u961f\u5217\u200b\u9879\u200b\u6570\u91cf\u200b\n    volatile int8_t cTxLock; // \u200b\u5f53\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u4ee5\u540e\u200b\u7528\u6765\u200b\u7edf\u8ba1\u200b\u53d1\u9001\u5230\u200b\u961f\u5217\u200b\u4e2d\u200b\u7684\u200b\u961f\u5217\u200b\u9879\u200b\u6570\u91cf\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200b\u5165\u961f\u200b\u7684\u200b\u961f\u5217\u200b\u9879\u200b\u6570\u91cf\u200b\n\n#if ((configSUPPORT_STATIC_ALLOCATION == 1) &amp;&amp; (configSUPPORT_DYNAMIC_ALLOCATION == 1))\n    uint8_t ucStaticallyAllocated; // \u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u9759\u6001\u200b\u5b58\u50a8\u200b\u7684\u8bdd\u200b\u6b64\u5b57\u6bb5\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bpdTURE\n#endif\n\n#if (configUSE_TRACE_FACILITY == 1) // \u200b\u8ddf\u8e2a\u200b\u8c03\u8bd5\u200b\u76f8\u5173\u200b\u5b8f\u200b\n    UBaseType_t uxQueueNumber;\n    uint8_t ucQueueType;\n#endif\n\n} xQUEUE;\ntypedef xQUEUE Queue_t;\n</code></pre> <p>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff1a</p> <p></p> <pre><code>// \u200b\u961f\u5217\u200b\u521d\u59cb\u5316\u200bAPI\nxQueueCreate(uxQueueLength\uff0c uxItemSize)\n#define xQueueCreate(uxQueueLength\uff0c uxItemSize)   xQueueGenericCreate((uxQueueLength)\uff0c (uxItemSize)\uff0c (queueQUEUE_TYPE_BASE))\nQueueHandle_t xQueueGenericCreate(const UBaseType_t uxQueueLength\uff0c const UBaseType_t uxItemSize\uff0c const uint8_t ucQueueType)\n// uxQueueLength\uff1a\u200b\u961f\u5217\u200b\u9879\u200b\u6570\u76ee\u200b\n// uxItemSize\uff1a\u200b\u6bcf\u4e2a\u200b\u961f\u5217\u200b\u9879\u200b\u7684\u200b\u5927\u5c0f\u200b\n// pucQueueStorage\uff1a\u200b\u4f7f\u7528\u200b\u9759\u6001\u200b\u5206\u914d\u200b\u961f\u5217\u200b\u65f6\u624d\u200b\u4f7f\u7528\u200b\uff0c\u200b\u6307\u5411\u200b\u5b9a\u4e49\u200b\u961f\u5217\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\uff0c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u52a8\u6001\u5206\u914d\u200b\u961f\u5217\u200b\u7a7a\u95f4\u200b\uff08\u200b\u9ed8\u8ba4\u200b\uff09\uff0c\u200b\u5411\u200b\u8fd9\u4e2a\u200b\u53c2\u6570\u4f20\u9012\u200bNULL\u3002\n// pxStaticQueue\uff1a\u200b\u4f7f\u7528\u200b\u9759\u6001\u200b\u5206\u914d\u200b\u961f\u5217\u200b\u65f6\u624d\u200b\u4f7f\u7528\u200b\uff0c\u200b\u6307\u5411\u200b\u961f\u5217\u200b\u63a7\u5236\u7ed3\u6784\u200b\u4f53\u200b\uff0c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u52a8\u6001\u5206\u914d\u200b\u961f\u5217\u200b\u7a7a\u95f4\u200b\uff08\u200b\u9ed8\u8ba4\u200b\uff09\uff0c\u200b\u5411\u200b\u8fd9\u4e2a\u200b\u53c2\u6570\u4f20\u9012\u200bNULL\u3002\n// ucQueueType\uff1a\u200b\u7c7b\u578b\u200b\uff0c\u200b\u53ef\u89c6\u5316\u200b\u8ddf\u8e2a\u200b\u8c03\u8bd5\u200b\u7528\u200b\u3002\u200b\u53ef\u80fd\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b\uff1a\n//         queueQUEUE_TYPE_BASE\uff1a\u200b\u8868\u793a\u200b\u961f\u5217\u200b\n//         queueQUEUE_TYPE_SET\uff1a\u200b\u8868\u793a\u200b\u961f\u5217\u200b\u96c6\u5408\u200b\n//         queueQUEUE_TYPE_MUTEX\uff1a\u200b\u8868\u793a\u200b\u4e92\u65a5\u200b\u91cf\u200b\n//         queueQUEUE_TYPE_COUNTING_SEMAPHORE\uff1a\u200b\u8868\u793a\u200b\u8ba1\u6570\u200b\u4fe1\u53f7\u91cf\u200b\n//         queueQUEUE_TYPE_BINARY_SEMAPHORE\uff1a\u200b\u8868\u793a\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\n//         queueQUEUE_TYPE_RECURSIVE_MUTEX \uff1a\u200b\u8868\u793a\u200b\u9012\u5f52\u200b\u4e92\u65a5\u200b\u91cf\u200b\nBaseType_t xQueueGenericSend(QueueHandle_t xQueue\uff0c const void *const pvItemToQueue\uff0c\n                             TickType_t xTicksToWait\uff0c const BaseType_t xCopyPosition)\n// xQueue\uff1a\u200b\u961f\u5217\u200b\u53e5\u67c4\u200b\n// pvItemToQueue\uff1a\u200b\u6307\u9488\u200b\uff0c\u200b\u6307\u5411\u200b\u8981\u200b\u5165\u961f\u200b\u7684\u200b\u5217\u8868\u200b\u9879\u200b\n// xTicksToWait\uff1a\u200b\u65f6\u95f4\u200b\u5355\u4f4d\u200b\u4e3a\u200b\u7cfb\u7edf\u200b\u8282\u62cd\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\uff0c\u200b\u5b8f\u200bportTICK_PERIOD_MS\u200b\u53ef\u4ee5\u200b\u7528\u6765\u200b\u8f85\u52a9\u200b\u8ba1\u7b97\u200b\u771f\u5b9e\u200b\u5ef6\u65f6\u200b\u503c\u200b\u3002\n//               \u200b\u5982\u679c\u200b\u961f\u5217\u200b\u6ee1\u200b\uff0c\u200b\u7b49\u5f85\u200b\u961f\u5217\u200b\u7a7a\u95f2\u200b\u7684\u200b\u6700\u5927\u200b\u65f6\u95f4\u200b\uff0c\n//               \u200b\u5982\u679c\u200b\u961f\u5217\u200b\u6ee1\u200b\u5e76\u4e14\u200bxTicksToWait\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u6210\u200b0\uff0c\u200b\u51fd\u6570\u200b\u7acb\u523b\u200b\u8fd4\u56de\u200b\uff0c\n//               \u200b\u5982\u679c\u200bINCLUDE_vTaskSuspend\u200b\u8bbe\u7f6e\u200b\u6210\u200b1\uff0c\u200b\u5e76\u4e14\u200b\u6307\u5b9a\u200b\u5ef6\u65f6\u200b\u4e3a\u200bportMAX_DELAY\u200b\u5c06\u200b\u5f15\u8d77\u200b\u4efb\u52a1\u200b\u65e0\u9650\u200b\u963b\u585e\u200b\uff08\u200b\u6ca1\u6709\u200b\u8d85\u65f6\u200b\uff09\u3002\n// xCopyPosition\uff1a\u200b\u5165\u961f\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u200b\u4ece\u200b\u961f\u5217\u200b\u5c3e\u200b\u5165\u961f\u200b\u3001\u200b\u4ece\u200b\u961f\u5217\u200b\u9996\u200b\u5165\u961f\u200b\u548c\u200b\u8986\u76d6\u200b\u5f0f\u200b\u5165\u961f\u200b\u3002\n</code></pre> <p>\u200b\u6267\u884c\u200b\u6d41\u7a0b\u200b\uff1a</p> <p></p> <ol> <li>\u200b\u5f53\u200b\u4efb\u52a1\u200b\u5c06\u200b\u6570\u636e\u200b\u5165\u961f\u200b\u65f6\u200b\uff0c\u200b\u5982\u679c\u200b\u961f\u5217\u200b\u672a\u6ee1\u200b\u6216\u8005\u200b\u4ee5\u200b\u8986\u76d6\u200b\u5f0f\u200b\u5165\u961f\u200b\uff0c\u200b\u8c03\u7528\u51fd\u6570\u200bprvCopyDataToQueue()\u200b\u5c06\u8981\u200b\u5165\u961f\u200b\u7684\u200b\u6570\u636e\u200b\u62f7\u8d1d\u5230\u200b\u961f\u5217\u200b\u3002\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\u5904\u7406\u200b\u4e09\u79cd\u200b\u5165\u961f\u200b\u60c5\u51b5\u200b\uff0c<ul> <li>\u200b\u7b2c\u4e00\u79cd\u200b\u662f\u200b\u961f\u5217\u200b\u9879\u200b\u5927\u5c0f\u200b\u4e3a\u200b\u96f6\u65f6\u200b\uff08\u200b\u5373\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200buxItemSize\u200b\u4e3a\u200b0\uff0c\u200b\u6bd4\u5982\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\u548c\u200b\u8ba1\u6570\u200b\u4fe1\u53f7\u91cf\u200b\uff09\uff0c\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u6570\u636e\u200b\u62f7\u8d1d\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u800c\u662f\u200b\u5c06\u200b\u961f\u5217\u200b\u9879\u200b\u8ba1\u6570\u5668\u200b\u52a0\u200b1\uff08\u200b\u5373\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200buxMessagesWaiting++\uff09\uff1b</li> <li>\u200b\u7b2c\u4e8c\u79cd\u200b\u60c5\u51b5\u200b\u662f\u4ece\u200b\u961f\u5217\u200b\u5c3e\u200b\u5165\u961f\u200b\u65f6\u200b\uff0c\u200b\u5219\u200b\u5c06\u200b\u6570\u636e\u200b\u62f7\u8d1d\u5230\u200b\u6307\u9488\u200bpxQueue-&gt;pcWriteTo\u200b\u6307\u5411\u200b\u7684\u200b\u5730\u65b9\u200b\u3001\u200b\u66f4\u65b0\u200b\u6307\u9488\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3001\u200b\u961f\u5217\u200b\u9879\u200b\u8ba1\u6570\u5668\u200b\u52a0\u200b1\uff1b</li> <li>\u200b\u7b2c\u4e09\u79cd\u200b\u60c5\u51b5\u200b\u662f\u4ece\u200b\u961f\u5217\u200b\u9996\u200b\u5165\u961f\u200b\u65f6\u200b\uff0c\u200b\u5219\u200b\u5c06\u200b\u6570\u636e\u200b\u62f7\u8d1d\u5230\u200b\u6307\u9488\u200bpxQueue-&gt;u.pcReadFrom\u200b\u6307\u5411\u200b\u7684\u200b\u5730\u65b9\u200b\u3001\u200b\u66f4\u65b0\u200b\u6307\u9488\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3001\u200b\u961f\u5217\u200b\u9879\u200b\u8ba1\u6570\u5668\u200b\u52a0\u200b1\u3002\u200b\u5982\u679c\u200b\u662f\u200b\u8986\u76d6\u200b\u5f0f\u200b\u5165\u961f\u200b\uff0c\u200b\u8fd8\u4f1a\u200b\u8c03\u6574\u200b\u961f\u5217\u200b\u9879\u200b\u8ba1\u6570\u5668\u200b\u7684\u200b\u503c\u200b\u3002</li> </ul> </li> <li>\u200b\u5b8c\u6210\u200b\u6570\u636e\u200b\u5165\u961f\u200b\u64cd\u4f5c\u200b\u540e\u200b\uff0c\u200b\u8fd8\u8981\u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u6709\u200b\u4efb\u52a1\u200b\u56e0\u4e3a\u200b\u7b49\u5f85\u200b\u51fa\u961f\u200b\u800c\u200b\u963b\u585e\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u8fd9\u6b21\u200b\u6570\u636e\u200b\u5165\u961f\u200b\uff0c\u200b\u961f\u5217\u200b\u81f3\u5c11\u200b\u6709\u200b\u4e00\u4e2a\u200b\u961f\u5217\u200b\u9879\u200b\uff0c\u200b\u5982\u679c\u200b\u6709\u200b\u963b\u585e\u200b\u4efb\u52a1\u200b\uff0c\u200b\u5219\u200b\u963b\u585e\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\u4e86\u200b\u3002<ul> <li>\u200b\u56e0\u200b\u7b49\u5f85\u200b\u51fa\u961f\u200b\u800c\u200b\u963b\u585e\u200b\u7684\u200b\u4efb\u52a1\u200b\u4f1a\u200b\u5c06\u200b\u4efb\u52a1\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5217\u8868\u200b\u9879\u200b\uff08\u200b\u5373\u200b\u4efb\u52a1\u200bTCB\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxEventListItem\uff0c\u200b\u5b83\u200b\u662f\u200b\u4efb\u52a1\u200bTCB\u200b\u7684\u200b\u4e00\u4e2a\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200b\uff09\u200b\u6302\u200b\u63a5\u5230\u200b\u961f\u5217\u200b\u7684\u200b\u7b49\u5f85\u200b\u51fa\u961f\u200b\u5217\u8868\u200b\u4e0a\u200b\uff08\u200b\u5373\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxTasksWaitingToReceive\uff09\u3002</li> <li>\u200b\u56e0\u4e3a\u200b\u8981\u200b\u89e3\u9664\u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u5c06\u200b\u4efb\u52a1\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5217\u8868\u200b\u9879\u200b\u4ece\u200b\u961f\u5217\u200b\u7684\u200b\u7b49\u5f85\u200b\u51fa\u961f\u200b\u961f\u5217\u200b\u4e0a\u200b\u5220\u9664\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5c06\u200b\u4efb\u52a1\u200b\u79fb\u52a8\u200b\u5230\u200b\u5c31\u7eea\u200b\u5217\u8868\u200b\u4e2d\u200b\u3002\u200b\u8fd9\u200b\u4e00\u5207\u200b\uff0c\u200b\u90fd\u200b\u662f\u200b\u8c03\u7528\u51fd\u6570\u200bxTaskRemoveFromEventList()\u200b\u5b9e\u73b0\u200b\u7684\u200b\u3002</li> </ul> </li> <li>\u200b\u5982\u679c\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\u7684\u200b\u4efb\u52a1\u200b\u4f18\u5148\u7ea7\u200b\u6bd4\u200b\u5f53\u524d\u4efb\u52a1\u200b\u4f18\u5148\u7ea7\u200b\u66f4\u9ad8\u200b\uff0c\u200b\u5219\u200b\u89e6\u53d1\u200b\u4e00\u4e2a\u200bPendSV\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u7b49\u200b\u9000\u51fa\u200b\u4e34\u754c\u200b\u533a\u540e\u200b\uff0c\u200b\u8fdb\u884c\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u3002\u200b\u5165\u961f\u200b\u4efb\u52a1\u200b\u5b8c\u6210\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u4efb\u52a1\u200b\u5165\u961f\u200b\u65f6\u200b\uff0c\u200b\u961f\u5217\u200b\u6ee1\u200b\u5e76\u4e14\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u8986\u76d6\u200b\u5165\u961f\u200b\uff1a<ul> <li>\u200b\u963b\u585e\u200b\u65f6\u95f4\u200b\u4e3a\u200b0\u200b\u7684\u200b\u60c5\u51b5\u200b\u3002\u200b\u8bbe\u7f6e\u200b\u963b\u585e\u200b\u65f6\u95f4\u200b\u4e3a\u200b0\u200b\u610f\u5473\u7740\u200b\u5f53\u200b\u961f\u5217\u200b\u6ee1\u65f6\u200b\uff0c\u200b\u51fd\u6570\u200b\u7acb\u5373\u200b\u8fd4\u56de\u200b\uff0c\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u9519\u8bef\u4ee3\u7801\u200b\uff0c\u200b\u8868\u793a\u200b\u961f\u5217\u200b\u6ee1\u200b\u3002</li> <li>\u200b\u963b\u585e\u200b\u65f6\u95f4\u200b\u4e0d\u200b\u4e3a\u200b0\uff0c\u200b\u5219\u200b\u672c\u200b\u4efb\u52a1\u200b\u4f1a\u200b\u56e0\u4e3a\u200b\u7b49\u5f85\u200b\u5165\u961f\u200b\u800c\u200b\u8fdb\u5165\u200b\u963b\u585e\u200b\u3002<ul> <li>\u200b\u5728\u200b\u5c06\u200b\u4efb\u52a1\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u963b\u585e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u662f\u200b\u4e0d\u200b\u5e0c\u671b\u200b\u6709\u200b\u5176\u5b83\u200b\u4efb\u52a1\u200b\u548c\u200b\u4e2d\u65ad\u200b\u64cd\u4f5c\u200b\u8fd9\u4e2a\u200b\u961f\u5217\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5217\u8868\u200b\u7684\u200b\uff08\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxTasksWaitingToReceive\u200b\u5217\u8868\u200b\u548c\u200bxTasksWaitingToSend\u200b\u5217\u8868\u200b\uff09\uff0c\u200b\u56e0\u4e3a\u200b\u64cd\u4f5c\u200b\u961f\u5217\u200b\u4e8b\u4ef6\u200b\u5217\u8868\u200b\u53ef\u80fd\u200b\u5f15\u8d77\u200b\u5176\u5b83\u200b\u4efb\u52a1\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\uff0c\u200b\u8fd9\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u53d1\u751f\u200b\u4f18\u5148\u7ea7\u200b\u7ffb\u8f6c\u200b\u3002<ul> <li>\u200b\u6bd4\u5982\u200b\u4efb\u52a1\u200bA\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u4f4e\u4e8e\u200b\u672c\u200b\u4efb\u52a1\u200b\uff0c\u200b\u4f46\u662f\u200b\u5728\u200b\u672c\u200b\u4efb\u52a1\u200b\u8fdb\u5165\u200b\u963b\u585e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u4efb\u52a1\u200bA\u200b\u5374\u200b\u56e0\u4e3a\u200b\u5176\u5b83\u200b\u539f\u56e0\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\u4e86\u200b\uff0c\u200b\u8fd9\u200b\u663e\u7136\u200b\u662f\u200b\u8981\u200b\u7edd\u5bf9\u200b\u7981\u6b62\u200b\u7684\u200b\u3002\u200b\u56e0\u6b64\u200bFreeRTOS\u200b\u4f7f\u7528\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u6765\u200b\u7b80\u5355\u200b\u7c97\u66b4\u200b\u7684\u200b\u7981\u6b62\u200b\u5176\u5b83\u200b\u4efb\u52a1\u200b\u64cd\u4f5c\u200b\u961f\u5217\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u610f\u5473\u7740\u200b\u4efb\u52a1\u200b\u4e0d\u80fd\u200b\u5207\u6362\u200b\u5e76\u4e14\u200b\u4e0d\u51c6\u200b\u8c03\u7528\u200b\u53ef\u80fd\u200b\u5f15\u8d77\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u7684\u200bAPI\u200b\u51fd\u6570\u200b\u3002</li> <li>\u200b\u4f46\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\u5e76\u200b\u4e0d\u4f1a\u200b\u7981\u6b62\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u200b\u51fd\u6570\u200b\u4ecd\u7136\u200b\u53ef\u4ee5\u200b\u64cd\u4f5c\u200b\u961f\u5217\u200b\u4e8b\u4ef6\u200b\u5217\u8868\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u89e3\u9664\u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\u3001\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u8fdb\u884c\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\uff0c\u200b\u8fd9\u200b\u662f\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u7684\u200b\u3002\u200b\u4e8e\u662f\u200b\uff0c\u200b\u89e3\u51b3\u529e\u6cd5\u200b\u662f\u200b<code>\u200b\u4e0d\u4f46\u200b\u6302\u200b\u8d77\u200b\u8c03\u5ea6\u200b\u5668\u200b\uff0c\u200b\u8fd8\u8981\u200b\u7ed9\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\uff01</code><ul> <li>\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u6709\u200b\u4e24\u4e2a\u200b\u6210\u5458\u200b\u8ddf\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u6709\u5173\u200b\uff1axRxLock\u200b\u548c\u200bxTxLock\u3002<ul> <li>\u200b\u4e24\u4e2a\u200b\u6210\u5458\u200b\u53d8\u91cf\u200b\u4e3a\u200bqueueUNLOCKED\uff08\u200b\u5b8f\u200b\uff0c\u200b\u5b9a\u4e49\u200b\u4e3a\u200b-1\uff09\u200b\u65f6\u200b\uff0c\u200b\u8868\u793a\u200b\u961f\u5217\u200b\u672a\u200b\u4e0a\u9501\u200b\uff1b</li> <li>\u200b\u4e24\u4e2a\u200b\u6210\u5458\u200b\u53d8\u91cf\u200b\u4e3a\u200bqueueLOCKED_UNMODIFIED\uff08\u200b\u5b8f\u200b\uff0c\u200b\u5b9a\u4e49\u200b\u4e3a\u200b0\uff09\u200b\u65f6\u200b\uff0c\u200b\u8868\u793a\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u3002</li> </ul> </li> <li>\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u662f\u200b\u8c03\u7528\u200b\u5b8f\u200bprvLockQueue()\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u4ee3\u7801\u200b\u5f88\u200b\u7b80\u5355\u200b\uff0c\u200b\u5c06\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxRxLock\u200b\u548c\u200bxTxLock\u200b\u90fd\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bqueueLOCKED_UNMODIFIED\u3002</li> <li>\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u662f\u200b\u5982\u4f55\u200b\u8d77\u200b\u4f5c\u7528\u200b\u7684\u200b\uff1f<ul> <li>\u200b\u5f53\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u7a0b\u5e8f\u200b\uff08xQueueCRReceiveFromISR\u200b\u6216\u200bxQueueCRSendFromISR\u200b\u51fd\u6570\u200b\uff09\u200b\u64cd\u4f5c\u200b\u961f\u5217\u200b\u5e76\u4e14\u200b\u5bfc\u81f4\u200b\u963b\u585e\u200b\u7684\u200b\u4efb\u52a1\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u9996\u5148\u200b\u5224\u65ad\u200b\u8be5\u200b\u961f\u5217\u200b\u662f\u5426\u200b\u4e0a\u9501\u200b\uff0c\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u4e0a\u9501\u200b\uff0c\u200b\u5219\u200b\u89e3\u9664\u200b\u88ab\u200b\u963b\u585e\u200b\u7684\u200b\u4efb\u52a1\u200b\uff0c\u200b\u8fd8\u4f1a\u200b\u6839\u636e\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u8bf7\u6c42\u200b\u6807\u5fd7\u200b\uff1b</li> <li>\u200b\u5982\u679c\u200b\u961f\u5217\u200b\u5df2\u7ecf\u200b\u4e0a\u9501\u200b\uff0c\u200b\u5219\u200b\u4e0d\u4f1a\u200b\u89e3\u9664\u200b\u88ab\u200b\u963b\u585e\u200b\u7684\u200b\u4efb\u52a1\u200b\uff0c\u200b\u53d6\u800c\u4ee3\u4e4b\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u5c06\u200bxRxLock\u200b\u6216\u200bxTxLock\u200b\u52a0\u200b1\uff0c\u200b\u8868\u793a\u200b\u961f\u5217\u200b\u4e0a\u9501\u200b\u671f\u95f4\u200b\u51fa\u961f\u200b\u6216\u200b\u5165\u961f\u200b\u7684\u200b\u6570\u76ee\u200b\uff0c\u200b\u4e5f\u200b\u8868\u793a\u200b\u6709\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\u4e86\u200b\u3002</li> </ul> </li> <li>\u200b\u51fd\u6570\u200bprvUnlockQueue()\u200b\u7528\u4e8e\u200b\u89e3\u9664\u200b\u961f\u5217\u200b\u9501\u200b\uff0c\u200b\u5c06\u200b\u53ef\u4ee5\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\u7684\u200b\u4efb\u52a1\u200b\u63d2\u5165\u200b\u5230\u200b\u5c31\u7eea\u200b\u5217\u8868\u200b\uff0c\u200b\u89e3\u9664\u200b\u4efb\u52a1\u200b\u7684\u200b\u6700\u5927\u200b\u6570\u91cf\u200b\u7531\u200bxRxLock\u200b\u548c\u200bxTxLock\u200b\u6307\u5b9a\u200b\u3002</li> </ul> </li> </ul> </li> <li>\u200b\u7ecf\u8fc7\u200b\u4e00\u7cfb\u5217\u200b\u7684\u200b\u903b\u8f91\u200b\u5224\u65ad\u200b\uff0c\u200b\u53d1\u73b0\u200b\u672c\u200b\u4efb\u52a1\u200b\u8fd8\u662f\u200b\u8981\u200b\u8fdb\u5165\u200b\u963b\u585e\u72b6\u6001\u200b\uff0c\u200b\u5219\u200b\u8c03\u7528\u51fd\u6570\u200bvTaskPlaceOnEventList()\u200b\u6765\u200b\u5b9e\u73b0\u200b\u3002<ul> <li>\u200b\u7b2c\u4e00\u6b65\u200b\uff0c\u200b\u5c06\u200b\u4efb\u52a1\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5217\u8868\u200b\u9879\u200b\uff08\u200b\u4efb\u52a1\u200bTCB\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxEventListItem\uff09\u200b\u63d2\u5165\u200b\u5230\u200b\u961f\u5217\u200b\u7684\u200b\u7b49\u5f85\u200b\u5165\u961f\u200b\u5217\u8868\u200b\uff08\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxTasksWaitingToSend\uff09\u200b\u4e2d\u200b\uff1b</li> <li>\u200b\u7b2c\u4e8c\u6b65\u200b\uff0c\u200b\u5c06\u200b\u4efb\u52a1\u200b\u7684\u200b\u72b6\u6001\u200b\u5217\u8868\u200b\u9879\u200b\uff08\u200b\u4efb\u52a1\u200bTCB\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200bxStateListItem\uff09\u200b\u4ece\u200b\u5c31\u7eea\u200b\u5217\u8868\u200b\u4e2d\u200b\u5220\u9664\u200b\uff0c\u200b\u7136\u540e\u200b\u63d2\u5165\u200b\u5230\u200b\u5ef6\u65f6\u200b\u5217\u8868\u200b\u4e2d\u200b\uff0c<code>\u200b\u4efb\u52a1\u200b\u7684\u200b\u6700\u5927\u200b\u5ef6\u65f6\u200b\u65f6\u95f4\u200b\u653e\u5165\u200bxStateListItem.xItemValue</code>\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u6b21\u200b\u7cfb\u7edf\u200b\u8282\u62cd\u200b\u5b9a\u65f6\u5668\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u200b\u51fd\u6570\u200b\u4e2d\u200b\uff0c\u200b\u90fd\u200b\u4f1a\u200b\u68c0\u67e5\u200b\u8fd9\u4e2a\u200b\u503c\u200b\uff0c\u200b\u68c0\u6d4b\u200b\u4efb\u52a1\u200b\u662f\u5426\u200b\u8d85\u65f6\u200b\u3002</li> </ul> </li> <li>\u200b\u5f53\u200b\u4efb\u52a1\u200b\u6210\u529f\u200b\u963b\u585e\u200b\u5728\u200b\u7b49\u5f85\u200b\u5165\u961f\u200b\u64cd\u4f5c\u200b\u540e\u200b\uff0c\u200b\u5f53\u524d\u4efb\u52a1\u200b\u5c31\u200b\u6ca1\u6709\u200b\u5fc5\u8981\u200b\u518d\u200b\u5360\u7528\u200bCPU\u200b\u4e86\u200b\uff0c\u200b\u6240\u4ee5\u200b\u63a5\u4e0b\u6765\u200b\u89e3\u9664\u200b\u961f\u5217\u200b\u9501\u200b\u3001\u200b\u6062\u590d\u200b\u8c03\u5ea6\u200b\u5668\u200b\u3001\u200b\u8fdb\u884c\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\uff0c\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u5904\u4e8e\u200b\u6700\u9ad8\u200b\u4f18\u5148\u7ea7\u200b\u7684\u200b\u5c31\u7eea\u200b\u4efb\u52a1\u200b\u5c31\u200b\u4f1a\u200b\u88ab\u200b\u8fd0\u884c\u200b\u4e86\u200b\u3002</li> </ul> </li> </ul> </li> <li>\u200b\u6ce8\u610f\u200b\u7684\u200b\u7ec6\u8282\u200b\uff1a<ul> <li>\u200b\u961f\u5217\u200b\u7684\u200bxTasksWaitingToSend\u3001 xTasksWaitingToReceive\u200b\u90fd\u200b\u662f\u200b\u6dfb\u52a0\u200b\u5230\u200bpxDelayedTaskList\u200b\u548c\u200bpxOverflowDelayedTaskList\u200b\u961f\u5217\u200b\uff0c\u200b\u975e\u200b<code>xSuspendedTaskList\u3001xPendingReadyList\u3001pxReadyTasksLists\u200b\u961f\u5217\u200b</code></li> <li>\u200b\u53d1\u9001\u200b\u961f\u5217\u200b\u6d88\u606f\u200b\u65f6\u200b\uff0c\u200b\u5904\u7406\u200bxTasksWaitingToReceive\u200b\u5217\u8868\u200b</li> <li>\u200b\u63a5\u6536\u200b\u961f\u5217\u200b\u6d88\u606f\u200b\u65f6\u200b\uff0c\u200b\u5904\u7406\u200bxTasksWaitingToReceive\u200b\u5217\u8868\u200b</li> </ul> </li> </ol> <p>\u200b\u4fe1\u53f7\u91cf\u200b</p> <p>\u200b\u4e00\u822c\u200b\u7528\u6765\u200b\u8fdb\u884c\u200b\u8d44\u6e90\u7ba1\u7406\u200b\u548c\u200b\u4efb\u52a1\u200b\u95f4\u200b\u3001\u200b\u4efb\u52a1\u200b\u4e0e\u200b\u4e2d\u65ad\u200b\u95f4\u200b\u7684\u200b\u540c\u6b65\u200b\uff0cFreeRTOS \u200b\u4e2d\u200b\u7684\u200b\u4fe1\u53f7\u91cf\u200b\u5206\u4e3a\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u8ba1\u6570\u200b\u578b\u200b\u4fe1\u53f7\u91cf\u200b\u3001\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u548c\u200b\u9012\u5f52\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u3002</p> <ul> <li>\u200b\u4fe1\u53f7\u91cf\u200b\u521b\u5efa\u200b\u8c03\u7528\u200b\u7684\u200b\u5e95\u5c42\u200bAPI\u200b\u8ddf\u200b\u961f\u5217\u200b\u521b\u5efa\u200b\u662f\u200b\u540c\u4e00\u4e2a\u200b\uff0c\u200b\u53ea\u662f\u200b\u4f20\u5165\u200b\u53c2\u6570\u200b\u4e0d\u540c\u200b</li> <li>\u200b\u8fd9\u200b\u56db\u79cd\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u53e5\u67c4\u200b\u7c7b\u578b\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200bSemaphoreHandle_t\uff0c\u200b\u672c\u8d28\u200b\u4e0a\u200b\u662f\u200b\u961f\u5217\u200b\u53e5\u67c4\u200bQueueHandle_t</li> </ul> <pre><code>typedef QueueHandle_t SemaphoreHandle_t;\n</code></pre> <ol> <li> <p>\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b</p> <ul> <li>\u200b\u5b9e\u8d28\u200b\u4e0a\u200b\u662f\u200b\u4e00\u4e2a\u200b\u961f\u5217\u200b\u957f\u5ea6\u200b\u4e3a\u200b 1\uff0c\u200b\u961f\u5217\u200b\u9879\u200b\u957f\u5ea6\u200b\u4e3a\u200b 0 \u200b\u7684\u200b\u961f\u5217\u200b</li> <li>\u200b\u6ca1\u6709\u200b\u961f\u5217\u200b\u9879\u200b\u5b58\u50a8\u200b\u533a\u200b\uff0c\u200b\u901a\u8fc7\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u6210\u5458\u200b uxMessageWaiting\u200b\u6765\u200b\u5224\u65ad\u200b\u961f\u5217\u200b\u662f\u5426\u200b\u4e3a\u7a7a\u200b</li> <li>\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\u521b\u5efa\u200b\u540e\u200b\u662f\u200b\u65e0\u6548\u200b\u7684\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5148\u200b\u8c03\u7528\u200bAPI\u200b\u91ca\u653e\u200b\uff0c\u200b\u624d\u80fd\u200b\u4f7f\u7528\u200b</li> <li>\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u91ca\u653e\u200b\u5c31\u662f\u200b\u5411\u200b\u961f\u5217\u200b\u4e2d\u200b\u53d1\u9001\u200b\u6d88\u606f\u200b\uff0c\u200b\u4f46\u200b\u6d88\u606f\u200b\u4e3a\u200bNULL\uff0c\u200b\u963b\u585e\u200b\u65f6\u95f4\u200b\u4e3a\u200b0\uff0c\u200b\u540e\u200b\u5411\u200b\u5165\u961f\u200b\u3002\u200b\u5173\u952e\u5728\u4e8e\u200b\u5165\u961f\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200b uxMessageWaiting \u200b\u4f1a\u52a0\u200b\u4e00\u200b\uff0c\u200b\u4ece\u800c\u200b\u5224\u65ad\u200b\u961f\u5217\u200b\u65f6\u6ee1\u200b1\u200b\u8fd8\u662f\u200b\u7a7a\u200b0\u3002</li> </ul> <pre><code>// API \u200b\u529f\u80fd\u200b\nxSemaphoreCreateBinary()           // \u200b\u52a8\u6001\u521b\u5efa\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\nxSemaphoreCreateBinaryStatic() // \u200b\u9759\u6001\u200b\u521b\u5efa\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\n\nxSemaphoreGive()        // \u200b\u4efb\u52a1\u200b\u7ea7\u200b\u91ca\u653e\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\nxSemaphoreGiveFromISR() // \u200b\u4e2d\u65ad\u200b\u7ea7\u200b\u91ca\u653e\u200b\u4fe1\u53f7\u91cf\u200b\nxSemaphoreTake()        // \u200b\u4efb\u52a1\u200b\u7ea7\u200b\u83b7\u53d6\u200b\u4fe1\u53f7\u91cf\u200b\nxSemaphoreTakeFromISR() // \u200b\u4e2d\u65ad\u200b\u7ea7\u200b\u83b7\u53d6\u200b\u4fe1\u53f7\u91cf\u200b\nvSemaphoreDelete()      // \u200b\u5220\u9664\u200b\u4fe1\u53f7\u91cf\u200b\n\n// \u200b\u83b7\u53d6\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\u53ef\u4ee5\u200b\u8bbe\u7f6e\u200b\u963b\u585e\u200b\u65f6\u95f4\u200b\uff0c\u200b\u8bfb\u53d6\u200b\u6210\u529f\u200b\u540e\u200b uxMessageWaiting \u200b\u4f1a\u200b\u51cf\u4e00\u200b\n#define xSemaphoreTake( xSemaphore\uff0c xBlockTime )    xQueueSemaphoreTake( ( xSemaphore )\uff0c ( xBlockTime ) )\n</code></pre> </li> <li> <p>\u200b\u8ba1\u6570\u200b\u578b\u200b\u4fe1\u53f7\u91cf\u200b</p> <ul> <li>\u200b\u961f\u5217\u200b\u957f\u5ea6\u200b\u5927\u4e8e\u200b1\uff0c\u200b\u961f\u5217\u200b\u9879\u200b\u957f\u5ea6\u200b\u4e3a\u200b0</li> <li>\u200b\u540c\u6837\u200b\u901a\u8fc7\u200b\u961f\u5217\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6210\u5458\u200b uxMessageWaiting\u200b\u6765\u200b\u5224\u65ad\u200b\u6570\u91cf\u200b</li> <li>\u200b\u8ba1\u6570\u200b\u578b\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u91ca\u653e\u200b\u3001\u200b\u83b7\u53d6\u200b\u4e0e\u200b\u5220\u9664\u200b\u64cd\u4f5c\u200b\u4e0e\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\u76f8\u540c\u200b</li> </ul> <pre><code>// API  \u200b\u529f\u80fd\u200b\nxSemaphoreCreateCounting()       // \u200b\u52a8\u6001\u521b\u5efa\u200b\u8ba1\u6570\u200b\u578b\u200b\u4fe1\u53f7\u91cf\u200b\nxSemaphoreCreateCountingStatic() // \u200b\u9759\u6001\u200b\u521b\u5efa\u200b\u8ba1\u6570\u200b\u578b\u200b\u4fe1\u53f7\u91cf\u200b\n#define xSemaphoreCreateCounting(uxMaxCount\uff0c uxInitialCount) \\\nxQueueCreateCountingSemaphore((uxMaxCount)\uff0c (uxInitialCount))\n</code></pre> </li> <li> <p>\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b</p> <ul> <li>\u200b\u4e92\u65a5\u200b\u91cf\u200b\u5177\u6709\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b\u673a\u5236\u200b\uff0c\u200b\u53ea\u80fd\u200b\u7528\u200b\u5728\u200b\u4efb\u52a1\u200b\u4e2d\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u7528\u4e8e\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u200b\u51fd\u6570\u200b</li> <li>\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u200b\u51fd\u6570\u200b\u4e0d\u80fd\u200b\u56e0\u4e3a\u200b\u8981\u200b\u7b49\u5f85\u200b\u4e92\u65a5\u200b\u91cf\u200b\u800c\u200b\u8bbe\u7f6e\u200b\u963b\u585e\u200b\u65f6\u95f4\u200b\u8fdb\u5165\u200b\u963b\u585e\u200b\u6001\u200b</li> <li>\u200b\u961f\u5217\u200b\u957f\u5ea6\u200b\u4e3a\u200b1\uff0c\u200b\u961f\u5217\u200b\u9879\u200b\u957f\u5ea6\u200b\u4e3a\u200b0</li> <li>\u200b\u4efb\u52a1\u200b\u5728\u200b\u4f7f\u7528\u200b\u5b8c\u200b\u4e92\u65a5\u200b\u91cf\u200b\u540e\u200b\u5fc5\u987b\u200b\u91ca\u653e\u200b\uff0c\u200b\u5426\u5219\u200b\u5176\u4ed6\u200b\u8d44\u6e90\u200b\u65e0\u6cd5\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5373\u200b\u4e92\u65a5\u200b\u91cf\u200b\u662f\u200b\u4e00\u4e2a\u200b\u4e0d\u80fd\u200b\u88ab\u200b\u9500\u6bc1\u200b\u7684\u200b\u7279\u6b8a\u200b\u4fe1\u53f7\u91cf\u200b</li> </ul> <pre><code>// API  \u200b\u529f\u80fd\u200b\nxSemaphoreCreateMutex()           // \u200b\u52a8\u6001\u521b\u5efa\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\nxSemaphoreCreateMutexStatic() // \u200b\u9759\u6001\u200b\u521b\u5efa\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\n</code></pre> <ul> <li>\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u83b7\u53d6\u200b\u548c\u200b\u91ca\u653e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e0e\u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b\u6709\u4e9b\u200b\u533a\u522b\u200b\uff0c\u200b\u4e3b\u8981\u200b\u6d89\u53ca\u200b\u5230\u200b\u4f18\u5148\u7ea7\u200b\u7ee7\u627f\u200b</li> <li> <p>\u200b\u4f18\u5148\u7ea7\u200b\u7ffb\u8f6c\u200b</p> <ul> <li>\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u662f\u200b\u9632\u6b62\u51fa\u73b0\u200b\u4f18\u5148\u7ea7\u200b\u7ffb\u8f6c\u200b\u5bfc\u81f4\u200b\u5361\u6b7b\u200b\u7684\u200b\u60c5\u51b5\u200b<ul> <li>\u200b\u9488\u5bf9\u200b\u4e8e\u200b\u4e00\u4e2a\u200b\u516c\u5171\u8d44\u6e90\u200b\u88ab\u200b\u591a\u4e2a\u200b\u4efb\u52a1\u200b\u8c03\u7528\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b</li> </ul> </li> <li>\u200b\u4f18\u5148\u7ea7\u200b\u7ffb\u8f6c\u200b\u4e3b\u8981\u200b\u53d1\u751f\u200b\u5728\u200b\u5f53\u200b\u4e24\u4e2a\u200b\u4efb\u52a1\u200bH\u200b\u548c\u200bL\u200b\u5171\u7528\u200b\u4e00\u4e2a\u200b\u4fe1\u53f7\u91cf\u200b\u65f6\u200b\uff0c</li> <li>\u200b\u5f53\u200b\u4fe1\u53f7\u91cf\u200b\u4e3a\u4e8c\u503c\u200b\u578b\u200b\u65f6\u200b\uff0cL\u200b\u4f18\u5148\u200b\u83b7\u5f97\u200b\u4fe1\u53f7\u91cf\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u5c06\u200bH\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u62c9\u4f4e\u200b\u5230\u200b\u548c\u200b\u81ea\u8eab\u200b\u76f8\u540c\u200b\uff0c\u200b\u4f7f\u5f97\u200bM\u200b\u4efb\u52a1\u200b\u62a2\u5148\u200b\u4e8e\u200bH\u200b\u6267\u884c\u200b\uff0c\u200b\u51fa\u73b0\u200b\u4f18\u5148\u7ea7\u200b\u7ffb\u8f6c\u200b\uff08\u200b\u672a\u200b\u89e3\u51b3\u200b\u4e86\u200b\u4f18\u5148\u7ea7\u200b\u53cd\u8f6c\u200b\uff09</li> <li>\u200b\u5f53\u200b\u4fe1\u53f7\u91cf\u200b\u4e3a\u200b\u4e92\u65a5\u200b\u578b\u200b\u65f6\u200b\uff0cL\u200b\u4f18\u5148\u200b\u83b7\u5f97\u200b\u4fe1\u53f7\u91cf\u200b\u540e\u200b\uff0cH\u200b\u4f1a\u200b\u5c06\u200bL\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u62c9\u9ad8\u200b\u5230\u200b\u548c\u200b\u81ea\u8eab\u200b\u76f8\u540c\u200b\uff0c\u200b\u5c3d\u91cf\u907f\u514d\u200b\u4f18\u5148\u7ea7\u200b\u7ffb\u8f6c\u200b\uff08\u200b\u89e3\u51b3\u200b\u4e86\u200b\u4f18\u5148\u7ea7\u200b\u53cd\u8f6c\u200b\uff09</li> </ul> <p></p> </li> </ul> </li> <li> <p>\u200b\u603b\u7ed3\u200b</p> \u200b\u901a\u8baf\u200b\u65b9\u5f0f\u200b \u200b\u957f\u5ea6\u200b \u200b\u7ea6\u675f\u200b \u200b\u4f5c\u7528\u200b \u200b\u961f\u5217\u200b-\u200b\u503c\u200b\u4f20\u9012\u200b &gt;0 \u200b\u963b\u585e\u200b\u8bfb\u5199\u200b \u200b\u7528\u4e8e\u200b\u4efb\u52a1\u200b\u4e4b\u95f4\u200b\u4f20\u9012\u6570\u636e\u200b \u200b\u4e8c\u503c\u200b\u4fe1\u53f7\u91cf\u200b 1 \u200b\u4e00\u65b9\u200b\u53ea\u200b\u9700\u8981\u200b\u7533\u8bf7\u200b\uff0c\u200b\u53e6\u4e00\u65b9\u200b\u53ea\u200b\u9700\u8981\u200b\u91ca\u653e\u200b \u200b\u7528\u4e8e\u200b\u9501\u5b58\u200b1\u200b\u4e2a\u200b\u4e2d\u65ad\u200b\u4ee3\u8868\u200b\u8d44\u6e90\u200b\u7684\u200b\u5230\u8fbe\u200b/\u200b\u7528\u4e8e\u200b\u4efb\u52a1\u200b\u7684\u200b\u5f02\u6b65\u200b\u901a\u77e5\u200b \u200b\u8ba1\u6570\u200b\u578b\u200b\u4fe1\u53f7\u91cf\u200b &gt;1 \u200b\u4e00\u65b9\u200b\u53ea\u200b\u9700\u8981\u200b\u7533\u8bf7\u200b\uff0c\u200b\u53e6\u4e00\u65b9\u200b\u53ea\u200b\u9700\u8981\u200b\u91ca\u653e\u200b \u200b\u7528\u4e8e\u200b\u9501\u5b58\u200b\u82e5\u5e72\u4e2a\u200b\u4e2d\u65ad\u200b\u4ee5\u514d\u200b\u4e2d\u65ad\u200b\u4e22\u5931\u200b/\u200b\u7528\u4e8e\u200b\u540c\u6b65\u200b\u4ee3\u8868\u200b\u8d44\u6e90\u200b\u7684\u200b\u6570\u91cf\u200b \u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b 1 \u200b\u7533\u8bf7\u200b\u7684\u200b\u4e00\u65b9\u200b\u5fc5\u987b\u200b\u81ea\u5df1\u200b\u8fdb\u884c\u200b\u91ca\u653e\u200b \u200b\u7528\u4e8e\u200b\u4e92\u65a5\u200b\u8bbf\u95ee\u200b\u673a\u5236\u200b </li> </ol>"},{"location":"embedded_development/#422","title":"4.2.2. \u200b\u4e8b\u4ef6\u200b\u7ec4","text":"<ol> <li>FreeRTOS\u200b\u6e90\u7801\u200b\u63a2\u6790\u200b\u4e4b\u200b\u2014\u2014\u200b\u4e8b\u4ef6\u200b\u6807\u5fd7\u200b\u7ec4\u200b</li> </ol> <ol> <li> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u6982\u5ff5\u200b</p> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u901a\u5e38\u200b\u662f\u200b\u7531\u200b\u4e00\u7ec4\u200b\u4f4d\u200b\uff08bits\uff09\u200b\u7ec4\u6210\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6bcf\u200b\u4e00\u4f4d\u200b\u90fd\u200b\u5bf9\u5e94\u200b\u7740\u200b\u67d0\u4e2a\u200b\u7279\u5b9a\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u4f4d\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u6216\u200b\u6e05\u9664\u200b\uff0c\u200b\u8868\u793a\u200b\u76f8\u5e94\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u53d1\u751f\u200b\u6216\u200b\u672a\u200b\u53d1\u751f\u200b\u3002\u200b\u8fd9\u79cd\u200b\u4f4d\u200b\u7684\u200b\u7ec4\u5408\u200b\u5f62\u6210\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u200b\u7684\u200b\u96c6\u5408\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u4f4d\u200b\u90fd\u200b\u4ee3\u8868\u200b\u7740\u200b\u67d0\u4e2a\u200b\u7279\u5b9a\u200b\u7684\u200b\u72b6\u6001\u200b\u6216\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u89c6\u4e3a\u200b\u7531\u200b\u4e00\u7cfb\u5217\u200b\u4e8c\u8fdb\u5236\u4f4d\u200b\u6784\u6210\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u4f4d\u200b\u4ee3\u8868\u200b\u7740\u200b\u4e00\u4e2a\u200b\u72ec\u7acb\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u72b6\u6001\u200b\u3002</p> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4f4d\u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b\u4e00\u4e2a\u200b\u7279\u5b9a\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u6216\u200b\u72b6\u6001\u200b\uff0c\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u8fd9\u4e9b\u200b\u4e8b\u4ef6\u200b\u6216\u200b\u72b6\u6001\u200b\u6765\u200b\u8fdb\u884c\u200b\u76f8\u5e94\u200b\u7684\u200b\u5904\u7406\u200b\u3002\u200b\u901a\u8fc7\u200b\u8bbe\u7f6e\u200b\u6216\u200b\u6e05\u9664\u200b\u8fd9\u4e9b\u200b\u4f4d\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u89e6\u53d1\u200b\u6216\u200b\u53d6\u6d88\u200b\u76f8\u5e94\u200b\u7684\u200b\u4e8b\u4ef6\u5904\u7406\u200b\u903b\u8f91\u200b\u3002\u200b\u4e8b\u4ef6\u200b\u7ec4\u7684\u4f4d\u200b\u901a\u5e38\u200b\u7528\u4e8e\u200b\u6307\u793a\u200b\u67d0\u4e9b\u200b\u4e8b\u4ef6\u200b\u662f\u5426\u200b\u53d1\u751f\u200b\u3001\u200b\u662f\u5426\u200b\u5b8c\u6210\u200b\u6216\u200b\u662f\u5426\u200b\u9700\u8981\u200b\u8fdb\u4e00\u6b65\u200b\u5904\u7406\u200b\u3002\u200b\u8fd9\u79cd\u200b\u7075\u6d3b\u6027\u200b\u4f7f\u5f97\u200b\u4e8b\u4ef6\u200b\u7ec4\u6210\u200b\u4e3a\u200b\u4e00\u79cd\u200b\u5f3a\u5927\u200b\u7684\u200b\u5de5\u5177\u200b\uff0c\u200b\u7528\u4e8e\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u540c\u6b65\u200b\u3001\u200b\u901a\u4fe1\u200b\u548c\u200b\u534f\u4f5c\u200b\u3002</p> <p>\u200b\u5728\u200b\u4f7f\u7528\u200b\u4e8b\u4ef6\u200b\u7ec4\u65f6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u64cd\u4f5c\u200b\u5355\u72ec\u200b\u7684\u200b\u4f4d\u6765\u200b\u8868\u793a\u200b\u4e0d\u540c\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u6216\u200b\u72b6\u6001\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u590d\u6742\u200b\u7684\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u200b\u548c\u200b\u4e8b\u4ef6\u5904\u7406\u200b\u3002\u200b\u901a\u8fc7\u200b\u9002\u5f53\u200b\u5730\u200b\u8bbe\u7f6e\u200b\u548c\u200b\u6e05\u9664\u200b\u4f4d\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5b9e\u73b0\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u534f\u540c\u5de5\u4f5c\u200b\uff0c\u200b\u4ee5\u200b\u6ee1\u8db3\u200b\u7279\u5b9a\u200b\u7684\u200b\u5e94\u7528\u200b\u9700\u6c42\u200b\u3002\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u7684\u200b\u8fd9\u79cd\u200b\u4f4d\u200b\u7ea7\u522b\u200b\u7684\u200b\u63a7\u5236\u200b\u4f7f\u200b\u5176\u200b\u6210\u4e3a\u200b\u5904\u7406\u200b\u4efb\u52a1\u200b\u95f4\u901a\u4fe1\u200b\u548c\u200b\u540c\u6b65\u200b\u7684\u200b\u6709\u6548\u200b\u5de5\u5177\u200b\u3002</p> <ul> <li> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u7684\u200b\u4f4d\u6570\u200b\uff1a</p> <ul> <li> <p>\u200b\u5982\u679c\u200b configUSE_16_BIT_TICKS \u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b 1\uff08\u200b\u542f\u7528\u200b\uff09\uff0c\u200b\u5219\u200b\u4e8b\u4ef6\u200b\u7ec4\u6709\u200b16\u200b\u4f4d\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6700\u9ad8\u200b\u7684\u200b8\u200b\u4f4d\u200b\uff08\u200b\u4ece\u200b\u6700\u9ad8\u200b\u4f4d\u5230\u200b\u7b2c\u200b9\u200b\u4f4d\u200b\uff09\u200b\u7528\u4e8e\u200b\u5185\u6838\u200b\u7ba1\u7406\u200b\uff0c\u200b\u800c\u200b\u5269\u4e0b\u200b\u7684\u200b\u4f4e\u200b8\u200b\u4f4d\u200b\u7559\u7ed9\u200b\u7528\u6237\u200b\u81ea\u5b9a\u4e49\u200b\u4e8b\u4ef6\u200b\u3002</p> </li> <li> <p>\u200b\u5982\u679c\u200b configUSE_16_BIT_TICKS \u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b 0\uff08\u200b\u7981\u7528\u200b\uff09\uff0c\u200b\u5219\u200b\u4e8b\u4ef6\u200b\u7ec4\u6709\u200b32\u200b\u4f4d\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6700\u9ad8\u200b\u7684\u200b8\u200b\u4f4d\u200b\uff08\u200b\u4ece\u200b\u6700\u9ad8\u200b\u4f4d\u5230\u200b\u7b2c\u200b25\u200b\u4f4d\u200b\uff09\u200b\u7528\u4e8e\u200b\u5185\u6838\u200b\u7ba1\u7406\u200b\uff0c\u200b\u800c\u200b\u5269\u4e0b\u200b\u7684\u200b\u4f4e\u200b24\u200b\u4f4d\u200b\u7559\u7ed9\u200b\u7528\u6237\u200b\u81ea\u5b9a\u4e49\u200b\u4e8b\u4ef6\u200b\u3002</p> </li> </ul> </li> </ul> <p></p> </li> <li> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u548c\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u961f\u5217\u200b\u7684\u200b\u533a\u522b\u200b</p> <ol> <li> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\uff08Event Group\uff09\uff1a</p> <p>\u200b\u6982\u5ff5\u200b\uff1a\u200b\u4e8b\u4ef6\u200b\u7ec4\u662f\u200b\u7531\u200b\u591a\u4e2a\u200b\u4f4d\u200b\u7ec4\u6210\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u7528\u4e8e\u200b\u8868\u793a\u200b\u591a\u4e2a\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u72b6\u6001\u200b\u3002\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u7b49\u5f85\u200b\u4e8b\u4ef6\u200b\u7ec4\u4e2d\u200b\u7684\u200b\u7279\u5b9a\u200b\u4f4d\u200b\u6216\u4f4d\u200b\u7ec4\u5408\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u4efb\u52a1\u200b\u540c\u6b65\u200b\u3002</p> <p>\u200b\u7528\u9014\u200b\uff1a\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u5e38\u7528\u200b\u4e8e\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u901a\u77e5\u200b\u548c\u200b\u540c\u6b65\u200b\u3002\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u7b49\u5f85\u200b\u591a\u4e2a\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u4efb\u610f\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u540c\u65f6\u200b\u53d1\u751f\u200b\uff0c\u200b\u6216\u8005\u200b\u7b49\u5f85\u200b\u6240\u6709\u200b\u4e8b\u4ef6\u200b\u90fd\u200b\u53d1\u751f\u200b\u540e\u200b\u518d\u200b\u7ee7\u7eed\u6267\u884c\u200b\u3002</p> <p>\u200b\u7279\u70b9\u200b\uff1a\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u5141\u8bb8\u200b\u4efb\u52a1\u200b\u7b49\u5f85\u200b\u591a\u4e2a\u200b\u4e8b\u4ef6\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u66f4\u200b\u7075\u6d3b\u200b\u7684\u200b\u540c\u6b65\u200b\u673a\u5236\u200b\u3002</p> </li> <li> <p>\u200b\u4fe1\u53f7\u91cf\u200b\uff08Semaphore\uff09\uff1a</p> <p>\u200b\u6982\u5ff5\u200b\uff1a\u200b\u4fe1\u53f7\u91cf\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8ba1\u6570\u5668\u200b\uff0c\u200b\u7528\u4e8e\u200b\u63a7\u5236\u200b\u591a\u4e2a\u200b\u4efb\u52a1\u200b\u5bf9\u200b\u5171\u4eab\u8d44\u6e90\u200b\u7684\u200b\u8bbf\u95ee\u200b\u3002\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u503c\u200b\u8868\u793a\u200b\u53ef\u7528\u200b\u8d44\u6e90\u200b\u7684\u200b\u6570\u91cf\u200b\uff0c\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u8bf7\u6c42\u200b\u6216\u200b\u91ca\u653e\u200b\u8d44\u6e90\u200b\uff0c\u200b\u4fe1\u53f7\u91cf\u200b\u8d1f\u8d23\u200b\u8ffd\u8e2a\u200b\u53ef\u7528\u200b\u8d44\u6e90\u200b\u7684\u200b\u6570\u91cf\u200b\u3002</p> <p>\u200b\u7528\u9014\u200b\uff1a\u200b\u4fe1\u53f7\u91cf\u200b\u5e38\u7528\u200b\u4e8e\u200b\u63a7\u5236\u200b\u5171\u4eab\u8d44\u6e90\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u9632\u6b62\u200b\u591a\u4e2a\u200b\u4efb\u52a1\u200b\u540c\u65f6\u200b\u8bbf\u95ee\u5171\u4eab\u200b\u8d44\u6e90\u200b\uff0c\u200b\u4ee5\u200b\u907f\u514d\u200b\u7ade\u4e89\u200b\u6761\u4ef6\u200b\uff08Race Condition\uff09\u3002</p> <p>\u200b\u7279\u70b9\u200b\uff1a\u200b\u4fe1\u53f7\u91cf\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8ba1\u6570\u5668\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u4e8e\u200b\u63a7\u5236\u200b\u8d44\u6e90\u200b\u7684\u200b\u6570\u91cf\u200b\u548c\u200b\u5206\u914d\u200b\u3002</p> </li> <li> <p>\u200b\u961f\u5217\u200b\uff08Queue\uff09\uff1a</p> <p>\u200b\u6982\u5ff5\u200b\uff1a\u200b\u961f\u5217\u200b\u662f\u200b\u4e00\u4e2a\u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5728\u200b\u4efb\u52a1\u200b\u95f4\u200b\u4f20\u9012\u6570\u636e\u200b\u3002\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u6570\u636e\u200b\u53d1\u9001\u5230\u200b\u961f\u5217\u200b\uff0c\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u4efb\u52a1\u200b\u5219\u200b\u53ef\u4ee5\u200b\u4ece\u200b\u961f\u5217\u200b\u4e2d\u200b\u63a5\u6536\u200b\u8fd9\u4e9b\u200b\u6570\u636e\u200b\u3002</p> <p>\u200b\u7528\u9014\u200b\uff1a\u200b\u961f\u5217\u200b\u5e38\u7528\u200b\u4e8e\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u6570\u636e\u200b\u4f20\u9012\u200b\uff0c\u200b\u5141\u8bb8\u200b\u4efb\u52a1\u200b\u5f02\u6b65\u200b\u5730\u200b\u53d1\u9001\u200b\u548c\u200b\u63a5\u6536\u6570\u636e\u200b\uff0c\u200b\u5b9e\u73b0\u200b\u89e3\u200b\u8026\u200b\u548c\u200b\u901a\u4fe1\u200b\u3002</p> <p>\u200b\u7279\u70b9\u200b\uff1a\u200b\u961f\u5217\u200b\u662f\u200b\u4e00\u4e2a\u200b\u6570\u636e\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u4e8e\u200b\u5b58\u50a8\u200b\u548c\u200b\u4f20\u9012\u6570\u636e\u200b\uff0c\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u6570\u636e\u200b\u4f20\u9012\u200b\u662f\u200b\u5f02\u6b65\u200b\u7684\u200b\u3002</p> </li> <li> <p>\u200b\u533a\u522b\u200b\u603b\u7ed3\u200b\uff1a</p> <p>\u200b\u4e8b\u4ef6\u200b\u7ec4\u200b\u7528\u4e8e\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u901a\u77e5\u200b\u548c\u200b\u540c\u6b65\u200b\uff0c\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u7b49\u5f85\u200b\u591a\u4e2a\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u53d1\u751f\u200b\u3002</p> <p>\u200b\u4fe1\u53f7\u91cf\u200b\u7528\u4e8e\u200b\u63a7\u5236\u200b\u5bf9\u200b\u5171\u4eab\u8d44\u6e90\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u9632\u6b62\u200b\u591a\u4e2a\u200b\u4efb\u52a1\u200b\u540c\u65f6\u200b\u8bbf\u95ee\u200b\u8d44\u6e90\u200b\u3002</p> <p>\u200b\u961f\u5217\u200b\u7528\u4e8e\u200b\u4efb\u52a1\u200b\u95f4\u200b\u7684\u200b\u6570\u636e\u200b\u4f20\u9012\u200b\uff0c\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u5f02\u6b65\u200b\u5730\u200b\u53d1\u9001\u200b\u548c\u200b\u63a5\u6536\u6570\u636e\u200b\u3002</p> </li> </ol> </li> </ol>"},{"location":"embedded_development/#423","title":"4.2.3. \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668","text":"<ol> <li>FreeRTOS\u200b\u6e90\u7801\u200b\u63a2\u6790\u200b\u4e4b\u200b\u2014\u2014\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b</li> <li>FreeRTOS\u200b\u57fa\u7840\u200b\u4e94\u200b\uff1a\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b</li> </ol> <p>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u7684\u200b\u4f5c\u7528\u200b\uff1a\u200b\u5728\u200b\u6307\u5b9a\u200b\u7684\u200b\u65f6\u95f4\u200b\u5230\u6765\u200b\u65f6\u200b\u6267\u884c\u200b\u6307\u5b9a\u200b\u7684\u200b\u51fd\u6570\u200b\uff0c\u200b\u6216\u8005\u200b\u4ee5\u200b\u67d0\u4e2a\u200b\u9891\u7387\u200b\u5468\u671f\u6027\u5730\u200b\u6267\u884c\u200b\u67d0\u4e2a\u200b\u51fd\u6570\u200b\u3002\u200b\u88ab\u200b\u6267\u884c\u200b\u7684\u200b\u51fd\u6570\u200b\u53eb\u505a\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u3002</p> <p>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u7531\u200bFreeRTOS\u200b\u5185\u6838\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u786c\u4ef6\u200b\u652f\u6301\u200b\u3002\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u53ea\u6709\u200b\u5728\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u88ab\u200b\u8c03\u7528\u200b\u65f6\u624d\u200b\u9700\u8981\u200b\u5360\u7528\u200bCPU\u200b\u65f6\u95f4\u200b\u3002</p> <p>\u200b\u5728\u200bFreeRTOS\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\uff1a</p> <ul> <li> <p>\u200b\u5c06\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u7684\u200b\u6e90\u7801\u200b\uff08FreeRTOS/Source/timers.c\uff09\u200b\u6dfb\u52a0\u200b\u5230\u200b\u9879\u76ee\u200b\u4e2d\u200b</p> </li> <li> <p>\u200b\u5728\u200bFreeRTOSConfig.h\u200b\u4e2d\u200b\u5b9a\u4e49\u200bconfigUSE_TIMERS\u200b\u4e3a\u200b1</p> <ul> <li>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u7684\u200b\u4efb\u52a1\u200b\u4f18\u5148\u7ea7\u200b\u548c\u200b\u6808\u200b\u6df1\u5ea6\u200b\u662f\u200b\u5728\u200bFreeRTOSConfig.h\u200b\u4e2d\u200b\u901a\u8fc7\u200bconfigTIMER_TASK_PRIORITY\u200b\u548c\u200bconfigTIMER_TASK_STACK_DEPTH\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u5b8f\u200b\u914d\u7f6e\u200b\u7684\u200b\u3002</li> <li>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u547d\u4ee4\u200b\u961f\u5217\u200b\u7684\u200b\u957f\u5ea6\u200b\u5728\u200bFreeRTOSConfig.h\u200b\u4e2d\u200b\u4f7f\u7528\u200bconfigTIMER_QUEUE_LENGTH\u200b\u6765\u200b\u5b9a\u4e49\u200b\u3002</li> </ul> </li> </ul> <p>\u3010\u200b\u6ce8\u610f\u200b\u3011</p> <ul> <li>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u662f\u200b\u5728\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u4e2d\u200b\u88ab\u200b\u6267\u884c\u200b\u7684\u200b\uff0c\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u662f\u200b\u5728\u200bvTaskStartScheduler()\u200b\u51fd\u6570\u200b\u5185\u90e8\u200b\u7531\u200b\u5185\u6838\u200b\u81ea\u52a8\u200b\u521b\u5efa\u200b\u7684\u200b\u3002<ul> <li>\u200b\u5f53\u200b\u8c03\u7528\u200bvTaskStartScheduler()\u200b\u6765\u200b\u5f00\u542f\u200b\u8c03\u5ea6\u200b\u5668\u540e\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\u5185\u90e8\u200b\u4f7f\u7528\u200bxTimerCreateTimerTask()\u200b\u6765\u200b\u521b\u5efa\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u3002</li> </ul> </li> <li>\u200b\u4e0d\u8981\u200b\u5728\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u4e00\u4e9b\u200b \u200b\u5bfc\u81f4\u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\u7684\u200b\u51fd\u6570\u200b\u6216\u200b\u4ee3\u7801\u200b\uff0c\u200b\u4f8b\u5982\u200bvTaskDelay()\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u5bfc\u81f4\u200bFreeRTOS\u200b\u540e\u53f0\u4efb\u52a1\u200b\u8fdb\u5165\u200b\u5230\u200b\u963b\u585e\u72b6\u6001\u200b\u3002</li> <li>\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u901a\u5e38\u200b\u4f7f\u7528\u200b\u4e00\u4e2a\u200b\u53eb\u505a\u200b xTimerList \u200b\u7684\u200b\u94fe\u8868\u200b\u8fdb\u884c\u200b\u7ba1\u7406\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5b9a\u65f6\u5668\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5230\u671f\u200b\u65f6\u95f4\u200b\u6233\u200b\uff08\u200b\u901a\u5e38\u200b\u662f\u200b\u7cfb\u7edf\u200b\u6ef4\u7b54\u200b\u65f6\u95f4\u200b\u52a0\u4e0a\u200b\u5b9a\u65f6\u5668\u200b\u7684\u200b\u5ef6\u8fdf\u65f6\u95f4\u200b\uff09\u3002\u200b\u94fe\u8868\u200b\u6309\u200b\u5230\u671f\u200b\u65f6\u95f4\u200b\u6392\u5e8f\u200b\uff0c\u200b\u786e\u4fdd\u200b\u6bcf\u6b21\u200b\u5524\u9192\u200b\u65f6\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u90fd\u200b\u80fd\u200b\u5904\u7406\u200b\u5373\u5c06\u200b\u5230\u671f\u200b\u7684\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b<ul> <li>\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\u7ef4\u62a4\u200b\u7684\u200bpxDelayedTaskList\u200b\u94fe\u8868\u200b\u662f\u200b\u4e0d\u200b\u6392\u5e8f\u200b\u7684\u200b\uff0c\u200b\u5207\u6362\u200b\u4efb\u52a1\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u904d\u5386\u200b\u5217\u8868\u200b\uff0c\u200b\u5904\u7406\u200b\u8d85\u65f6\u200b\u7684\u200b\u4efb\u52a1\u200b</li> </ul> </li> </ul> <p>\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u7684\u200b\u76f8\u5173\u200bAPI\u200b\u672c\u8d28\u200b\u4e0a\u200b\u662f\u200b<code>\u200b\u64cd\u4f5c\u200b\u961f\u5217\u200b\u7684\u200bAPI</code>\u3002</p> <ul> <li>\u200b\u5f53\u200bFreeRTOS\u200b\u8c03\u5ea6\u200b\u5668\u200b\u542f\u52a8\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u9664\u4e86\u200b\u81ea\u52a8\u200b\u521b\u5efa\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u5916\u200b\uff0c\u200b\u8fd8\u4f1a\u200b\u81ea\u52a8\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u547d\u4ee4\u200b\u961f\u5217\u200b\u3002</li> <li>\u200b\u5728\u200b\u7528\u6237\u200b\u4efb\u52a1\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u76f8\u5173\u200b\u7684\u200bAPI\uff0c\u200b\u4f8b\u5982\u200b\u542f\u52a8\u200b\u5b9a\u65f6\u5668\u200b\uff0c\u200b\u505c\u6b62\u200b\u5b9a\u65f6\u5668\u200b\uff0c\u200b\u590d\u4f4d\u200b\u5b9a\u65f6\u5668\u200b\uff0c\u200b\u672c\u8d28\u200b\u4e0a\u200b\u5c31\u662f\u200b\u901a\u8fc7\u200b\u8fd9\u4e2a\u200b\u961f\u5217\u200b\u6765\u200b\u5411\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u53d1\u9001\u200b\u76f8\u5173\u200b\u6d88\u606f\u200b\u3002</li> </ul> <p>\u200b\u6240\u4ee5\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u5927\u90e8\u5206\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u963b\u585e\u72b6\u6001\u200b\uff0c\u200b\u53ea\u6709\u200b\u5f53\u200b\u7528\u6237\u200b\u53d1\u9001\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u547d\u4ee4\u200b\u6216\u8005\u200b\u4e00\u4e2a\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u5b9a\u65f6\u5668\u200b\u5230\u671f\u200b\u9700\u8981\u200b\u6267\u884c\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u65f6\u200b\uff0c\u200b\u624d\u200b\u4f1a\u200b\u88ab\u200b\u5524\u9192\u200b\u8fdb\u5165\u200b\u5c31\u7eea\u200b\u72b6\u6001\u200b\u3002</p> <p>\u200b\u90a3\u4e48\u200b\u4e3a\u4ec0\u4e48\u200b\u8bf4\u200b\u4e0d\u80fd\u200b\u5728\u200b\u5b9a\u65f6\u5668\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u8ba9\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u963b\u585e\u200b\u7684\u200b\u4ee3\u7801\u200b\u5462\u200b\uff1f</p> <ul> <li>\u200b\u56e0\u4e3a\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u7684\u200b\u72b6\u6001\u200b\u53ea\u200b\u5e94\u8be5\u200b\u7531\u200b\u5185\u6838\u200b\u6216\u8005\u200b\u5b9a\u65f6\u5668\u200bAPI\u200b\u6765\u200b\u63a7\u5236\u200b\u800c\u200b\u4e0d\u80fd\u200b\u7531\u200b\u7528\u6237\u200b\u4ee3\u7801\u200b\u63a7\u5236\u200b\uff0c\u200b\u8fd9\u6837\u200b\u624d\u80fd\u200b\u4fdd\u8bc1\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u7684\u200b\u80fd\u200b\u6b63\u5e38\u200b\u4f7f\u7528\u200b\u3002</li> </ul> <p></p>"},{"location":"embedded_development/#43","title":"4.3. \u200b\u9501","text":"<p>\u200b\u5728\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u65f6\u200b\uff0c\u200b\u6709\u200b\u7684\u200b\u4ee3\u7801\u200b\u5f00\u59cb\u200b\u6267\u884c\u200b\uff0c\u200b\u662f\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u88ab\u200b\u6253\u65ad\u200b\u7684\u200b\uff0c\u200b\u8fd9\u90e8\u5206\u200b\u7684\u200b\u4ee3\u7801\u200b\u4e5f\u200b\u53eb\u4f5c\u200b\u4e34\u754c\u200b\u6bb5\u200b\u4ee3\u7801\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u4e34\u754c\u200b\u533a\u200b\u4fdd\u62a4\u200b\u7684\u200b\u505a\u6cd5\u200b\u4e5f\u200b\u53eb\u200b\u9501\u200b\u673a\u5236\u200b\u3002</p> <ul> <li>FreeRTOS \u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200b \u200b\u5355\u6838\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\u5373\u53ef\u200b\u6709\u6548\u200b\u4fdd\u8bc1\u200b\u539f\u5b50\u200b\u6027\u200b\uff0c\u200b\u6545\u200b\u901a\u8fc7\u200b\u5f00\u5173\u200b\u4e2d\u65ad\u200b\u6765\u200b\u5b9e\u73b0\u200b\u9501\u200b\u673a\u5236\u200b<ul> <li>\u200b\u82e5\u7528\u200b\u539f\u5b50\u200b\u6307\u4ee4\u200b\u5b9e\u73b0\u200b\u9501\u200b\u673a\u5236\u200b\uff0c\u200b\u90e8\u5206\u200b\u4f4e\u200b\u6027\u80fd\u200b\u7684\u200b\u786c\u4ef6\u200b\u4e0d\u200b\u652f\u6301\u200b\uff0c<code>\u200b\u4e0d\u200b\u6ee1\u8db3\u200bFreeRTOS\u200b\u4ee5\u200b\u6700\u5c0f\u200b\u590d\u6742\u5ea6\u200b\u8986\u76d6\u200b\u6700\u5927\u200b\u786c\u4ef6\u200b\u8303\u56f4\u200b\uff0c\u200b\u540c\u65f6\u200b\u6ee1\u8db3\u200b\u5b9e\u65f6\u6027\u200b\u9700\u6c42\u200b\u7684\u200b\u7406\u5ff5\u200b</code></li> <li>FreeRTOS \u200b\u7684\u200b\u4e34\u754c\u200b\u533a\u200b\u901a\u5e38\u200b\u6781\u77ed\u200b\uff08\u200b\u5982\u200b\u64cd\u4f5c\u200b\u94fe\u8868\u200b\u3001\u200b\u8ba1\u6570\u5668\u200b\u589e\u51cf\u200b\uff09\uff0c\u200b\u5173\u95ed\u200b\u4e2d\u65ad\u200b\u7684\u200b\u4ee3\u4ef7\u200b\u53ef\u200b\u63a5\u53d7\u200b</li> </ul> </li> </ul> <p>FreeRTOS\u200b\u53ef\u4ee5\u200b\u8ba4\u4e3a\u200b\u5b58\u5728\u200b\u4e09\u79cd\u200b\u9501\u200b\u673a\u5236\u200b\uff1a\u200b\u8c03\u5ea6\u200b\u9501\u200b\u3001\u200b\u4e2d\u65ad\u200b\u9501\u200b\u3001\u200b\u4e92\u65a5\u200b\u9501\u200b\uff1a</p> <ol> <li> <p>\u200b\u4e2d\u65ad\u200b\u9501\u200b</p> <p>\u200b\u987e\u540d\u601d\u4e49\u200b\uff0c\u200b\u4e2d\u65ad\u200b\u9501\u200b\u7684\u200b\u610f\u601d\u200b\u662f\u200b\u9632\u6b62\u200b\u7a0b\u5e8f\u200b\u8fdb\u884c\u200b\u4e2d\u65ad\u200b\u5207\u6362\u200b\uff0c\u200b\u5373\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u88ab\u200b\u5176\u4ed6\u200b\u4e2d\u65ad\u200b\u6253\u65ad\u200b</p> <p>\u200b\u91cd\u8981\u200b\u51fd\u6570\u200b\u5982\u4e0b\u200b:</p> <pre><code>// portENTER_CRITICAL() \u200b\u548c\u200bportEXIT_CRITICAL() \u200b\u51fd\u6570\u200b\u5fc5\u987b\u200b\u662f\u200b\u6210\u200b\u5bf9\u200b\u8c03\u7528\u200b\n// portDISABLE_INTERRUPTS() \u200b\u548c\u200bportENABLE_INTERRUPTS() \u200b\u662f\u200b\u53ef\u4ee5\u200b\u4e0d\u6210\u200b\u5bf9\u200b\u51fa\u73b0\u200b\u7684\u200b\n#define portDISABLE_INTERRUPTS() vPortRaiseBASEPRI() // \u200b\u8fdb\u200b\u4e34\u754c\u200b\u533a\u200b\n#define portENABLE_INTERRUPTS() vPortSetBASEPRI(0)   // \u200b\u9000\u51fa\u200b\u4e34\u754c\u200b\u533a\u200b\n\n#define portENTER_CRITICAL() vPortEnterCritical() // \u200b\u8fdb\u200b\u4e34\u754c\u200b\u533a\u200b\n#define portEXIT_CRITICAL() vPortExitCritical()   // \u200b\u9000\u51fa\u200b\u4e34\u754c\u200b\u533a\u200b\n\n#define portSET_INTERRUPT_MASK_FROM_ISR() ulPortRaiseBASEPRI()  // \u200b\u8fdb\u200b\u4e34\u754c\u200b\u533a\u200b\n#define portCLEAR_INTERRUPT_MASK_FROM_ISR(x) vPortSetBASEPRI(x) // \u200b\u9000\u51fa\u200b\u4e34\u754c\u200b\u533a\u200b\n\n// \u3010basepri\u200b\u5bc4\u5b58\u5668\u200b\u3011\u200b\u5982\u679c\u200b\u5411\u200bbasepri\u200b\u5bc4\u5b58\u5668\u200b\u5199\u200b0\u200b\u7684\u8bdd\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u505c\u6b62\u200b\u4e2d\u65ad\u200b\u5c4f\u853d\u200b\uff0c\n// \u200b\u5982\u679c\u200b\u8981\u200b\u5c4f\u853d\u200b\u4f18\u5148\u7ea7\u200b\u4e0d\u200b\u9ad8\u4e8e\u200bxx\u200b\u7684\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u5219\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u8be5\u200b\u4f18\u5148\u7ea7\u200b\u4f20\u7ed9\u200b\u8fd9\u4e2a\u200b\u53c2\u6570\u200b\u3002\n// \u200b\u82e5\u200b\u914d\u7f6e\u200b\u7684\u200b\u53c2\u6570\u200b\u4e3a\u200bconfigLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY\u200b\u503c\u4e3a\u200b4\uff0c\n// \u200b\u5219\u200b\u8868\u793a\u200b\u5c4f\u853d\u200b\u4f18\u5148\u7ea7\u200b\u4e0d\u200b\u9ad8\u4e8e\u200b4\u200b\u7684\u200b\u4e2d\u65ad\u200b\u3002\u200b\u5373\u200b\u5c4f\u853d\u200bPenSV\u200b\u548c\u200bsystick\u200b\u4e2d\u65ad\u200b\u3002\n#define configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY    0x4\n</code></pre> </li> <li> <p>\u200b\u8c03\u5ea6\u200b\u9501\u200b</p> <ul> <li> <p>\u200b\u8c03\u5ea6\u200b\u9501\u200b\u7684\u200b\u610f\u601d\u200b\u662f\u200b\u9632\u6b62\u200b\u7a0b\u5e8f\u200b\u8fdb\u884c\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u3002\u200b\u5f53\u6709\u200b\u4e00\u4e9b\u200b\u6570\u636e\u200b\u662f\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u7684\u8bdd\u200b\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8c03\u5ea6\u200b\u9501\u6765\u200b\u4fdd\u8bc1\u200b</p> <p>\u200b\u91cd\u8981\u200b\u7684\u200b\u51fd\u6570\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>vTaskSuspendAll(void); // \u200b\u5f00\u542f\u200b\u8c03\u5ea6\u200b\u9501\u200b\uff08\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u8c03\u5ea6\u200b\uff09\nxTaskResumeAll(void);  // \u200b\u5173\u95ed\u200b\u8c03\u5ea6\u200b\u9501\u200b\uff08\u200b\u5141\u8bb8\u200b\u8c03\u5ea6\u200b\uff09\n// vTaskSuspendAll\u200b\u548c\u200bxTaskResumeAll\u200b\u5185\u90e8\u200b\u4f1a\u200b\u7ef4\u62a4\u200b\u4e00\u4e2a\u200b\u53d8\u91cf\u200bxTaskResumeAll\uff0c\n// \u200b\u6302\u8d77\u200b\u81ea\u589e\u200b\uff0c\u200b\u8c03\u5ea6\u200b\u5219\u200b\u81ea\u51cf\u200b\n// \u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u65f6\u4f1a\u200b\u5148\u200b\u68c0\u67e5\u4e00\u4e0b\u200b\u53d8\u91cf\u200buxSchedulerSuspended\uff0c\n// \u200b\u5982\u679c\u200b\u8be5\u200b\u53d8\u91cf\u200b\u4e3a\u200b\u975e\u200b\u96f6\u200b\u3002\u200b\u5219\u200b\u8868\u793a\u200b\u5f53\u524d\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u8fdb\u884c\u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\n</code></pre> </li> <li> <p>\u200b\u53e6\u5916\u200b\uff0c\u200b\u8c03\u5ea6\u200b\u9501\u200b\u53ea\u662f\u200b\u7981\u6b62\u200b\u4e86\u200b\u8c03\u5ea6\u200b\u5668\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u5e76\u200b\u6ca1\u6709\u200b\u5173\u95ed\u200b\u4efb\u4f55\u200b\u4e2d\u65ad\u200b</p> </li> </ul> </li> <li> <p>\u200b\u4e92\u65a5\u200b\u9501\u200b</p> <ul> <li> <p>\u200b\u5f53\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u8bbf\u95ee\u200b\u67d0\u4e9b\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u540c\u65f6\u200b\u6539\u53d8\u200b\u5171\u4eab\u8d44\u6e90\u200b\u7684\u200b\u60c5\u51b5\u200b</p> <ul> <li>\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u9020\u6210\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u51fa\u73b0\u5f02\u5e38\u200b</li> <li>\u200b\u4e3a\u4e86\u200b\u9632\u6b62\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u51fa\u73b0\u200b\uff0c\u200b\u589e\u52a0\u200b\u4e86\u200b\u4e92\u65a5\u200b\u9501\u200b\u7684\u200b\u6982\u5ff5\u200b  </li> </ul> </li> <li> <p>\u200b\u4e92\u65a5\u200b\u9501\u200b\u662f\u200b\u4f9d\u9760\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u6765\u200b\u5b9e\u73b0\u200b\u7684\u200b</p> </li> </ul> </li> </ol>"},{"location":"embedded_development/#44","title":"4.4. \u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u4e0e\u200b\u94a9\u5b50\u200b\u51fd\u6570","text":"<ol> <li>\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u53ca\u200b\u94a9\u5b50\u200b\u51fd\u6570\u200b</li> </ol>"},{"location":"embedded_development/#45","title":"4.5. \u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u7684\u200b\u94a9\u5b50\u200b\u51fd\u6570\u200b\u4e0e\u200b\u534f\u7a0b\u200b\uff08\u200b\u5df2\u200b\u629b\u5f03\u200b\uff09","text":"<ol> <li>FreeRTOS\u200b\u4e2d\u200bcroutine\u200b\u6e90\u6587\u4ef6\u200b\u5206\u6790\u200b</li> <li>\u200b\u534f\u7a0b\u200b</li> </ol>"},{"location":"embedded_development/#5","title":"5. \u200b\u534f\u8bae","text":""},{"location":"embedded_development/#51","title":"5.1. \u200b\u4ee5\u592a\u7f51\u200b\u534f\u8bae\u200b\u6808","text":"<ol> <li>\u200b\u7269\u7406\u5c42\u200b\uff1a\u200b\u5728\u200b\u8bbe\u5907\u200b\u4e4b\u95f4\u200b\u4f20\u8f93\u200b\u6bd4\u7279\u6d41\u200b\uff0c\u200b\u89c4\u5b9a\u200b\u4e86\u200b\u7535\u5e73\u200b\u3001\u200b\u901f\u5ea6\u200b\u548c\u200b\u7535\u7f06\u200b\u9488\u811a\u200b\u3002</li> <li>\u200b\u6570\u636e\u200b\u94fe\u8def\u5c42\u200b\uff1a\u200b\u5c06\u200b\u6bd4\u7279\u200b\u7ec4\u5408\u6210\u200b\u5b57\u8282\u200b\uff0c\u200b\u518d\u200b\u5c06\u200b\u5b57\u8282\u200b\u7ec4\u5408\u6210\u200b\u5e27\u200b\uff0c\u200b\u4f7f\u7528\u200b\u94fe\u8def\u5c42\u200b\u5730\u5740\u200b(\u200b\u4ee5\u592a\u7f51\u200b\u4f7f\u7528\u200bMAC\u200b\u5730\u5740\u200b)\u200b\u6765\u200b\u8bbf\u95ee\u200b\u4ecb\u8d28\u200b\uff0c\u200b\u5e76\u200b\u8fdb\u884c\u200b\u5dee\u9519\u200b\u68c0\u6d4b\u200b\u3002</li> <li>\u200b\u7f51\u7edc\u5c42\u200b\uff1a\u200b\u63d0\u4f9b\u200b\u903b\u8f91\u200b\u5730\u5740\u200b\uff0c\u200b\u4f9b\u200b\u8def\u7531\u5668\u200b\u786e\u5b9a\u200b\u8def\u5f84\u200b\u3002</li> <li>\u200b\u4f20\u8f93\u5c42\u200b\uff1a\u200b\u63d0\u4f9b\u200b\u9762\u5411\u200b\u8fde\u63a5\u200b\u6216\u975e\u200b\u9762\u5411\u200b\u8fde\u63a5\u200b\u7684\u200b\u6570\u636e\u200b\u4f20\u9012\u200b\u4ee5\u53ca\u200b\u8fdb\u884c\u200b\u91cd\u4f20\u200b\u524d\u200b\u7684\u200b\u5dee\u9519\u200b\u68c0\u6d4b\u200b\u3002</li> <li>\u200b\u4f1a\u8bdd\u5c42\u200b\uff1a\u200b\u8d1f\u8d23\u200b\u5efa\u7acb\u200b\u3001\u200b\u7ba1\u7406\u200b\u548c\u200b\u7ec8\u6b62\u200b\u8868\u793a\u5c42\u200b\u5b9e\u4f53\u200b\u4e4b\u95f4\u200b\u7684\u200b\u901a\u4fe1\u200b\u4f1a\u8bdd\u200b\u3002\u200b\u8be5\u5c42\u200b\u7684\u200b\u901a\u4fe1\u200b\u7531\u200b\u4e0d\u540c\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u4e4b\u95f4\u200b\u7684\u200b\u670d\u52a1\u200b\u8bf7\u6c42\u200b\u548c\u200b\u54cd\u5e94\u200b\u7ec4\u6210\u200b\u3002</li> <li>\u200b\u8868\u793a\u5c42\u200b\uff1a\u200b\u63d0\u4f9b\u200b\u5404\u79cd\u200b\u7528\u4e8e\u200b\u5e94\u7528\u5c42\u200b\u6570\u636e\u200b\u7684\u200b\u7f16\u7801\u200b\u548c\u200b\u8f6c\u6362\u200b\u529f\u80fd\u200b\uff0c\u200b\u786e\u4fdd\u200b\u4e00\u4e2a\u200b\u7cfb\u7edf\u200b\u7684\u200b\u5e94\u7528\u5c42\u200b\u53d1\u9001\u200b\u7684\u200b\u6570\u636e\u200b\u80fd\u200b\u88ab\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7cfb\u7edf\u200b\u7684\u200b\u5e94\u7528\u5c42\u200b\u8bc6\u522b\u200b\u3002</li> <li>\u200b\u5e94\u7528\u5c42\u200b\uff1aOS\u200b\u53c2\u8003\u6a21\u578b\u200b\u4e2d\u200b\u6700\u9760\u8fd1\u200b\u7528\u6237\u200b\u7684\u200b\u4e00\u5c42\u200b\uff0c\u200b\u4e3a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u7f51\u7edc\u670d\u52a1\u200b\u3002</li> </ol>"},{"location":"embedded_development/#511","title":"5.1.1. \u200b\u7269\u7406\u5c42","text":"<p>\u200b\u7269\u7406\u5c42\u200b\u5927\u81f4\u200b\u53ef\u4ee5\u200b\u5206\u4e3a\u200b</p> <ul> <li>xMII\u200b\u4ecb\u8d28\u200b\u65e0\u5173\u200b\u63a5\u53e3\u200b</li> <li>PCS\u200b\u7269\u7406\u200b\u7f16\u7801\u200b\u5b50\u5c42\u200b<ul> <li>\u200b\u4fe1\u9053\u7f16\u7801\u200b</li> </ul> </li> <li>PMA\u200b\u7269\u7406\u4ecb\u8d28\u200b\u8fde\u63a5\u200b\u5c42\u200b<ul> <li>\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u4e32\u200b\u5e76\u200b\u8f6c\u6362\u200b</li> </ul> </li> <li>PMD\u200b\u7269\u7406\u4ecb\u8d28\u200b\u76f8\u5173\u200b\u5c42\u200b<ul> <li>\u200b\u8d1f\u8d23\u200b\u5c06\u200b\u4e32\u884c\u200b\u4fe1\u53f7\u200b\u8f6c\u200b\u5230\u200b\u76f8\u5e94\u200b\u7684\u200b\u7269\u7406\u4ecb\u8d28\u200b\u4e0a\u200b</li> </ul> </li> <li>MDI\u200b\u63a5\u53e3\u200b<ul> <li>MDI\u200b\u5c31\u662f\u200b\u8fde\u63a5\u200bPHY\u200b\u82af\u7247\u200b\u548c\u200b\u7269\u7406\u4ecb\u8d28\u200b\u7684\u200b\u63a5\u53e3\u200b\uff0c\u200b\u5e38\u89c1\u200b\u7684\u200b\u662f\u200bRJ45\u200b\u63a5\u53e3\u200b<ul> <li>\u200b\u767e\u5146\u200b\u7f51\u65f6\u200b\uff0c\u200b\u56db\u6839\u200b\u7ebf\u200b\uff0c\u200b\u4e24\u5bf9\u200b\u5dee\u5206\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u53ea\u7528\u200b\u4e86\u200bRJ45\u200b\u63a5\u53e3\u200b\u7684\u200b 1\uff0c2\uff0c3\uff0c6\u200b\u7ebf\u200b</li> <li>\u200b\u5343\u5146\u200b\u7f51\u65f6\u200b\uff0c \u200b\u5171\u200b8\u200b\u6839\u7ebf\u200b\uff0c\u200b\u56db\u5bf9\u200b\u5dee\u5206\u200b\u4fe1\u53f7\u200b\uff0c \u200b\u7528\u200b\u4e86\u200bRJ45\u200b\u63a5\u53e3\u200b\u7684\u200b8\u200b\u6839\u7ebf\u200b\uff08RJ45\u200b\u63a5\u53e3\u200b\u603b\u5171\u200b8\u200b\u6839\u7ebf\u200b\uff09</li> </ul> </li> <li>RJ45\u200b\u63a5\u53e3\u200b\u4e0a\u200b\u7684\u200b\u4e24\u4e2a\u200b\u706f\u200b<ul> <li>\u200b\u7eff\u706f\u200b\uff1a\u200b\u957f\u4eae\u200b\uff0c\u200b\u8868\u793a\u200b\u94fe\u8def\u200b\u5b8c\u6574\u200b</li> <li>\u200b\u9ec4\u706f\u200b\uff1a\u200b\u95ea\u70c1\u200b\uff0c\u200b\u8868\u793a\u200b\u6709\u200b\u6570\u636e\u200b\u6536\u53d1\u200b</li> </ul> </li> </ul> </li> <li> <p>MEDIUM\u200b\u7269\u7406\u4ecb\u8d28\u200b</p> <ul> <li>\u200b\u5373\u200b\u7f51\u7ebf\u200b\u6216\u200b\u5149\u7ea4\u200b</li> </ul> </li> <li> <p>\u200b\u81ea\u200b\u534f\u5546\u200b Auto_negotiation</p> <ul> <li> <p>\u200b\u81ea\u200b\u534f\u5546\u200b\u4e00\u822c\u200b\u662f\u200b\u5728\u200b\u7269\u7406\u5c42\u200b\u5b8c\u6210\u200b\u7684\u200b\u3002\u200b\u4f46\u662f\u200b\u5177\u4f53\u200b\u5728\u200bPHY\u200b\u7684\u200b\u54ea\u200b\u4e00\u5c42\u200b\u5b8c\u6210\u200b\uff0c\u200b\u7531\u200b\u5177\u4f53\u200b\u7269\u7406\u4ecb\u8d28\u200b\u89c4\u8303\u200b\u51b3\u5b9a\u200b\u3002\u200b\u57fa\u672c\u539f\u7406\u200b\u5c31\u662f\u200b\u5c06\u200b\u81ea\u200b\u534f\u5546\u200b\u7684\u200b\u4fe1\u606f\u200b\u901a\u8fc7\u200b\u4e00\u4e32\u200b\u8109\u51b2\u5e8f\u5217\u200b\u53d1\u9001\u200b\u51fa\u53bb\u200b\uff0c\u200b\u8fd9\u4e32\u200b\u8109\u51b2\u200b\u79f0\u4e3a\u200bFLP\u3002\u200b\u8fd9\u4e32\u200b\u8109\u51b2\u200b\u7684\u200b\u7279\u70b9\u200b\u5982\u4e0b\u200b\u3002\u200b\u8109\u51b2\u200b\u4e2d\u200b\u5206\u4e3a\u200b\u65f6\u949f\u8109\u51b2\u200b\u548c\u200b\u6570\u636e\u200b\u8109\u51b2\u200b\uff0c\u200b\u6570\u636e\u200b\u8109\u51b2\u200b\u5939\u200b\u5728\u200b\u65f6\u949f\u8109\u51b2\u200b\u4e2d\u95f4\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200b\u8109\u51b2\u200b\u4e3a\u200b\u65f6\u949f\u8109\u51b2\u200b\uff0c\u200b\u6570\u636e\u200b\u8109\u51b2\u200b\u4e2d\u6b63\u200b\u8109\u51b2\u200b\u8868\u793a\u200b1\uff0c\u200b\u65e0\u200b\u8109\u51b2\u200b\u8868\u793a\u200b0.\u200b\u4e00\u4e2a\u200bFLP\u200b\u8109\u51b2\u5e8f\u5217\u200b\u5305\u542b\u200b17\u200b\u4e2a\u200b\u65f6\u949f\u8109\u51b2\u200b\uff0c16\u200b\u4e2a\u200b\u6570\u636e\u200b\u8109\u51b2\u200b\u3002\u200b\u65f6\u949f\u8109\u51b2\u200b\u6bcf\u4e2a\u200b125us\u200b\u51fa\u73b0\u200b\u4e00\u6b21\u200b\u3002</p> </li> <li> <p></p> </li> </ul> </li> <li> <p>IEEE 802.3\u200b\u6807\u51c6\u200b\u6839\u636e\u200b\u4f7f\u7528\u200b\u7684\u200b\u4f20\u8f93\u200b\u7ebf\u7f06\u200b\u548c\u200b\u4f20\u8f93\u200b\u7ebf\u8def\u200b\u7684\u200b\u4e0d\u540c\u200b\uff0c\u200b\u6709\u200b10BASE-T\u300110BASE-TX\uff0c\u200b\u5177\u4f53\u200b\u7684\u200b\u547d\u540d\u200b\u89c4\u5219\u200b\u5982\u4e0b\u200b:</p> <p></p> <ol> <li>\u200b\u6570\u636e\u200b\u901f\u7387\u200b (R)\uff1a<ul> <li>1000 \u2192 1000 Mbps\u200b\u6216\u200b1 Gbps</li> <li>10G \u2192 10 Gbps</li> <li>10/1G \u2192 Gbps\u200b\u4e0b\u884c\u200b\uff0c1 Gbps\u200b\u4e0a\u884c\u200b</li> </ul> </li> <li>\u200b\u8c03\u5236\u200b\u7c7b\u578b\u200b (mTYPE)\uff1aBASE \u2192 \u200b\u57fa\u5e26\u200b</li> <li>\u200b\u4ecb\u8d28\u200b\u7c7b\u578b\u200b/\u200b\u6ce2\u957f\u200b/\u200b\u8ddd\u79bb\u200b (L)\uff1a<ul> <li>B \u2192 \u200b\u53cc\u5411\u200b\u5149\u7ea4\u200b\uff0c\u200b\u4e0a\u884c\u200b(D) \u200b\u6216\u200b\u4e0a\u884c\u200b (U) \u200b\u9650\u5b9a\u7b26\u200b\u4e0d\u200b\u5bf9\u79f0\u200b</li> <li>C \u2192 \u200b\u53cc\u8f74\u200b\u94dc\u7f06\u200b</li> <li>D \u2192 \u200b\u5e76\u884c\u200b\u5355\u6a21\u200b (500 m)</li> <li>E \u2192 \u200b\u8d85\u957f\u200b\u5149\u6ce2\u957f\u200b\u03bb (1510/1550 nm) / \u200b\u8ddd\u79bb\u200b (40 km)</li> <li>F \u2192 \u200b\u5149\u7ea4\u200b (2 km)</li> <li>K \u2192 \u200b\u80cc\u677f\u200b</li> <li>L \u2192 \u200b\u957f\u200b\u5149\u6ce2\u957f\u200b\u03bb (~1310 nm) / \u200b\u8ddd\u79bb\u200b (10 km)</li> <li>P \u2192 \u200b\u65e0\u6e90\u200b\u5149\u7ea4\u200b\uff0c\u200b\u5e26\u6709\u200b\u5355\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u4e0b\u6e38\u200b (D) \u200b\u6216\u200b\u4e0a\u6e38\u200b (U) \u200b\u4e0d\u200b\u5bf9\u79f0\u200b\u9650\u5b9a\u7b26\u200b\uff0c\u200b\u800c\u4e14\u200b\u5e26\u6709\u200b4B/5B\u200b\u6216\u200b8B/10B\u200b\u7684\u200b\u5916\u90e8\u200b\u6765\u6e90\u200b\u7f16\u7801\u200b (X)</li> <li>RH \u2192 \u200b\u91c7\u7528\u200bPAM16\u200b\u7f16\u7801\u200b\u7684\u200b\u7ea2\u8272\u200bLED\u200b\u5851\u6599\u200b\u5149\u7ea4\u200b\u548c\u200b\u4e0d\u540c\u200b\u53d1\u5c04\u529f\u7387\u200b\u7684\u200b\u5149\u7ea4\u200b</li> <li>S \u2192 \u200b\u77ed\u200b\u5149\u6ce2\u957f\u200b\u03bb (850 nm) / \u200b\u8ddd\u79bb\u200b (100 m)</li> <li>T \u2192 \u200b\u53cc\u7ede\u7ebf\u200b</li> </ul> </li> <li>PCS\u200b\u7f16\u7801\u200b (C)\uff1a<ul> <li>R \u2192 \u200b\u6270\u7801\u200b (64B/66B)</li> <li>X \u2192 \u200b\u5916\u90e8\u200b\u6765\u6e90\u200b\u7f16\u7801\u200b (4B/5B\uff0c 8B/10B)</li> </ul> </li> <li>\u200b\u901a\u9053\u200b\u6570\u200b (n)\uff1a<ul> <li>\u200b\u7a7a\u767d\u200b\uff0c\u200b\u65e0\u200b\u901a\u9053\u200b\u6570\u200b \u2192 \u200b\u9ed8\u8ba4\u200b\u4e3a\u200b1\u200b\u901a\u9053\u200b</li> <li>4 \u2192 4\u200b\u901a\u9053\u200b</li> </ul> </li> </ol> </li> </ul> <ol> <li>\u200b\u4ee5\u592a\u7f51\u200b\u4e4b\u200b\u7269\u7406\u5c42\u200b\u53c2\u8003\u200b\u6587\u6863\u200b</li> <li>\u200b\u4ee5\u592a\u7f51\u200b\u4e4b\u200b\u7269\u7406\u5c42\u200b\u53c2\u8003\u200b\u6587\u6863\u200b</li> <li>\u200b\u7269\u7406\u5c42\u200b\u5de5\u4f5c\u200b\u539f\u7406\u200b</li> </ol>"},{"location":"embedded_development/#512","title":"5.1.2. \u200b\u6570\u636e\u200b\u94fe\u8def\u5c42","text":"<p>\u200b\u4ee5\u592a\u7f51\u200b\u5e38\u7528\u200b\u5e27\u200b\u683c\u5f0f\u200b\u6709\u200b\u4e24\u79cd\u200b\uff0c \u200b\u4e00\u79cd\u200b\u662f\u200bEthernet II\uff0c\u200b\u53e6\u200b\u4e00\u79cd\u200b\u662f\u200bIEEE 802.3 \u200b\u683c\u5f0f\u200b\u3002</p> <ul> <li>802.3 \u200b\u662f\u200bIEEE\u200b\u7684\u200b\u6b63\u5f0f\u200b\u6807\u51c6\u200b\uff0c\u200b\u5b83\u200b\u7531\u200bEthernet Ethernet II\u200b\u53d1\u5c55\u200b\u800c\u200b\u6765\u200b</li> <li> <p>Ethernet II\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200bType\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u4ee5\u592a\u7f51\u200b\u9996\u90e8\u200b\u540e\u9762\u200b\u6240\u200b\u8ddf\u200b\u6570\u636e\u5305\u200b\u7684\u200b\u7c7b\u578b\u200b\uff0c\u200b\u6807\u8bc6\u200b\u4ee5\u592a\u200b\u5e27\u200b\u5904\u7406\u200b\u5b8c\u6210\u200b\u4e4b\u540e\u200b\u5c06\u200b\u88ab\u200b\u53d1\u9001\u5230\u200b\u54ea\u4e2a\u200b\u4e0a\u5c42\u200b\u534f\u8bae\u200b\u8fdb\u884c\u200b\u5904\u7406\u200b\uff1b\u200b\u800c\u200bIEEE 802.3\u200b\u683c\u5f0f\u200b\u4e2d\u200b\u540c\u6837\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u662f\u200b\u957f\u5ea6\u200b\u5b57\u200b\u6bb5\u200b\u3002</p> <ul> <li>\u200b\u4ece\u200bType/Length\u200b\u5b57\u200b\u6bb5\u503c\u200b\u53ef\u4ee5\u200b\u533a\u5206\u200b\u4e24\u79cd\u200b\u5e27\u200b\u7c7b\u578b\u200b\uff1a\u200b\u5f53\u200bType\u200b\u5b57\u200b\u6bb5\u503c\u200b\u5c0f\u4e8e\u200b\u7b49\u4e8e\u200b1500\uff080x05DC\uff09\u200b\u65f6\u200b\uff0c\u200b\u5e27\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bIEEE 802.3\u200b\u683c\u5f0f\u200b\u3002\u200b\u5f53\u200bType\u200b\u5b57\u200b\u6bb5\u503c\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b1536\uff080x0600\uff09\u200b\u65f6\u200b\uff0c\u200b\u5e27\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bEthernet II\u200b\u683c\u5f0f\u200b</li> <li>LLC\u200b\u53ea\u200b\u51fa\u73b0\u200b\u5728\u200b802.3\u200b\u4ee5\u592a\u7f51\u200b\u7684\u200b\u683c\u5f0f\u200b\u4e2d\u200b\uff0c802.3\u200b\u7684\u200bMAC\u200b\u5c42\u200b\u6ca1\u6709\u200b\u5b57\u200b\u6bb5\u200b\u6307\u660e\u200b\u4e0a\u5c42\u200b\u534f\u8bae\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u4f46\u662f\u200b\u6307\u660e\u200b\u4e86\u200b\u6570\u636e\u5305\u200b\u957f\u5ea6\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e0a\u5c42\u200b\u534f\u8bae\u200b\u9700\u8981\u200bLLC\u200b\u6307\u660e\u200b\u3002\u200b\u5728\u200bEthernet II\u200b\u5e27\u200b\u4e2d\u200b\uff0c\u200b\u628a\u200b802.3\u200b\u7684\u200b\u957f\u5ea6\u200b\u5b57\u200b\u6bb5\u200b\u6539\u4e3a\u200b\u4e86\u200btype\u3002\u200b\u7531\u200bType\u200b\u5b57\u200b\u6bb5\u200b\u533a\u5206\u200b\u4e0a\u5c42\u200b\u534f\u8bae\u200b\uff0c\u200b\u8fd9\u65f6\u5019\u200b\u5c31\u200b\u6ca1\u6709\u200b\u5fc5\u8981\u200b\u5b9e\u73b0\u200bLLC\u200b\u5b50\u5c42\u200b\uff0c\u200b\u4ec5\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200bMAC\u200b\u5b50\u5c42\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u4ee5\u592a\u7f51\u200b\u5e27\u200b\u683c\u5f0f\u200b\u591a\u8fbe\u200b5\u200b\u79cd\u200b\uff0c\u200b\u4e8b\u5b9e\u4e0a\u200b\uff0c\u200b\u4eca\u5929\u200b\u7684\u200b\u5927\u591a\u6570\u200bTCP/IP\u200b\u5e94\u7528\u200b\u90fd\u200b\u662f\u200b\u7528\u200bEthernet V2\u200b\u5e27\u200b\u683c\u5f0f\u200b\uff0c\u200b\u800c\u200b\u4ea4\u6362\u673a\u200b\u4e4b\u95f4\u200b\u7684\u200bBPDU\u200b\u6570\u636e\u5305\u200b\u662f\u200bIEEE802.3/LLC\u200b\u7684\u200b\u5e27\u200b\uff0cVLAN Trunk\u200b\u534f\u8bae\u200b\u5982\u200b802.1Q\u200b\u548c\u200bCisco\u200b\u7684\u200bCDP\u200b\u7b49\u200b\u5219\u200b\u662f\u200b\u91c7\u7528\u200bIEEE802.3/SNAP\u200b\u7684\u200b\u5e27\u200b\u3002</p> </li> <li> <p>\u200b\u636e\u200bRFC894\u200b\u7684\u200b\u8bf4\u660e\u200b\uff0c\u200b\u4ee5\u592a\u7f51\u200b\u5c01\u88c5\u200b\u7684\u200b\u6570\u636e\u200b\u90e8\u5206\u200b(Payload)\u200b\u7684\u200b\u6700\u5927\u200b\u957f\u5ea6\u200b\u662f\u200b1500Byte\u3010\u200b\u79f0\u4e3a\u200b\u4ee5\u592a\u7f51\u200b\u7684\u200b\u6700\u5927\u200b\u4f20\u8f93\u200b\u5355\u5143\u200b(MTU)\uff0c\u200b\u6ce8\u610f\u200b\uff0cMTU\u200b\u8fd9\u4e2a\u200b\u6982\u5ff5\u200b\u6307\u200b\u6570\u636e\u200b\u5e27\u200b\u4e2d\u200b\u6709\u6548\u8f7d\u8377\u200b\u7684\u200b\u6700\u5927\u200b\u957f\u5ea6\u200b\uff0c\u200b\u4e0d\u200b\u5305\u62ec\u200b\u5e27\u200b\u9996\u90e8\u200b\u7684\u200b\u957f\u5ea6\u200b\u3011\uff0c\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u9650\u5236\u200b\u4e4b\u4e0b\u200b\uff0c\u200b\u6700\u957f\u200b\u7684\u200b\u4ee5\u592a\u200b\u5e27\u200b\u5305\u62ec\u200b6\u200b\u5b57\u8282\u200b\u7684\u200b\u76ee\u7684\u200b\u5730\u5740\u200b(DMAC)\u30016\u200b\u5b57\u8282\u200b\u7684\u200b\u6e90\u5730\u5740\u200b(SMAC)\u30012\u200b\u5b57\u8282\u200b\u7684\u200b\u4ee5\u592a\u200b\u7c7b\u578b\u200b(EtherType)\u30011500\u200b\u5b57\u8282\u200b\u7684\u200b\u6570\u636e\u200b(Payload)\u30014\u200b\u5b57\u8282\u200b\u7684\u200b\u6821\u9a8c\u200b(FCS)\uff0c\u200b\u603b\u5171\u200b\u662f\u200b1518\u200b\u5b57\u8282\u200b\u3002\u200b\u4f46\u662f\u200b\u5b9e\u9645\u4e0a\u200b\u6211\u4eec\u200b\u6293\u5305\u200b\u5f97\u5230\u200b\u7684\u200b\u6700\u5927\u200b\u5e27\u200b\u662f\u200b1514\u200b\u5b57\u8282\u200b\uff0c\u200b\u4e3a\u4ec0\u4e48\u200b\u4e0d\u662f\u200b1518\u200b\u5b57\u8282\u200b\u5462\u200b\uff1f </p> <ul> <li>\u200b\u539f\u56e0\u200b\u662f\u200b\u5f53\u200b\u6570\u636e\u200b\u5e27\u200b\u5230\u8fbe\u200b\u7f51\u5361\u200b\u65f6\u200b\uff0c\u200b\u5728\u200b\u7269\u7406\u5c42\u200b\u4e0a\u7f51\u5361\u200b\u8981\u200b\u5148\u200b\u53bb\u6389\u200b\u524d\u5bfc\u200b\u540c\u6b65\u200b\u7801\u200b\u548c\u200b\u5e27\u200b\u5f00\u59cb\u200b\u5b9a\u754c\u7b26\u200b\uff0c\u200b\u7136\u540e\u200b\u5bf9\u200b\u5e27\u200b\u8fdb\u884c\u200bCRC\u200b\u68c0\u9a8c\u200b\uff0c\u200b\u5982\u679c\u200b\u5e27\u200b\u6821\u9a8c\u200b\u548c\u200b\u9519\u200b\uff0c\u200b\u5c31\u200b\u4e22\u5f03\u200b\u6b64\u5e27\u200b\u3002\u200b\u5982\u679c\u200b\u6821\u9a8c\u200b\u548c\u200b\u6b63\u786e\u200b\uff0c\u200b\u5c31\u200b\u5224\u65ad\u200b\u5e27\u200b\u7684\u200b\u76ee\u7684\u200b\u786c\u4ef6\u200b\u5730\u5740\u200b\u662f\u5426\u200b\u7b26\u5408\u200b\u81ea\u5df1\u200b\u7684\u200b\u63a5\u6536\u200b\u6761\u4ef6\u200b\uff08\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\u662f\u200b\u81ea\u5df1\u200b\u7684\u200b\u7269\u7406\u200b\u786c\u4ef6\u200b\u5730\u5740\u200b\u3001\u200b\u5e7f\u64ad\u200b\u5730\u5740\u200b\u3001\u200b\u53ef\u200b\u63a5\u6536\u200b\u7684\u200b\u591a\u64ad\u200b\u786c\u4ef6\u200b\u5730\u5740\u200b\u7b49\u200b\uff09\uff0c\u200b\u5982\u679c\u200b\u7b26\u5408\u200b\uff0c\u200b\u5c31\u200b\u5c06\u200b\u5e27\u200b\u4ea4\u200b<code>\u200b\u8bbe\u5907\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b</code>\u200b\u505a\u200b\u8fdb\u4e00\u6b65\u200b\u5904\u7406\u200b\u3002\u200b\u8fd9\u65f6\u200b\u6211\u4eec\u200b\u7684\u200b\u6293\u200b\u5305\u200b\u8f6f\u4ef6\u200b\u624d\u80fd\u200b\u6293\u200b\u5230\u200b\u6570\u636e\u200b\uff0c \u200b\u56e0\u6b64\u200b\uff0c\u200b\u6293\u5305\u200b\u8f6f\u4ef6\u200b\u6293\u5230\u200b\u7684\u200b\u662f\u200b\u53bb\u6389\u200b\u524d\u5bfc\u200b\u7801\u200b\u3001\u200b\u5e27\u200b\u5f00\u59cb\u200b\u5206\u754c\u200b\u7b26\u200b\u3001FCS\u200b\u4e4b\u5916\u200b\u7684\u200b\u6570\u636e\u200b\uff0c\u200b\u5176\u200b\u6700\u5927\u503c\u200b\u662f\u200b6\uff0b6\uff0b2\uff0b1500\uff1d1514\u200b\u5b57\u8282\u200b\u3002</li> </ul> </li> </ul> <p></p> <p></p> <p>\u200b\u4ee5\u592a\u7f51\u200b\u5e27\u200b\u7684\u200b\u4e09\u79cd\u200b\u4f20\u8f93\u200b\u6a21\u5f0f\u200b\uff1a</p> <ol> <li> <p>\u200b\u5355\u64ad\u200b</p> <ul> <li>\u200b\u6307\u4ece\u200b\u5355\u4e00\u200b\u7684\u200b\u6e90\u7aef\u200b\u53d1\u9001\u5230\u200b\u5355\u4e00\u200b\u7684\u200b\u76ee\u7684\u200b\u7aef\u200b\u3002\u200b\u5728\u200b\u51b2\u7a81\u200b\u57df\u200b\u4e2d\u200b\uff0c\u200b\u6240\u6709\u200b\u4e3b\u673a\u200b\u90fd\u200b\u80fd\u200b\u6536\u5230\u200b\u6e90\u200b\u4e3b\u673a\u200b\u53d1\u9001\u200b\u7684\u200b\u5355\u64ad\u200b\u5e27\u200b\uff0c\u200b\u4f46\u662f\u200b\u5176\u4ed6\u200b\u4e3b\u673a\u200b\u53d1\u73b0\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\u4e0e\u200b\u672c\u5730\u200bMAC\u200b\u5730\u5740\u200b\u4e0d\u200b\u4e00\u81f4\u200b\u540e\u200b\u4f1a\u200b\u4e22\u5f03\u200b\u6536\u5230\u200b\u7684\u200b\u5e27\u200b\uff0c\u200b\u53ea\u6709\u200b\u771f\u6b63\u200b\u7684\u200b\u76ee\u7684\u200b\u4e3b\u673a\u200b\u624d\u200b\u4f1a\u200b\u63a5\u6536\u200b\u5e76\u200b\u5904\u7406\u200b\u6536\u5230\u200b\u7684\u200b\u5e27\u200b\u3002</li> </ul> <p></p> </li> <li> <p>\u200b\u5e7f\u64ad\u200b</p> <ul> <li>\u200b\u8868\u793a\u200b\u5e27\u200b\u4ece\u200b\u5355\u4e00\u200b\u7684\u200b\u6e90\u200b\u53d1\u9001\u5230\u200b\u5171\u4eab\u200b\u4ee5\u5927\u200b\u7f51\u4e0a\u200b\u7684\u200b\u6240\u6709\u200b\u4e3b\u673a\u200b\u3002\u200b\u5e7f\u64ad\u200b\u5e27\u200b\u7684\u200b\u76ee\u7684\u200bMAC\u200b\u5730\u5740\u200b\u4e3a\u200b\u5341\u516d\u8fdb\u5236\u200b\u7684\u200bFF:FF:FF:FF:FF:FF\uff0c\u200b\u6240\u6709\u200b\u6536\u5230\u200b\u8be5\u200b\u5e7f\u64ad\u200b\u5e27\u200b\u7684\u200b\u4e3b\u673a\u200b\u90fd\u200b\u8981\u200b\u63a5\u6536\u200b\u5e76\u200b\u5904\u7406\u200b\u8fd9\u4e2a\u200b\u5e27\u200b\u3002\u200b\u5e7f\u64ad\u200b\u65b9\u5f0f\u200b\u4f1a\u200b\u4ea7\u751f\u200b\u5927\u91cf\u200b\u6d41\u91cf\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u5e26\u5bbd\u200b\u5229\u7528\u7387\u200b\u964d\u4f4e\u200b\uff0c\u200b\u8fdb\u800c\u200b\u5f71\u54cd\u200b\u6574\u4e2a\u200b\u7f51\u7edc\u200b\u7684\u200b\u6027\u80fd\u200b\u3002\u200b\u5f53\u200b\u9700\u8981\u200b\u7f51\u7edc\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u4e3b\u673a\u200b\u90fd\u200b\u80fd\u200b\u63a5\u6536\u200b\u5230\u200b\u76f8\u540c\u200b\u7684\u200b\u4fe1\u606f\u200b\u5e76\u200b\u8fdb\u884c\u200b\u5904\u7406\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u901a\u5e38\u200b\u4f1a\u200b\u4f7f\u7528\u200b\u5e7f\u64ad\u200b\u65b9\u5f0f\u200b\u3002</li> </ul> <p></p> </li> <li> <p>\u200b\u7ec4\u64ad\u200b</p> <ul> <li>\u200b\u7ec4\u64ad\u200b\u8f6c\u53d1\u200b\u53ef\u4ee5\u200b\u7406\u89e3\u200b\u4e3a\u200b\u9009\u62e9\u6027\u200b\u7684\u200b\u5e7f\u64ad\u200b\uff0c\u200b\u4e3b\u673a\u200b\u4fa6\u542c\u200b\u7279\u5b9a\u200b\u7ec4\u64ad\u200b\u5730\u5740\u200b\uff0c\u200b\u63a5\u6536\u200b\u5e76\u200b\u5904\u7406\u200b\u76ee\u7684\u200bAC\u200b\u5730\u5740\u200b\u4e3a\u200b\u8be5\u7ec4\u200b\u64ad\u200bMAC\u200b\u5730\u5740\u200b\u7684\u200b\u5e27\u200b\u3002\u200b\u7ec4\u64ad\u200bMAC\u200b\u5730\u5740\u200b\u548c\u200b\u5355\u64ad\u200bMAC\u200b\u5730\u5740\u200b\u662f\u200b\u901a\u8fc7\u200b\u7b2c\u4e00\u200b\u5b57\u8282\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u200b8\u200b\u4e2a\u200b\u6bd4\u7279\u200b\u533a\u5206\u200b\u7684\u200b\u3002\u200b\u7ec4\u64ad\u200bMAC\u200b\u5730\u5740\u200b\u7684\u200b\u7b2c\u200b8\u200b\u4e2a\u200b\u6bd4\u7279\u200b\u4e3a\u200b1\uff0c\u200b\u800c\u200b\u5355\u64ad\u200bMAC\u200b\u5730\u5740\u200b\u7684\u200b\u7b2c\u200b8\u200b\u4e2a\u200b\u6bd4\u7279\u200b\u4e3a\u200b0\u3002\u200b\u5f53\u200b\u9700\u8981\u200b\u7f51\u7edc\u200b\u4e0a\u200b\u7684\u200b\u4e00\u7ec4\u200b\u4e3b\u673a\u200b\uff08\u200b\u800c\u200b\u4e0d\u662f\u200b\u5168\u90e8\u200b\u4e3b\u673a\u200b\uff09\u200b\u63a5\u6536\u200b\u76f8\u540c\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5176\u4ed6\u200b\u4e3b\u673a\u200b\u4e0d\u200b\u53d7\u200b\u5f71\u54cd\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u901a\u5e38\u200b\u4f1a\u200b\u4f7f\u7528\u200b\u7ec4\u64ad\u200b\u65b9\u5f0f\u200b\u3002</li> </ul> <p></p> </li> </ol> <p>VLAN\uff08Virtual Local Area Network\uff09</p> <p>VLAN\uff08Virtual Local Area Network\uff09\u200b\u5373\u200b\u865a\u62df\u200b\u5c40\u57df\u7f51\u200b\uff0c\u200b\u662f\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u7269\u7406\u200b\u7684\u200bLAN\u200b\u5728\u200b\u903b\u8f91\u200b\u4e0a\u200b\u5212\u5206\u200b\u6210\u200b\u591a\u4e2a\u200b\u5e7f\u64ad\u200b\u57df\u200b\u7684\u200b\u901a\u4fe1\u200b\u6280\u672f\u200b\u3002 \u200b\u6bcf\u4e2a\u200bVLAN\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5e7f\u64ad\u200b\u57df\u200b\uff0cVLAN\u200b\u5185\u200b\u7684\u200b\u4e3b\u673a\u200b\u95f4\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u901a\u4fe1\u200b\uff0c\u200b\u800c\u200bVLAN\u200b\u95f4\u200b\u5219\u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u4e92\u901a\u200b\u3002\u200b\u8fd9\u6837\u200b\uff0c\u200b\u5e7f\u64ad\u200b\u62a5\u6587\u200b\u5c31\u200b\u88ab\u200b\u9650\u5236\u200b\u5728\u200b\u4e00\u4e2a\u200bVLAN\u200b\u5185\u200b\u3002</p> <p></p> <p>\u200b\u8981\u200b\u4f7f\u200b\u4ea4\u6362\u673a\u200b\u80fd\u591f\u200b\u5206\u8fa8\u200b\u4e0d\u540c\u200bVLAN\u200b\u7684\u200b\u62a5\u6587\u200b\uff0c\u200b\u9700\u8981\u200b\u5728\u200b\u62a5\u6587\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u6807\u8bc6\u200bVLAN\u200b\u4fe1\u606f\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u3002IEEE 802.1Q\u200b\u534f\u8bae\u200b\u89c4\u5b9a\u200b\uff0c\u200b\u5728\u200b\u4ee5\u592a\u7f51\u200b\u6570\u636e\u200b\u5e27\u200b\u4e2d\u200b\u52a0\u5165\u200b4\u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200bVLAN\u200b\u6807\u7b7e\u200b\uff08\u200b\u53c8\u79f0\u200bVLAN Tag\uff0c\u200b\u7b80\u79f0\u200bTag\uff09\uff0c\u200b\u7528\u4ee5\u200b\u6807\u8bc6\u200bVLAN\u200b\u4fe1\u606f\u200b\u3002</p> <p></p> <p>\u200b\u6570\u636e\u200b\u5e27\u200b\u4e2d\u200b\u7684\u200bVID\u200b\u5b57\u200b\u6bb5\u200b\u6807\u8bc6\u200b\u4e86\u200b\u8be5\u200b\u6570\u636e\u200b\u5e27\u200b\u6240\u5c5e\u200b\u7684\u200bVLAN\uff0c\u200b\u6570\u636e\u200b\u5e27\u200b\u53ea\u80fd\u200b\u5728\u200b\u5176\u200b\u6240\u5c5e\u200bVLAN\u200b\u5185\u200b\u8fdb\u884c\u200b\u4f20\u8f93\u200b\u3002VID\u200b\u5b57\u200b\u6bb5\u200b\u4ee3\u8868\u200bVLAN ID\uff0cVLAN ID\u200b\u53d6\u503c\u200b\u8303\u56f4\u200b\u662f\u200b0\uff5e4095\u3002\u200b\u7531\u4e8e\u200b0\u200b\u548c\u200b4095\u200b\u4e3a\u200b\u534f\u8bae\u200b\u4fdd\u7559\u200b\u53d6\u503c\u200b\uff0c\u200b\u6240\u4ee5\u200bVLAN ID\u200b\u7684\u200b\u6709\u6548\u200b\u53d6\u503c\u200b\u8303\u56f4\u200b\u662f\u200b1\uff5e4094\u3002</p> <p>\u200b\u4ea4\u6362\u673a\u200b\u5185\u90e8\u200b\u5904\u7406\u200b\u7684\u200b\u6570\u636e\u200b\u5e27\u200b\u90fd\u200b\u5e26\u6709\u200bVLAN\u200b\u6807\u7b7e\u200b\u3002\u200b\u800c\u200b\u4ea4\u6362\u673a\u200b\u8fde\u63a5\u200b\u7684\u200b\u90e8\u5206\u200b\u8bbe\u5907\u200b\uff08\u200b\u5982\u200b\u7528\u6237\u200b\u4e3b\u673a\u200b\u3001\u200b\u670d\u52a1\u5668\u200b\uff09\u200b\u53ea\u4f1a\u200b\u6536\u53d1\u200b\u4e0d\u5e26\u200bVLAN tag\u200b\u7684\u200b\u4f20\u7edf\u200b\u4ee5\u592a\u7f51\u200b\u6570\u636e\u200b\u5e27\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u8981\u200b\u4e0e\u200b\u8fd9\u4e9b\u200b\u8bbe\u5907\u200b\u4ea4\u4e92\u200b\uff0c\u200b\u5c31\u200b\u9700\u8981\u200b\u4ea4\u6362\u673a\u200b\u7684\u200b\u63a5\u53e3\u200b\u80fd\u591f\u200b\u8bc6\u522b\u200b\u4f20\u7edf\u200b\u4ee5\u592a\u7f51\u200b\u6570\u636e\u200b\u5e27\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u6536\u53d1\u200b\u65f6\u200b\u7ed9\u200b\u5e27\u200b\u6dfb\u52a0\u200b\u3001\u200b\u5265\u9664\u200bVLAN\u200b\u6807\u7b7e\u200b\u3002\u200b\u6dfb\u52a0\u200b\u4ec0\u4e48\u200bVLAN\u200b\u6807\u7b7e\u200b\uff0c\u200b\u7531\u200b\u63a5\u53e3\u200b\u4e0a\u200b\u7684\u200b\u7f3a\u7701\u200bVLAN\uff08Port Default VLAN ID\uff0cPVID\uff09\u200b\u51b3\u5b9a\u200b\u3002</p> <ul> <li>\u200b\u7ec8\u7aef\u8bbe\u5907\u200b\u4e0d\u4f1a\u200b\u751f\u6210\u200b\u5e26\u200b VLAN \u200b\u6807\u7b7e\u200b\u7684\u200b\u6570\u636e\u200b\u5e27\u200b\uff0c\u200b\u5b83\u4eec\u200b\u53d1\u51fa\u200b\u7684\u200b\u6570\u636e\u200b\u5e27\u200b\u53eb\u505a\u200b\u65e0\u200b\u6807\u8bb0\u200b\u5e27\u200b\uff08 Untagged \uff09\u3002\u200b\u5b83\u4eec\u200b\u8fde\u63a5\u200b\u7684\u200b\u4ea4\u6362\u200b\u673a\u4f1a\u200b\u7ed9\u200b\u65e0\u200b\u6807\u8bb0\u200b\u5e27\u200b\u6253\u200b\u4e0a\u200b VLAN \u200b\u6807\u7b7e\u200b\u3002\u200b\u4ea4\u6362\u673a\u200b\u901a\u8fc7\u200b\u6bcf\u4e2a\u200b\u7aef\u53e3\u200b\u7684\u200b PVID \uff0c\u200b\u5224\u65ad\u200b\u4ece\u200b\u8fd9\u4e2a\u200b\u63a5\u53e3\u200b\u6536\u5230\u200b\u7684\u200b\u65e0\u200b\u6807\u8bb0\u200b\u5e27\u200b\u5c5e\u4e8e\u200b\u54ea\u4e2a\u200b VLAN \uff0c\u200b\u5e76\u200b\u5728\u200b\u8f6c\u53d1\u200b\u65f6\u200b\uff0c\u200b\u63d2\u5165\u200b\u76f8\u5e94\u200b\u7684\u200b VLAN \u200b\u6807\u7b7e\u200b\uff0c\u200b\u4ece\u800c\u200b\u5c06\u200b\u65e0\u200b\u6807\u8bb0\u200b\u5e27\u200b\u53d8\u4e3a\u200b\u6807\u8bb0\u200b\u5e27\u200b\uff08 Tagged \uff09\u3002</li> </ul> <ol> <li>37\u200b\u5f20\u56fe\u200b\u8be6\u89e3\u200bMAC\u200b\u5730\u5740\u200b\u3001\u200b\u4ee5\u592a\u7f51\u200b\u3001\u200b\u4e8c\u5c42\u200b\u8f6c\u53d1\u200b\u3001VLAN</li> </ol> <p>ARP\u200b\u534f\u8bae\u200b</p> <ol> <li>ARP\u200b\u534f\u8bae\u200b</li> </ol> <p></p> <ul> <li>Hardware type \uff1a\u200b\u786c\u4ef6\u200b\u7c7b\u578b\u200b\uff0c\u200b\u6807\u8bc6\u200b\u94fe\u8def\u5c42\u200b\u534f\u8bae\u200b</li> <li>Protocol type\uff1a \u200b\u534f\u8bae\u200b\u7c7b\u578b\u200b\uff0c\u200b\u6807\u8bc6\u200b\u7f51\u7edc\u5c42\u200b\u534f\u8bae\u200b</li> <li>Hardware size \uff1a\u200b\u786c\u4ef6\u200b\u5730\u5740\u200b\u5927\u5c0f\u200b\uff0c\u200b\u6807\u8bc6\u200bMAC\u200b\u5730\u5740\u200b\u957f\u5ea6\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u662f\u200b6\u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0848bit\uff09</li> <li>Protocol size\uff1a \u200b\u534f\u8bae\u200b\u5730\u5740\u200b\u5927\u5c0f\u200b\uff0c\u200b\u6807\u8bc6\u200bIP\u200b\u5730\u5740\u200b\u957f\u5ea6\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u662f\u200b4\u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0832bit\uff09</li> <li>Opcode\uff1a \u200b\u64cd\u4f5c\u200b\u4ee3\u7801\u200b\uff0c\u200b\u6807\u8bc6\u200bARP\u200b\u6570\u636e\u5305\u200b\u7c7b\u578b\u200b\uff0c1\u200b\u8868\u793a\u200b\u8bf7\u6c42\u200b\uff0c2\u200b\u8868\u793a\u200b\u56de\u5e94\u200b</li> <li>Sender MAC address \uff1a\u200b\u53d1\u9001\u8005\u200bMAC</li> <li>Sender IP address \uff1a\u200b\u53d1\u9001\u8005\u200bIP</li> <li>Target MAC address \uff1a\u200b\u76ee\u6807\u200bMAC\uff0c\u200b\u6b64\u5904\u200b\u5168\u200b0\u200b\u8868\u793a\u200b\u5728\u200b\u8bf7\u6c42\u200b</li> <li>Target IP address\uff1a \u200b\u76ee\u6807\u200bIP</li> </ul> <p>ARP\u200b\u8868\u9879\u200b\u53c8\u200b\u5206\u4e3a\u200b\u52a8\u6001\u200bARP\u200b\u8868\u9879\u200b\u548c\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u3002</p> <ul> <li> <p>\u200b\u52a8\u6001\u200bARP\u200b\u8868\u9879\u200b</p> <ul> <li>\u200b\u52a8\u6001\u200bARP\u200b\u8868\u9879\u200b\u7531\u200bARP\u200b\u534f\u8bae\u200b\u901a\u8fc7\u200bARP\u200b\u62a5\u6587\u200b\u81ea\u52a8\u200b\u751f\u6210\u200b\u548c\u200b\u7ef4\u62a4\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u8001\u5316\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u65b0\u200b\u7684\u200bARP\u200b\u62a5\u6587\u200b\u66f4\u65b0\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u8986\u76d6\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u52a8\u6001\u200bARP\u200b\u7f13\u5b58\u200b\u9879\u200b\u7684\u200b\u6f5c\u5728\u200b\u751f\u547d\u5468\u671f\u200b\u662f\u200b10\u200b\u5206\u949f\u200b\u3002\u200b\u65b0\u52a0\u200b\u5230\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b\u9879\u76ee\u200b\u5e26\u6709\u200b\u65f6\u95f4\u200b\u6233\u200b\uff0c\u200b\u5982\u679c\u200b\u67d0\u4e2a\u200b\u9879\u76ee\u200b\u6dfb\u52a0\u200b\u540e\u200b2\u200b\u5206\u949f\u200b\u5185\u200b\u6ca1\u6709\u200b\u518d\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5219\u200b\u6b64\u200b\u9879\u76ee\u200b\u8fc7\u671f\u200b\u5e76\u200b\u4ece\u200bARP\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u5220\u9664\u200b\uff1b\u200b\u5982\u679c\u200b\u67d0\u4e2a\u200b\u9879\u76ee\u200b\u5df2\u200b\u5728\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5219\u200b\u53c8\u200b\u6536\u5230\u200b2\u200b\u5206\u949f\u200b\u7684\u200b\u751f\u547d\u5468\u671f\u200b\uff1b\u200b\u5982\u679c\u200b\u67d0\u4e2a\u200b\u9879\u76ee\u200b\u59cb\u7ec8\u200b\u5728\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5219\u200b\u4f1a\u200b\u53e6\u5916\u200b\u6536\u5230\u200b2\u200b\u5206\u949f\u200b\u7684\u200b\u751f\u547d\u5468\u671f\u200b\uff0c\u200b\u4e00\u76f4\u200b\u5230\u200b10\u200b\u5206\u949f\u200b\u7684\u200b\u6700\u957f\u200b\u751f\u547d\u5468\u671f\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b</p> <ul> <li> <p>\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u901a\u8fc7\u200b\u624b\u5de5\u200b\u914d\u7f6e\u200b\u548c\u200b\u7ef4\u62a4\u200b\uff0c\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u8001\u5316\u200b\uff0c\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u52a8\u6001\u200bARP\u200b\u8868\u9879\u200b\u8986\u76d6\u200b\u3002\u200b\u76f4\u5230\u200b\u91cd\u65b0\u542f\u52a8\u200b\u8ba1\u7b97\u673a\u200b\u4e3a\u6b62\u200b\u3002</p> </li> <li> <p>\u200b\u914d\u7f6e\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u53ef\u4ee5\u200b\u589e\u52a0\u200b\u901a\u4fe1\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u3002\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u53ef\u4ee5\u200b\u9650\u5236\u200b\u548c\u200b\u6307\u5b9a\u200bIP\u200b\u5730\u5740\u200b\u7684\u200b\u8bbe\u5907\u200b\u901a\u4fe1\u200b\u65f6\u200b\u53ea\u200b\u4f7f\u7528\u200b\u6307\u5b9a\u200b\u7684\u200bMAC\u200b\u5730\u5740\u200b\uff0c\u200b\u6b64\u65f6\u200b\u653b\u51fb\u200b\u62a5\u6587\u200b\u65e0\u6cd5\u200b\u4fee\u6539\u200b\u6b64\u200b\u8868\u9879\u200b\u7684\u200bIP\u200b\u5730\u5740\u200b\u548c\u200bMAC\u200b\u5730\u5740\u200b\u7684\u200b\u6620\u5c04\u200b\u5173\u7cfb\u200b\uff0c\u200b\u4ece\u800c\u200b\u4fdd\u62a4\u200b\u4e86\u200b\u672c\u200b\u8bbe\u5907\u200b\u548c\u200b\u6307\u5b9a\u200b\u8bbe\u5907\u200b\u95f4\u200b\u7684\u200b\u6b63\u5e38\u200b\u901a\u4fe1\u200b\u3002</p> </li> <li> <p>\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u5206\u4e3a\u200b\u77ed\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u548c\u200b\u957f\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u3002</p> <ul> <li>\u200b\u5728\u200b\u914d\u7f6e\u200b\u957f\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u65f6\u200b\uff0c\u200b\u9664\u4e86\u200b\u914d\u7f6e\u200bIP\u200b\u5730\u5740\u200b\u548c\u200bMAC\u200b\u5730\u5740\u200b\u9879\u5916\u200b\uff0c\u200b\u8fd8\u200b\u5fc5\u987b\u200b\u914d\u7f6e\u200b\u8be5\u200bARP\u200b\u8868\u9879\u200b\u6240\u5728\u200bVLAN\u200b\u548c\u200b\u51fa\u200b\u63a5\u53e3\u200b\u3002\u200b\u957f\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u7528\u4e8e\u200b\u62a5\u6587\u200b\u8f6c\u53d1\u200b\u3002</li> <li>\u200b\u5728\u200b\u914d\u7f6e\u200b\u77ed\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u65f6\u200b\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b\u914d\u7f6e\u200bIP\u200b\u5730\u5740\u200b\u548c\u200bMAC\u200b\u5730\u5740\u200b\u9879\u200b\u3002\u200b\u5982\u679c\u200b\u51fa\u200b\u63a5\u53e3\u200b\u662f\u200b\u4e09\u5c42\u200b\u4ee5\u592a\u7f51\u200b\u63a5\u53e3\u200b\uff0c\u200b\u77ed\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u7528\u4e8e\u200b\u62a5\u6587\u200b\u8f6c\u53d1\u200b\uff1b\u200b\u5982\u679c\u200b\u51fa\u200b\u63a5\u53e3\u200b\u662f\u200bVLAN\u200b\u865a\u200b\u63a5\u53e3\u200b\uff0c\u200b\u77ed\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u7528\u4e8e\u200b\u62a5\u6587\u200b\u8f6c\u53d1\u200b\uff0c\u200b\u5f53\u8981\u200b\u53d1\u9001\u200bIP\u200b\u6570\u636e\u5305\u200b\u65f6\u200b\uff0c\u200b\u5148\u200b\u53d1\u9001\u200bARP\u200b\u8bf7\u6c42\u200b\u62a5\u6587\u200b\uff0c\u200b\u5982\u679c\u200b\u6536\u5230\u200b\u7684\u200b\u54cd\u5e94\u200b\u62a5\u6587\u200b\u4e2d\u200b\u7684\u200b\u6e90\u200bIP\u200b\u5730\u5740\u200b\u548c\u6e90\u200bMAC\u200b\u5730\u5740\u200b\u4e0e\u200b\u6240\u200b\u914d\u7f6e\u200b\u7684\u200bIP\u200b\u5730\u5740\u200b\u548c\u200bMAC\u200b\u5730\u5740\u200b\u76f8\u540c\u200b\uff0c\u200b\u5219\u200b\u5c06\u200b\u63a5\u6536\u200bARP\u200b\u54cd\u5e94\u200b\u62a5\u6587\u200b\u7684\u200b\u63a5\u53e3\u200b\u52a0\u5165\u200b\u8be5\u200b\u9759\u6001\u200bARP\u200b\u8868\u9879\u200b\u4e2d\u200b\uff0c\u200b\u4e4b\u540e\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u7528\u4e8e\u200bIP\u200b\u6570\u636e\u5305\u200b\u7684\u200b\u8f6c\u53d1\u200b\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"embedded_development/#513","title":"5.1.3. \u200b\u7f51\u7edc\u5c42","text":"<ol> <li>\u200b\u8def\u7531\u8868\u200b(RIB/FIB)\u3001MAC\u200b\u8868\u200b\u3001ARP\u200b\u8868\u200b\u4ecb\u7ecd\u200b</li> <li>\u200b\u8def\u7531\u8868\u200b\u4e0e\u200b\u8f6c\u200b\u53d1\u8868\u200b\u7684\u200b\u533a\u522b\u200b</li> <li>\u200b\u8def\u7531\u200b\u524d\u7f00\u200b\u3001\u200b\u534f\u8bae\u200b\u7c7b\u578b\u200b\u3001\u200b\u4f18\u5148\u7ea7\u200b\u7b49\u200b</li> <li>Linux \u200b\u5185\u6838\u200b\u7684\u200b\u8def\u7531\u8868\u200b</li> <li>\u200b\u6570\u636e\u200b\u5e27\u200b\u8f6c\u53d1\u200b\u8fc7\u7a0b\u200b\u4e2d\u200bIP\u200b\u5730\u5740\u200b\u53ca\u200bMAC\u200b\u5730\u5740\u200b\u7684\u200b\u53d8\u5316\u200b</li> </ol>"},{"location":"embedded_development/#514","title":"5.1.4. \u200b\u4f20\u8f93\u5c42","text":"<p>\u200b\u5f53\u200b\u53d1\u9001\u200b\u5927\u91cf\u200b\u6570\u636e\u200b\u65f6\u200b\uff0c\u200b\u5f88\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u4e22\u5305\u200b\u7684\u200b\u60c5\u51b5\u200b\uff0c\u200b\u53e6\u4e00\u53f0\u200b\u7535\u8111\u200b\u8981\u200b\u544a\u8bc9\u200b\u662f\u5426\u200b\u5b8c\u6574\u200b\u63a5\u6536\u200b\u5230\u200b\u5168\u90e8\u200b\u7684\u200b\u5305\u200b\u3002\u200b\u5982\u679c\u200b\u7f3a\u200b\u4e86\u200b\uff0c\u200b\u5c31\u200b\u544a\u8bc9\u200b\u4e22\u200b\u4e86\u200b\u54ea\u4e9b\u200b\u5305\u200b\uff0c\u200b\u7136\u540e\u200b\u518d\u53d1\u200b\u4e00\u6b21\u200b\uff0c\u200b\u76f4\u81f3\u200b\u5168\u90e8\u200b\u63a5\u6536\u200b\u4e3a\u6b62\u200b\u3002</p> <p>\u200b\u7b80\u5355\u200b\u6765\u8bf4\u200b\uff0c\u200b\u4f20\u8f93\u5c42\u200b\u7684\u200b\u4e3b\u8981\u200b\u529f\u80fd\u200b\u5c31\u662f\u200b\uff1a\u200b\u76d1\u63a7\u200b\u6570\u636e\u4f20\u8f93\u200b\u670d\u52a1\u200b\u7684\u200b\u8d28\u91cf\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u62a5\u6587\u200b\u7684\u200b\u6b63\u786e\u200b\u4f20\u8f93\u200b\u3002</p>"},{"location":"embedded_development/#515","title":"5.1.5. \u200b\u4f1a\u8bdd\u5c42","text":"<p>\u200b\u867d\u7136\u200b\u5df2\u7ecf\u200b\u53ef\u4ee5\u200b\u5b9e\u73b0\u200b\u7ed9\u200b\u6b63\u786e\u200b\u7684\u200b\u8ba1\u7b97\u673a\u200b\uff0c\u200b\u53d1\u9001\u200b\u6b63\u786e\u200b\u7684\u200b\u5c01\u88c5\u200b\u8fc7\u540e\u200b\u7684\u200b\u4fe1\u606f\u200b\u4e86\u200b\u3002\u200b\u4f46\u200b\u6211\u4eec\u200b\u603b\u200b\u4e0d\u200b\u53ef\u80fd\u200b\u6bcf\u6b21\u200b\u90fd\u200b\u8981\u200b\u8c03\u7528\u200b\u4f20\u8f93\u5c42\u200b\u534f\u8bae\u200b\u53bb\u200b\u6253\u5305\u200b\uff0c\u200b\u7136\u540e\u200b\u518d\u200b\u8c03\u7528\u200bIP\u200b\u534f\u8bae\u200b\u53bb\u200b\u627e\u200b\u8def\u7531\u200b\uff0c\u200b\u6240\u4ee5\u200b\u6211\u4eec\u200b\u8981\u200b\u5efa\u7acb\u200b\u4e00\u4e2a\u200b\u81ea\u52a8\u200b\u6536\u53d1\u200b\u5305\u200b\uff0c\u200b\u81ea\u52a8\u200b\u5bfb\u5740\u200b\u7684\u200b\u529f\u80fd\u200b\u3002\u200b\u4e8e\u662f\u200b\u4f1a\u8bdd\u5c42\u200b\u51fa\u73b0\u200b\u4e86\u200b\uff1a\u200b\u5b83\u200b\u7684\u200b\u4f5c\u7528\u200b\u5c31\u662f\u200b\u5efa\u7acb\u200b\u548c\u200b\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u200b\u4e4b\u95f4\u200b\u7684\u200b\u901a\u4fe1\u200b\u3002</p>"},{"location":"embedded_development/#516","title":"5.1.6. \u200b\u8868\u793a\u5c42","text":"<p>\u200b\u8868\u793a\u5c42\u200b\u8d1f\u8d23\u200b\u6570\u636e\u683c\u5f0f\u200b\u7684\u200b\u8f6c\u6362\u200b\uff0c\u200b\u5c06\u200b\u5e94\u7528\u200b\u5904\u7406\u200b\u7684\u200b\u4fe1\u606f\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u9002\u5408\u200b\u7f51\u7edc\u200b\u4f20\u8f93\u200b\u7684\u200b\u683c\u5f0f\u200b\uff0c\u200b\u6216\u8005\u200b\u5c06\u200b\u6765\u81ea\u200b\u4e0b\u200b\u4e00\u5c42\u200b\u7684\u200b\u6570\u636e\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e0a\u5c42\u200b\u80fd\u200b\u5904\u7406\u200b\u7684\u200b\u683c\u5f0f\u200b\u3002</p>"},{"location":"embedded_development/#517","title":"5.1.7. \u200b\u5e94\u7528\u5c42","text":"<ol> <li>\u200b\u88f8\u673a\u200b\u79fb\u690d\u200blwIP</li> <li>LWIP\u200b\u4f7f\u7528\u200b\u7ecf\u9a8c\u200b</li> <li>Lwip\u200b\u6570\u636e\u200b\u4f20\u9012\u200b\u6d41\u7a0b\u200b\u53ca\u200b\u4e3b\u8981\u200b\u51fd\u6570\u200b\u7406\u89e3\u200b</li> </ol>"},{"location":"embedded_development/#6","title":"6. \u200b\u6807\u51c6\u200b\u5e93","text":""},{"location":"embedded_development/#61-newlib","title":"6.1. newlib","text":"<p>newlib\u200b\u662f\u200b\u4e00\u4e2a\u200b\u9762\u5411\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b\u7684\u200bc\u200b\u8fd0\u884c\u5e93\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u88f8\u673a\u200b\u8fd0\u884c\u200b\u3002</p> <p>\u200b\u79fb\u690d\u200b</p> <p>Newlib\u200b\u7684\u200b\u6240\u6709\u200b\u5e93\u51fd\u6570\u200b\u90fd\u200b\u5efa\u7acb\u200b\u5728\u200b20\u200b\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u57fa\u7840\u200b\u4e0a\u200b\uff0c\u200b\u8fd9\u200b20\u200b\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u5b8c\u6210\u200b\u4e00\u4e9b\u200bnewlib\u200b\u65e0\u6cd5\u200b\u5b9e\u73b0\u200b\u7684\u200b\u529f\u80fd\u200b\uff1a</p> <ol> <li>I/O\u200b\u548c\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u8bbf\u95ee\u200b(open\u3001close\u3001read\u3001write\u3001lseek\u3001stat\u3001fstat\u3001fcntl\u3001link\u3001unlink\u3001rename)\uff1b</li> <li>\u200b\u6269\u5927\u200b\u5185\u5b58\u200b\u5806\u200b\u7684\u200b\u9700\u6c42\u200b(sbrk)\uff1b</li> <li>\u200b\u83b7\u5f97\u200b\u5f53\u524d\u200b\u7cfb\u7edf\u200b\u7684\u200b\u65e5\u671f\u200b\u548c\u200b\u65f6\u95f4\u200b(gettimeofday\u3001times)\uff1b</li> <li>\u200b\u5404\u79cd\u7c7b\u578b\u200b\u7684\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u200b\u51fd\u6570\u200b(execve\u3001fork\u3001getpid\u3001kill\u3001wait\u3001_exit)\uff1b</li> </ol> <p>\u200b\u8fd9\u200b20\u200b\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u5728\u200b\u8bed\u4e49\u200b\u3001\u200b\u8bed\u6cd5\u200b\u4e0a\u200b\u4e0e\u200bPOSIX\u200b\u6807\u51c6\u200b\u4e0b\u200b\u5bf9\u5e94\u200b\u7684\u200b20\u200b\u4e2a\u200b\u540c\u540d\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u662f\u200b\u5b8c\u5168\u200b\u517c\u5bb9\u200b\u7684\u200b\u3002\u200b\u6210\u529f\u200b\u79fb\u690d\u200bnewlib\u200b\u7684\u200b\u5173\u952e\u200b\u662f\u200b\u5728\u200b\u76ee\u6807\u200b\u7cfb\u7edf\u200b\u73af\u5883\u200b\u4e0b\u200b\uff0c\u200b\u627e\u5230\u200b\u80fd\u591f\u200b\u4e0e\u200b\u8fd9\u4e9b\u200b\u6869\u200b\u51fd\u6570\u200b\u8854\u63a5\u200b\u7684\u200b\u529f\u80fd\u200b\u51fd\u6570\u200b\u5e76\u200b\u5b9e\u73b0\u200b\u8fd9\u4e9b\u200b\u6869\u200b\u51fd\u6570\u200b\u3002</p> <p>Newlib\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u53ef\u200b\u91cd\u5165\u200b\u7684\u200b\u548c\u200b\u4e0d\u53ef\u200b\u91cd\u5165\u200b\u7684\u200b\u4e24\u79cd\u200b\u7248\u672c\u200b\u3002\u200b\u4e24\u79cd\u200b\u7248\u672c\u200b\u7684\u200b\u533a\u522b\u200b\u5728\u4e8e\u200b\uff0c</p> <ul> <li> <p>\u200b\u4e0d\u53ef\u200b\u91cd\u5165\u200b\u7248\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u540d\u5b57\u200b\u662f\u200bxxx\uff0c\u200b\u5219\u200b\u5bf9\u5e94\u200b\u7684\u200b\u53ef\u200b\u91cd\u5165\u200b\u7248\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u540d\u5b57\u200b\u662f\u200b_xxx_r\uff0c\u200b\u5982\u200bclose\u200b\u548c\u200b_close_r\uff0copen\u200b\u548c\u200b_open_r\uff0c\u200b\u7b49\u7b49\u200b\u3002</p> </li> <li> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u53ef\u200b\u91cd\u5165\u200b\u7684\u200b\u6869\u200b\u51fd\u6570\u200b\u5728\u200b\u53c2\u6570\u8868\u200b\u4e2d\u200b\u542b\u6709\u200b\u4e00\u4e2a\u200b_reent\u200b\u7ed3\u6784\u200b\u6307\u9488\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u6307\u9488\u200b\u4f7f\u5f97\u200b\u7cfb\u7edf\u200b\u7684\u200b\u5b9e\u73b0\u200b\u8005\u200b\u80fd\u200b\u5728\u200b\u5e93\u200b\u548c\u200b\u76ee\u6807\u200b\u64cd\u4f5c\u200b\u73af\u5883\u200b\u4e4b\u95f4\u200b\u4f20\u9001\u200b\u4e0a\u4e0b\u6587\u200b\u76f8\u5173\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5c24\u5176\u200b\u662f\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\u65f6\u200b\uff0c\u200b\u80fd\u591f\u200b\u4fbf\u6377\u200b\u7684\u200b\u4f20\u9001\u200berrno\u200b\u7684\u200b\u503c\u200b\u5230\u200b\u9002\u5f53\u200b\u7684\u200b\u4efb\u52a1\u200b\u4e2d\u200b\u3002</p> </li> </ul> <p>\u200b\u6240\u8c13\u200b\u6700\u5c0f\u200b\u5b9e\u73b0\u200b\u662f\u200b\u6307\u200b\u5047\u5b9a\u200b\u5c06\u8981\u200b\u79fb\u690d\u200b\u7684\u200b\u76ee\u6807\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\uff0c\u200b\u4e5f\u200b\u6ca1\u6709\u200b\u7b26\u5408\u200bPOSIX\u200b\u6807\u51c6\u200b\u7684\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u673a\u5236\u200b\u548c\u200b\u5e94\u7528\u200b\u7f16\u7a0b\u200b\u63a5\u53e3\u200b(Application Programming Interface\uff0c API)\uff0c\u200b\u4ec5\u4ec5\u200b\u5b9e\u73b0\u200bnewlib\u200b\u7684\u200b\u4e00\u4e2a\u200b\u6700\u5c0f\u200b\u79fb\u690d\u200b\u3002</p> <ol> <li> <p>\u200b\u5728\u200bnewlib\u200b\u7684\u200b\u79fb\u690d\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u5168\u529f\u80fd\u200b\u5b9e\u73b0\u200b\u7684\u200b\u6869\u200b\u51fd\u6570\u200b\u53ea\u6709\u200bopen\u3001close\u3001read\u3001write\u200b\u548c\u200bsbrk\u200b\u4e94\u4e2a\u200b\uff0c\u200b\u5176\u4ed6\u200b\u6869\u200b\u51fd\u6570\u200b\u4ec5\u4ec5\u200b\u5b9e\u73b0\u200b\u4e00\u4e2a\u200b\u8fd4\u56de\u200b\u9519\u8bef\u200b\u7684\u200b\u7a7a\u200b\u51fd\u6570\u200b\u3002</p> </li> <li> <p>\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u200b\u7684\u200bexecve\u3001fork\u3001getpid\u3001kill\u3001wait\u200b\u548c\u200b_exit\u200b\u516d\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\uff0c\u200b\u4ec5\u4ec5\u200b\u5b9e\u73b0\u200b\u4e00\u4e2a\u200b\u8fd4\u56de\u200b-1\u200b\u7684\u200b\u7a7a\u200b\u51fd\u6570\u200b\uff0c\u200b\u8fd4\u56de\u200b\u4e4b\u524d\u200b\u5c06\u200berrno\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bENOTSUP\uff0c\u200b\u8868\u793a\u200b\u7cfb\u7edf\u200b\u4e0d\u200b\u652f\u6301\u200b\u8be5\u200b\u51fd\u6570\u200b\u3002</p> </li> <li> <p>\u200b\u4e0e\u200b\u6587\u4ef6\u200b\u76f8\u5173\u200b\u7684\u200blink\u200b\u548c\u200bunlink\u200b\u6869\u200b\u51fd\u6570\u200b\u4e5f\u200b\u4ec5\u4ec5\u200b\u5b9e\u73b0\u200b\u4e00\u4e2a\u200b\u8fd4\u56de\u200b-1\u200b\u7684\u200b\u7a7a\u200b\u51fd\u6570\u200b\uff0c\u200b\u5c06\u200berrno\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bEMLINK\u200b\u8868\u793a\u200b\u8fde\u63a5\u200b\u8fc7\u591a\u200b\uff1blseek\u200b\u51fd\u6570\u200b\u5219\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fd4\u56de\u200b\u4efb\u4f55\u200b\u9519\u8bef\u200b\uff0c\u200b\u76f4\u63a5\u200b\u8fd4\u56de\u200b0\uff0c\u200b\u8868\u793a\u200b\u64cd\u4f5c\u200b\u6210\u529f\u200b\u3002</p> </li> <li> <p>fstat\u200b\u548c\u200bstat\u200b\u6869\u200b\u51fd\u6570\u200b\u5728\u200bnewlib\u200b\u4e2d\u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200b\u5224\u65ad\u200b\u6d41\u200b\u7684\u200b\u7c7b\u578b\u200b(\u200b\u5e38\u89c4\u200b\u6587\u4ef6\u200b\u3001\u200b\u5b57\u7b26\u200b\u8bbe\u5907\u200b\u3001\u200b\u76ee\u5f55\u200b)\uff0c\u200b\u5c06\u200b\u5176\u200b\u5b9e\u73b0\u200b\u4e3a\u200b\u4e0d\u8bba\u200b\u8f93\u5165\u200b\u53c2\u6570\u200b\u5982\u4f55\u200b\uff0c\u200b\u90fd\u200b\u8fd4\u56de\u200b\u5b57\u7b26\u200b\u8bbe\u5907\u200b\u7c7b\u578b\u200b\u7684\u200b\u7a7a\u200b\u51fd\u6570\u200b\u3002</p> </li> <li> <p>times\u200b\u6869\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u5404\u79cd\u200b\u65f6\u95f4\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5982\u679c\u200b\u76ee\u6807\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u4efb\u52a1\u200b\u4e0d\u80fd\u200b\u63d0\u4f9b\u200b\u7c7b\u4f3c\u200b\u7684\u200b\u65f6\u95f4\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4ec5\u4ec5\u200b\u5b9e\u73b0\u200b\u4e00\u4e2a\u200b\u8fd4\u56de\u200b-1\u200b\u7684\u200b\u7a7a\u200b\u51fd\u6570\u200b\uff0c\u200b\u5c06\u200berrno\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bENOTSUP\u3002</p> </li> <li> <p>\u200b\u7531\u4e8e\u200bnewlib\u200b\u8ba4\u4e3a\u200b\u5728\u200b\u76ee\u6807\u200b\u7cfb\u7edf\u200b\u4e2d\u200bfcntl\u3001rename\u200b\u548c\u200bgettimeofday\u200b\u4e09\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u7f3a\u7701\u200b\u662f\u200b\u4e0d\u200b\u63d0\u4f9b\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e5f\u200b\u4e0d\u200b\u63d0\u4f9b\u200b\u8fd9\u200b\u4e09\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u5b9e\u73b0\u200b\u3002</p> </li> </ol> <p>\u200b\u7a0b\u5e8f\u200b\u7279\u70b9\u200b</p> <p>C\u200b\u8fd0\u884c\u5e93\u200b\u7684\u200b\u53ef\u200b\u91cd\u5165\u6027\u200b\u95ee\u9898\u200b\u4e3b\u8981\u200b\u662f\u200b<code>\u200b\u5e93\u4e2d\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b</code>\u200b\u5728\u200b<code>\u200b\u591a\u4efb\u52a1\u200b\u73af\u5883\u200b</code>\u200b\u4e0b\u200b\u7684\u200b<code>\u200b\u53ef\u91cd\u200b\u5165\u6027\u200b\u95ee\u9898\u200b</code>\uff0cNewlib\u200b\u89e3\u51b3\u200b\u8fd9\u4e2a\u200b\u95ee\u9898\u200b\u7684\u200b\u65b9\u6cd5\u200b\u662f\u200b\uff1a</p> <ol> <li> <p>\u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200bstruct _reent\u200b\u7c7b\u578b\u200b\u7684\u200b\u7ed3\u6784\u200b\uff0c\u200b\u5c06\u200b\u8fd0\u884c\u5e93\u200b\u6240\u6709\u200b\u4f1a\u200b\u5f15\u8d77\u200b\u53ef\u91cd\u200b\u5165\u6027\u200b\u95ee\u9898\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u90fd\u200b\u653e\u5230\u200b\u8be5\u200b\u7ed3\u6784\u200b\u4e2d\u200b\u3002</p> </li> <li> <p>\u200b\u800c\u200b\u8fd9\u4e9b\u200b\u5168\u5c40\u53d8\u91cf\u200b\u5219\u200b\u88ab\u200b\u91cd\u65b0\u200b\u5b9a\u4e49\u200b\u4e3a\u200b\u82e5\u5e72\u4e2a\u200b\u5b8f\u200b\uff0c\u200b\u4ee5\u200berrno\u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u540d\u4e3a\u200b<code>errno</code>\u200b\u7684\u200b\u5b8f\u200b\u5f15\u7528\u200b\u6307\u5411\u200bstruct _reent\u200b\u7ed3\u6784\u200b\u7c7b\u578b\u200b\u7684\u200b\u4e00\u4e2a\u200b\u5168\u5c40\u200b\u6307\u9488\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u6307\u9488\u200b\u53eb\u505a\u200b<code>_impure_ptr</code>\u3002</p> </li> <li> <p>\u200b\u5bf9\u4e8e\u200b\u7528\u6237\u200b\uff0c\u200b\u8fd9\u200b\u4e00\u5207\u200b\u90fd\u200b\u88ab\u200berrno\u200b\u5b8f\u200b\u9690\u85cf\u200b\u4e86\u200b\uff0c\u200b\u9700\u8981\u200b\u68c0\u67e5\u200b\u9519\u8bef\u200b\u65f6\u200b\uff0c\u200b\u7528\u6237\u200b\u53ea\u200b\u9700\u8981\u200b\u50cf\u200b\u5176\u4ed6\u200bANSI C\u200b\u73af\u5883\u200b\u4e0b\u200b\u6240\u200b\u505a\u200b\u7684\u200b\u4e00\u6837\u200b\uff0c\u200b\u68c0\u67e5\u200b<code>errno\u200b\u53d8\u91cf\u200b</code>\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4e86\u200b\u3002</p> <ul> <li>\u200b\u5b9e\u9645\u4e0a\u200b\uff0c\u200b\u7528\u6237\u200b\u5bf9\u200berrno\u200b\u5b8f\u200b\u7684\u200b\u8bbf\u95ee\u200b\u662f\u200b\u8fd4\u56de\u200b<code>_impure_ptr-\uff1eerrno</code>\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u4e00\u4e2a\u200b\u5168\u5c40\u53d8\u91cf\u200b\u7684\u200b\u503c\u200b\u3002</li> </ul> </li> <li> <p>Newlib\u200b\u5b9a\u4e49\u200b\u4e86\u200b_reent\u200b\u7ed3\u6784\u200b\u7c7b\u578b\u200b\u7684\u200b\u4e00\u4e2a\u200b\u9759\u6001\u200b\u5b9e\u4f8b\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b\u65f6\u7528\u200b\u5168\u5c40\u200b\u6307\u9488\u200b<code>_impure_ptr</code>\u200b\u6307\u5411\u200b\u5b83\u200b\u3002</p> <ul> <li>\u200b\u5982\u679c\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u4efb\u52a1\u200b\uff0c\u200b\u90a3\u4e48\u200b\u7cfb\u7edf\u200b\u5c06\u200b\u6b63\u5e38\u200b\u8fd0\u884c\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u505a\u200b\u989d\u5916\u200b\u7684\u200b\u5de5\u4f5c\u200b\uff1b\u200b\u5982\u679c\u200b\u5e0c\u671b\u200bnewlib\u200b\u8fd0\u884c\u200b\u5728\u200b\u591a\u4efb\u52a1\u200b\u73af\u5883\u200b\u4e0b\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5b8c\u6210\u200b\u4e0b\u9762\u200b\u7684\u200b\u4e24\u4e2a\u200b\u6b65\u9aa4\u200b\uff1a<ul> <li>\u200b\u6bcf\u4e2a\u200b\u4efb\u52a1\u200b\u63d0\u4f9b\u200b\u4e00\u4e2a\u200b_reent\u200b\u7ed3\u6784\u200b\u7684\u200b\u5b9e\u4f8b\u200b\u5e76\u200b\u521d\u59cb\u5316\u200b\uff1b</li> <li>\u200b\u4efb\u52a1\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u7684\u200b\u65f6\u523b\u200b\u91cd\u65b0\u200b\u8bbe\u7f6e\u200b_impure_ptr\u200b\u6307\u9488\u200b\uff0c\u200b\u4f7f\u200b\u5b83\u200b\u6307\u5411\u200b\u5373\u5c06\u200b\u6295\u5165\u200b\u8fd0\u884c\u200b\u4efb\u52a1\u200b\u7684\u200b_reent\u200b\u7ed3\u6784\u200b\u5b9e\u4f8b\u200b\u3002</li> </ul> </li> </ul> </li> </ol> <p>\u200b\u8fd9\u6837\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4fdd\u969c\u200b\u5927\u591a\u6570\u200b\u5e93\u51fd\u6570\u200b(\u200b\u5c24\u5176\u200b\u662f\u200bstdio\u200b\u5e93\u51fd\u6570\u200b)\u200b\u7684\u200b\u53ef\u200b\u91cd\u5165\u6027\u200b\u3002\u200b\u5982\u679c\u200b\u9700\u8981\u200b\u53ef\u200b\u91cd\u5165\u200b\u7684\u200bmalloc\uff0c\u200b\u8fd8\u200b\u5fc5\u987b\u200b\u8bbe\u6cd5\u200b\u5b9e\u73b0\u200b__malloc_lock()\u200b\u548c\u200b__malloc_unlock()\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u4eec\u200b\u5728\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u4fdd\u969c\u200b\u5806\u200b(heap)\u200b\u5728\u200b\u591a\u4efb\u52a1\u200b\u73af\u5883\u200b\u4e0b\u200b\u7684\u200b\u5b89\u5168\u200b\u3002</p> <p>I/O\u200b\u5b9e\u73b0\u200b</p> <p>Newlib\u200b\u5728\u200b\u4f7f\u7528\u200bopen\u3001close\u3001read\u200b\u548c\u200bwrite\u200b\u6869\u200b\u51fd\u6570\u200b\u65f6\u200b\u4e25\u683c\u9075\u5b88\u200bPOSIX\u200b\u6807\u51c6\u200b\uff0c\u200b\u4e3a\u4e86\u200b\u4f7f\u200b\u5b9e\u73b0\u200b\u7684\u200b\u6869\u200b\u51fd\u6570\u200b\u5b8c\u5168\u7b26\u5408\u200bPOSIX\uff0c\u200b\u5c31\u200b\u5fc5\u987b\u200b\u5728\u200b\u5185\u90e8\u200b\u673a\u5236\u200b\u4e0a\u200b\u5b9e\u73b0\u200b\u8bbe\u5907\u200b\u540d\u8868\u200b\u3001\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u548c\u200b\u9a71\u52a8\u200b\u5730\u5740\u200b\u8868\u200b3\u200b\u4e2a\u8868\u200b\u7684\u200b\u76f8\u5173\u200b\u64cd\u4f5c\u200b\u3002</p> <ul> <li> <p>\u200b\u4e09\u4e2a\u200b\u8868\u200b\u7684\u200b\u7ed3\u6784\u200b\u3001\u200b\u4f5c\u7528\u200b\u53ca\u200b\u76f8\u5173\u200b\u64cd\u4f5c\u200b</p> </li> <li> <p>\u200b\u8bbe\u5907\u200b\u540d\u8868\u200b\u8bb0\u5f55\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6240\u6709\u200b\u8bbe\u5907\u200b\u7684\u200b\u540d\u5b57\u200b\u53ca\u5176\u200b\u8bbe\u5907\u200b\u53f7\u200b\u3002\u200b\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b\u65f6\u200b\u5fc5\u987b\u200b\u5c06\u200b\u6240\u6709\u200b\u7684\u200b\u8bbe\u5907\u200b\u540d\u200b\u53ca\u5176\u200b\u8bbe\u5907\u200b\u53f7\u200b\u586b\u5165\u200b\u8868\u4e2d\u200b\u5907\u67e5\u200b\u3002</p> <ul> <li>\u200b\u5bf9\u4e8e\u200b\u8bbe\u5907\u200b\u540d\u8868\u200b\u5e94\u8be5\u200b\u5b9e\u73b0\u200b\u4ee5\u4e0b\u200b\u4e24\u4e2a\u200b\u64cd\u4f5c\u200b\uff1a<ol> <li>\u200b\u8bbe\u5907\u200b\u540d\u200b/\u200b\u8bbe\u5907\u200b\u53f7\u200b\u6ce8\u518c\u200b\u51fd\u6570\u200bNameRegister\uff1b</li> <li>\u200b\u4ece\u200b\u8bbe\u5907\u200b\u540d\u5230\u200b\u8bbe\u5907\u200b\u53f7\u200b\u7684\u200b\u8f6c\u6362\u200b\u51fd\u6570\u200bNameLookup\uff1b</li> </ol> </li> </ul> </li> <li> <p>\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u8bb0\u5f55\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u5f53\u524d\u200b\u6253\u5f00\u200b\u7684\u200b\u8bbe\u5907\u200b\u7684\u200b\u8bbe\u5907\u200b\u53f7\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u8868\u9879\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u5904\u4e8e\u200b\u6253\u5f00\u200b\u72b6\u6001\u200b\u7684\u200b\u8bbe\u5907\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u8868\u9879\u200b\u7684\u200b\u7d22\u5f15\u200b\u503c\u200b\u5c31\u662f\u200b\u9700\u8981\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u7528\u6237\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u3002</p> <ul> <li>\u200b\u5bf9\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u9700\u8981\u200b\u5b9e\u73b0\u200b\u4ee5\u4e0b\u200b3\u200b\u4e2a\u200b\u64cd\u4f5c\u200b\uff1a<ol> <li>\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u5206\u914d\u200b\u51fd\u6570\u200bFdAllocate\uff1b</li> <li>\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u91ca\u653e\u200b\u51fd\u6570\u200bFdFree\uff1b</li> <li>\u200b\u4ece\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u5230\u200b\u8bbe\u5907\u200b\u53f7\u200b\u7684\u200b\u8f6c\u6362\u200b\u51fd\u6570\u200bFd2DevCode\uff1b</li> </ol> </li> </ul> </li> <li> <p>\u200b\u9a71\u52a8\u200b\u5730\u5740\u200b\u8868\u200b\u8bb0\u5f55\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6bcf\u4e2a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200b\u5165\u53e3\u200b\u5730\u5740\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u8868\u9879\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\uff0c\u200b\u5bf9\u200b\u6bcf\u4e2a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u90fd\u200b\u5e94\u8be5\u200b\u5b9e\u73b0\u200b\u4e94\u4e2a\u200b\u5177\u6709\u200b\u7edf\u4e00\u200b\u63a5\u53e3\u200b\u7684\u200b\u64cd\u7ec4\u200b\u51fd\u6570\u200b\uff1ainit\u3001open\u3001close\u3001read\u3001write\u3002\u200b\u6bcf\u4e2a\u200b\u8868\u9879\u200b\u5728\u200b\u8868\u4e2d\u200b\u7684\u200b\u7d22\u5f15\u200b\u503c\u200b\u5c31\u662f\u200b\u8be5\u200b\u8bbe\u5907\u200b\u7684\u200b\u8bbe\u5907\u200b\u53f7\u200b\u3002\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u662f\u200b\u6bcf\u4e2a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u90fd\u200b\u5fc5\u987b\u200b\u63d0\u4f9b\u200binit\u200b\u64cd\u4f5c\u200b\u3002</p> <ul> <li>\u200b\u5bf9\u200b\u9a71\u52a8\u200b\u5730\u5740\u200b\u8868\u200b\u9700\u8981\u200b\u5b9e\u73b0\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a<ol> <li>\u200b\u521d\u59cb\u5316\u200b\u9a71\u52a8\u200b\u8868\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u9a71\u52a8\u200b\u51fd\u6570\u200bInitAllDrivers\uff1b</li> <li>\u200b\u8be5\u200b\u64cd\u4f5c\u200b\u5bf9\u8868\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4e2a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u8c03\u7528\u200binit\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5b8c\u6210\u200b\u8868\u4e2d\u200b\u6240\u6709\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u64cd\u4f5c\u200b\u3002</li> <li> <p>\u200b\u5728\u200b\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u65f6\u95f4\u200b\uff0c\u200b\u5e94\u8be5\u200b\u8c03\u7528\u200bInitAllDrivers()\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5b8c\u6210\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6240\u6709\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u64cd\u4f5c\u200b\u3002\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200binit\u200b\u64cd\u4f5c\u200b\u4e2d\u200b\uff0c\u200b\u5e94\u8be5\u200b\u8c03\u7528\u200bNameRegister()\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5b8c\u6210\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8bbe\u5907\u200b\u6ce8\u518c\u200b\uff0c\u200b\u4ee5\u200bCOM1\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200bcom1_init()\u200b\u64cd\u4f5c\u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u5b83\u200b\u7684\u200b\u5b9e\u73b0\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>void com1_init(int devCode)\n{\n    /*\u200b\u9996\u5148\u200b\u6ce8\u518c\u200b\u8bbe\u5907\u200b\u540d\u200b\u548c\u200b\u8bbe\u5907\u200b\u53f7\u200b\u5230\u200b\u8bbe\u5907\u200b\u540d\u8868\u200b\u4e2d\u200b*/\n    NameRegister(\"COM1\"\uff0c devCode);\n    /*\u200b\u7136\u540e\u200b\u5b8c\u6210\u200b\u5176\u4ed6\u200b\u7684\u200b\u8bbe\u5907\u200b\u521d\u59cb\u5316\u200b\u64cd\u4f5c\u200b*/\n}\n</code></pre> </li> </ol> </li> </ul> </li> </ul> <p>\u200b\u53ea\u8981\u200b\u6240\u6709\u200b\u7684\u200b\u8bbe\u5907\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u90fd\u200b\u9075\u5b88\u200b\u8fd9\u4e2a\u200b\u7ea6\u5b9a\u200b\uff0c\u200b\u5728\u200b\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b\u5b8c\u6210\u200b\u4e4b\u540e\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6240\u6709\u200b\u7684\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u5c31\u200b\u5f97\u5230\u200b\u4e86\u200b\u521d\u59cb\u5316\u200b\uff0c\u200b\u5e76\u4e14\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6240\u6709\u200b\u7684\u200b\u8bbe\u5907\u200b\u90fd\u200b\u6ce8\u518c\u200b\u5230\u200b\u4e86\u200b\u8bbe\u5907\u200b\u540d\u8868\u200b\u4e2d\u200b\u3002\u200b\u540e\u7eed\u200b\u7684\u200bI/O\u200b\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u5b9e\u73b0\u200b\u5c31\u200b\u975e\u5e38\u5bb9\u6613\u200b\u4e86\u200b\u3002</p> <p>open \u200b\u6869\u200b\u51fd\u6570\u200b\u5b9e\u73b0\u200b</p> <ol> <li>\u200b\u7528\u200bNameLookup()\u200b\u64cd\u4f5c\u200b\u5728\u200b\u8bbe\u5907\u200b\u540d\u8868\u200b\u4e2d\u200b\u641c\u7d22\u200b\u5339\u914d\u200b\u7684\u200b\u8bbe\u5907\u200b\u540d\u200b\uff0c\u200b\u5e76\u200b\u83b7\u5f97\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8bbe\u5907\u200b\u53f7\u200b\uff1b</li> <li>\u200b\u7528\u200bFdAllocate()\u200b\u64cd\u4f5c\u200b\u4ece\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u4e2d\u200b\u5206\u914d\u200b\u4e00\u4e2a\u200b\u7a7a\u200b\u7684\u200b\u8868\u9879\u200b\uff0c\u200b\u586b\u5165\u200b\u8bbe\u5907\u200b\u53f7\u200b\uff0c\u200b\u5e76\u200b\u83b7\u5f97\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7d22\u5f15\u200b\u53f7\u200b\u5373\u200bfd\uff1b</li> <li>\u200b\u901a\u8fc7\u200b\u8bbe\u5907\u200b\u53f7\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200b\u9a71\u52a8\u200b\u5730\u5740\u200b\u8868\u4e2d\u200b\u5bf9\u5e94\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200bopen\u200b\u64cd\u4f5c\u200b\uff1b</li> <li>\u200b\u8fd4\u56de\u200bfd\u3002</li> </ol> <p>read\u3001write\u200b\u548c\u200bclose\u200b\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u5b9e\u73b0\u200b</p> <p>read\u200b\u548c\u200bwrite\u200b\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u5b9e\u73b0\u200b\u65b9\u6cd5\u200b\u5b8c\u5168\u76f8\u540c\u200b\uff0c\u200b\u6d41\u7a0b\u200b\u5982\u4e0b\u200b\uff1a</p> <ol> <li>\u200b\u8c03\u7528\u200bFd2DevCode()\u200b\u64cd\u4f5c\u200b\u83b7\u5f97\u200b\u4e0e\u200b\u8f93\u5165\u200b\u53c2\u6570\u200bfd\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8bbe\u5907\u200b\u53f7\u200bdevCode\uff1b</li> <li>\u200b\u901a\u8fc7\u200b\u8bbe\u5907\u200b\u53f7\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200b\u9a71\u52a8\u200b\u5730\u5740\u200b\u8868\u4e2d\u200b\u5bf9\u5e94\u200b\u9a71\u52a8\u200b\u7684\u200bread\u200b\u6216\u200bwrite\u200b\u64cd\u4f5c\u200b\uff1b</li> <li>\u200b\u8fd4\u56de\u200b\u5b9e\u9645\u200b\u4ea4\u6362\u200b\u7684\u200b\u6570\u636e\u91cf\u200b\u3002</li> </ol> <p>close\u200b\u6869\u200b\u51fd\u6570\u200b\u7684\u200b\u5b9e\u73b0\u200b\u4e0e\u200bread\u3001write\u200b\u51e0\u4e4e\u200b\u5b8c\u5168\u76f8\u540c\u200b\uff0c\u200b\u552f\u4e00\u200b\u4e0d\u540c\u4e4b\u5904\u200b\u5728\u4e8e\u200b\u6700\u540e\u200b\u8c03\u7528\u200bFdFree()\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u91ca\u653e\u200bfd\u200b\u800c\u200b\u4e0d\u662f\u200b\u8fd4\u56de\u200b\u5b9e\u9645\u200b\u4ea4\u6362\u200b\u7684\u200b\u6570\u636e\u91cf\u200b\uff0c\u200b\u6d41\u7a0b\u200b\u5982\u4e0b\u200b\uff1a</p> <ol> <li>\u200b\u8c03\u7528\u200bFd2DevCode()\u200b\u64cd\u4f5c\u200b\u83b7\u5f97\u200b\u4e0e\u200b\u8f93\u5165\u200b\u53c2\u6570\u200bfd\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8bbe\u5907\u200b\u53f7\u200bdevCode\uff1b</li> <li>\u200b\u901a\u8fc7\u200b\u8bbe\u5907\u200b\u53f7\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200b\u9a71\u52a8\u200b\u5730\u5740\u200b\u8868\u4e2d\u200b\u5bf9\u5e94\u200b\u9a71\u52a8\u200b\u7684\u200bclose\u200b\u64cd\u4f5c\u200b\uff1b</li> <li>\u200b\u8c03\u7528\u200bFdFree()\u200b\u64cd\u4f5c\u200b\u91ca\u653e\u200bfd\u3002</li> </ol> <p>\u200b\u81f3\u6b64\u200b\uff0c\u200b\u4e0e\u200b\u8bbe\u5907\u200bI/O\u200b\u76f8\u5173\u200b\u7684\u200b\u56db\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200bopen\u3001close\u3001read\u200b\u548c\u200bwrite\u200b\u7684\u200b\u5b9e\u73b0\u200b\u5c31\u200b\u5168\u90e8\u200b\u5b8c\u6210\u200b\u4e86\u200b\u3002</p> <p>\u200b\u672c\u6587\u200b\u6ca1\u6709\u200b\u4ecb\u7ecd\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200b\u5b9e\u73b0\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5e76\u200b\u4e0d\u662f\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u4e0d\u200b\u91cd\u8981\u200b\uff0c\u200b\u6070\u6070\u76f8\u53cd\u200b\uff0c\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u4e2d\u200b\u5fc5\u987b\u200b\u5b8c\u6210\u200b\u53ef\u9760\u200b\u9ad8\u6548\u200b\u7684\u200b\u8bbe\u5907\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200b\u5404\u9879\u200b\u64cd\u4f5c\u200b\u5728\u200b\u8bed\u4e49\u4e0a\u200b\u4e0e\u200b\u4e0a\u9762\u200b4\u200b\u4e2a\u200b\u6869\u200b\u51fd\u6570\u200b\u5b8c\u5168\u4e00\u81f4\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5b9e\u8d28\u6027\u200b\u7684\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u5728\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u4e2d\u200b\u5b8c\u6210\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5728\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u7684\u200b\u5b9e\u73b0\u200b\u4e0a\u200b\u5fc5\u987b\u200b\u4ed4\u7ec6\u200b\u659f\u914c\u200b\u3002\u200b\u7531\u4e8e\u200b\u7bc7\u5e45\u200b\u7684\u200b\u539f\u56e0\u200b\uff0c\u200b\u4e0d\u518d\u200b\u8d58\u8ff0\u200b\u3002</p> <p>malloc</p> <p>\u200b\u5927\u591a\u6570\u200b\u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u200b\u90fd\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u81ea\u5df1\u200b\u7684\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u673a\u5236\u200b\uff0c\u200b\u5e76\u4e14\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u591a\u4efb\u52a1\u200b\u73af\u5883\u200b\u4e0b\u200b\u5bf9\u200b\u5185\u5b58\u200b\u5206\u914d\u673a\u5236\u200b\u7684\u200b\u4fdd\u62a4\u63aa\u65bd\u200b\uff0c\u200b\u5982\u679c\u200b\u79fb\u690d\u200bnewlib\u200b\u5230\u200b\u8fd9\u6837\u200b\u7684\u200b\u7cfb\u7edf\u200b\u65f6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u653e\u5f03\u200bnewlib\u200b\u81ea\u5e26\u200b\u7684\u200bmalloc\u200b\u51fd\u6570\u200b\u3002\u200b\u5c3d\u7ba1\u200bnewlib\u200b\u81ea\u5e26\u200b\u7684\u200bmalloc\u200b\u975e\u5e38\u200b\u9ad8\u6548\u200b\uff0c\u200b\u4f46\u662f\u200b\u51e0\u4e4e\u200b\u6240\u6709\u200b\u7684\u200b\u7528\u6237\u200b\u90fd\u200b\u4e60\u60ef\u200b\u4f7f\u7528\u200bmalloc\u200b\u6765\u200b\u4f5c\u4e3a\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u5668\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u6700\u597d\u200b\u5bf9\u7cfb\u7edf\u200b\u81ea\u5e26\u200b\u7684\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u200bAPI\u200b\u8fdb\u884c\u200b\u5c01\u88c5\u200b\uff0c\u200b\u4f7f\u200b\u5b83\u200b\u4e0d\u8bba\u200b\u5728\u200b\u98ce\u683c\u200b\u3001\u200b\u5916\u89c2\u200b\u4e0a\u200b\uff0c\u200b\u8fd8\u662f\u200b\u5728\u200b\u8bed\u4e49\u4e0a\u200b\u90fd\u200b\u4e0e\u200bmalloc\u200b\u5b8c\u5168\u76f8\u540c\u200b\uff0c\u200b\u8fd9\u200b\u5bf9\u4e8e\u200b\u63d0\u9ad8\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u53ef\u79fb\u690d\u6027\u200b\u5927\u6709\u200b\u597d\u5904\u200b\u3002</p> <p>\u200b\u5bf9\u4e8e\u200b\u90a3\u4e9b\u200b\u6ca1\u6709\u200b\u5b9e\u73b0\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u673a\u5236\u200b\u7684\u200b\u5d4c\u5165\u5f0f\u200b\u7cfb\u7edf\u200b\u73af\u5883\u200b\u6765\u8bf4\u200b\uff0cnewlib\u200b\u7684\u200bmalloc\u200b\u662f\u200b\u4e00\u4e2a\u200b\u975e\u5e38\u200b\u597d\u200b\u7684\u200b\u9009\u62e9\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u5b9e\u73b0\u200bsbrk\u200b\u6869\u200b\u51fd\u6570\u200b\uff0cmalloc\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u975e\u5e38\u200b\u597d\u200b\u5730\u200b\u5de5\u4f5c\u200b\u8d77\u6765\u200b\u3002\u200b\u4e0e\u200b\u4e4b\u200b\u540c\u540d\u200b\u7684\u200bPOSIX\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u4ece\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u83b7\u5f97\u200b\u4e00\u5757\u200b\u5185\u5b58\u200b\uff0c\u200b\u6bcf\u5f53\u200bmalloc\u200b\u9700\u8981\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u5185\u5b58\u200b\u65f6\u200b\uff0c\u200b\u90fd\u200b\u4f1a\u200b\u8c03\u7528\u200bsbrk\u200b\u51fd\u6570\u200b\u3002</p> <p>\u200b\u5728\u200b\u5355\u4efb\u52a1\u200b\u73af\u5883\u200b\u4e0b\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u5b9e\u73b0\u200bsbrk\u200b\u6869\u200b\u51fd\u6570\u200b\uff0cmalloc\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u6b63\u5e38\u200b\u8fd0\u884c\u200b\uff1b\u200b\u4f46\u200b\u5728\u200b\u591a\u4efb\u52a1\u200b\u73af\u5883\u200b\u4e0b\u200b\uff0c\u200b\u8fd8\u200b\u9700\u200b\u5b9e\u73b0\u200b__malloc_lock()\u200b\u548c\u200b__malloc_unlock()\u200b\u51fd\u6570\u200b\uff0cnewlib\u200b\u7528\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u51fd\u6570\u200b\u6765\u200b\u4fdd\u62a4\u200b\u5185\u5b58\u200b\u5806\u200b\u514d\u53d7\u200b\u51b2\u51fb\u200b\u3002\u200b\u7528\u6237\u200b\u53ef\u200b\u5229\u7528\u200b\u76ee\u6807\u200b\u73af\u5883\u200b\u4e2d\u200b\u7684\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u673a\u5236\u200b\u6765\u200b\u5b9e\u73b0\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u5728\u200b__malloc_lock()\u200b\u51fd\u6570\u200b\u4e2d\u200b\u7533\u8bf7\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u800c\u200b\u5728\u200b__malloc_unlock()\u200b\u51fd\u6570\u200b\u4e2d\u200b\u91ca\u653e\u200b\u540c\u4e00\u4e2a\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\u3002</p>"},{"location":"embedded_development/#7","title":"7. \u200b\u5f85\u200b\u5b8c\u6210","text":"<ul> <li> <p> ABI\uff0cApplication Binary Interface\u200b\u662f\u200b\u4ec0\u4e48\u200b\uff1f\u200b\u4e3b\u8981\u200b\u662f\u200b\u4e24\u200b\u65b9\u9762\u200b</p> <ul> <li>calling convention\uff0c\u200b\u5373\u200b\u8c03\u7528\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u7684\u200b\u65f6\u5019\u200b\u600e\u4e48\u200b\u4f20\u53c2\u200b\uff0c\u200b\u662f\u200b<code>\u200b\u6309\u200b\u987a\u5e8f\u200b\u7ed9\u200b\u653e\u5230\u200b\u6808\u4e0a\u200b</code>\uff08\u200b\u6808\u9876\u200b\u88ab\u200b\u4e00\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u6307\u5b9a\u200b\uff09\uff0c\u200b\u8fd8\u662f\u200b<code>\u200b\u7528\u200b\u591a\u4e2a\u200b\u5bc4\u5b58\u5668\u200b</code>\u3002<ul> <li>\u200b\u5b83\u200b\u89c4\u5b9a\u200b\u4e86\u200b\u5806\u6808\u200b\u5bc4\u5b58\u5668\u200b\u3001\u200b\u94fe\u63a5\u200b\u5bc4\u5b58\u5668\u200b\u3001\u200b\u54ea\u4e9b\u200b\u5bc4\u5b58\u5668\u200b\u5bc4\u5b58\u5668\u200b\u9700\u8981\u200b\u5728\u200b\u51fd\u6570\u200b\u5934\u5c3e\u200b\u4fdd\u5b58\u200b\u548c\u200b\u6062\u590d\u200b\u3001\u200b\u54ea\u4e9b\u200b\u5bc4\u5b58\u5668\u200b\u53ef\u4ee5\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u200b\u5bc4\u5b58\u5668\u200b\u7b49\u200b\uff0c\u200b\u8fd8\u6709\u200b\u4e00\u4e9b\u200b\u7279\u6b8a\u200b\u7528\u9014\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u5927\u90e8\u5206\u200b\u7279\u6b8a\u200b\u5bc4\u5b58\u5668\u200b\u90fd\u200b\u662f\u200b\u4f1a\u200b\u88ab\u200b\u9ad8\u9891\u200b\u4f7f\u7528\u200b\u7684\u200b\uff0c\u200b\u914d\u5408\u200b\u6307\u4ee4\u96c6\u200b\u8bbe\u8ba1\u200b\u53ef\u4ee5\u200b\u964d\u4f4e\u200b\u4ee3\u7801\u200b\u5bc6\u5ea6\u200b\uff1b\u200b\u9700\u8981\u200b\u4fdd\u5b58\u200b\u548c\u200b\u6062\u590d\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u4e2a\u6570\u200b\u540c\u6837\u200b\u4e5f\u200b\u4f1a\u200b\u5f71\u54cd\u200b\u4ee3\u7801\u200b\u5bc6\u5ea6\u200b\u3002</li> </ul> </li> <li>name mangle\uff0c\u200b\u5373\u200bC++\u200b\u5199\u200b\u7684\u200b\u51fd\u6570\u200b\u6216\u8005\u200b\u65b9\u6cd5\u200b\u4ee5\u53ca\u200b\u4e00\u5207\u200b\u53ef\u4ee5\u200b\u5f15\u7528\u200b\u7684\u200b\u4e1c\u897f\u200b\uff0c\u200b\u5728\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u91cc\u9762\u200b\u7684\u200b\u7b26\u53f7\u200b\u662f\u200b\u600e\u4e48\u6837\u200b\u751f\u6210\u200b\u7684\u200b\uff0c\u200b\u9664\u975e\u200b\u4f60\u200b\u6307\u5b9a\u200bextern \"C\"\uff0c\u200b\u5426\u5219\u200bC++\u200b\u4e0d\u4f1a\u200b\u539f\u6837\u200b\u5bfc\u51fa\u200b\u7b26\u53f7\u200b</li> <li>\u200b\u5b83\u200b\u6307\u5bfc\u200b\u7740\u200b\u7f16\u8bd1\u5668\u200b\u5982\u4f55\u200b\u751f\u6210\u200b\u4ee3\u7801\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u540c\u6837\u200b\u4e5f\u200b\u6307\u5bfc\u200b\u7740\u200b\u7528\u6237\u200b\u5982\u4f55\u200b\u5199\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u3002\u200b\u5b83\u200b\u4e3b\u8981\u200b\u5305\u542b\u200b\u51fd\u6570\u8c03\u7528\u200b\u7ea6\u5b9a\u200b\uff08calling convention\uff09\u3001\u200b\u6570\u636e\u200b\u7684\u200b\u5bf9\u9f50\u200b\u65b9\u5f0f\u200b\u7b49\u200b\u5185\u5bb9\u200b\u3002</li> </ul> </li> <li> <p> \u200b\u4e0d\u200b\u4f9d\u8d56\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7684\u200bC\u200b\u4ee3\u7801\u200b</p> </li> <li> <p> \u200b\u9501\u200b\u7684\u200b\u7528\u9014\u200b</p> <ul> <li> \u200b\u8fdb\u7a0b\u200b\u8c03\u5ea6\u200b<ul> <li>\u200b\u81ea\u65cb\u200b\u9501\u200b\u548c\u200b\u591a\u200b\u6838\u200b</li> <li>\u200b\u4e92\u65a5\u200b\u9501\u200b\u548c\u200b\u5355\u6838\u200b</li> <li>\u200b\u539f\u5b50\u200b\u64cd\u4f5c\u200b</li> </ul> </li> <li> \u200b\u9501\u200b\u5b9e\u73b0\u200b\u539f\u7406\u200b</li> </ul> </li> <li> \u200b\u5806\u6808\u200b\u6982\u5ff5\u200b<ul> <li> \u200b\u5185\u6838\u200b\u6808\u200b</li> <li> \u200b\u8fdb\u7a0b\u200b/\u200b\u7ebf\u7a0b\u200b\u6808\u200b</li> </ul> </li> <li> \u200b\u5185\u5b58\u200b\u76f8\u5173\u200b\u95ee\u9898\u200b<ul> <li> \u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u5982\u4f55\u200b\u89e3\u51b3\u200b<ul> <li>gdb\u3001fstrace\u200b\u5de5\u5177\u200b</li> <li>asan</li> </ul> </li> <li> \u200b\u975e\u6cd5\u200b\u5185\u5b58\u200b\u8bfb\u5199\u64cd\u4f5c\u200b<ul> <li>\u200b\u8e29\u200b\u6808\u200b</li> <li>\u200b\u975e\u6cd5\u200b\u6307\u4ee4\u200b</li> </ul> </li> </ul> </li> <li> \u200b\u5185\u6838\u200b\u7a7a\u95f4\u200b\u548c\u200b\u8fdb\u7a0b\u200b\u7a7a\u95f4\u200b<ul> <li>mmap\u200b\u539f\u7406\u200b</li> </ul> </li> </ul>"},{"location":"qemu/","title":"QEMU","text":""},{"location":"qemu/#0","title":"0. \u200b\u5f15\u8a00","text":"<ul> <li> <p> \u200b\u5f53\u200b\u4f7f\u7528\u200bQEMU\uff08Quick EMUlator\uff09\u200b\u8fdb\u884c\u200bSOC\u200b\u82af\u7247\u200b\u7684\u200b\u4eff\u771f\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u89e3\u51b3\u200b\u4ee5\u4e0b\u200b\u8be6\u7ec6\u200b\u95ee\u9898\u200b\uff1a</p> </li> <li> <p>\u200b\u7cfb\u7edf\u6a21\u62df\u200b\u95ee\u9898\u200b\uff1a</p> </li> <li>\u200b\u786e\u5b9a\u200b\u4eff\u771f\u200b\u7684\u200bSOC\u200b\u82af\u7247\u578b\u53f7\u200b\u548c\u200b\u67b6\u6784\u200b\uff0c\u200b\u9009\u62e9\u200b\u5408\u9002\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u6a21\u578b\u200b\uff08\u200b\u6bd4\u5982\u200bARM Cortex-A\u200b\u7cfb\u5217\u200b\u3001RISC-V\u200b\u7b49\u200b\uff09\u3002</li> <li>\u200b\u914d\u7f6e\u200b\u5185\u5b58\u200b\u6a21\u578b\u200b\uff0c\u200b\u5305\u62ec\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5206\u5e03\u200b\u3001\u200b\u5185\u5b58\u200b\u6620\u5c04\u200b\u7b49\u200b\uff0c\u200b\u786e\u4fdd\u200b\u4eff\u771f\u200b\u65f6\u200b\u80fd\u591f\u200b\u6b63\u786e\u200b\u8bbf\u95ee\u200b\u5185\u5b58\u200b\u3002</li> <li> <p>\u200b\u8bbe\u7f6e\u200b\u5916\u8bbe\u200b\u6a21\u578b\u200b\uff0c\u200b\u5982\u200b\u4e32\u53e3\u200b\u3001\u200b\u7f51\u5361\u200b\u3001\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u7b49\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u4e8e\u200b\u4eff\u771f\u200bSOC\u200b\u82af\u7247\u200b\u4e0e\u200b\u5916\u90e8\u8bbe\u5907\u200b\u7684\u200b\u4ea4\u4e92\u200b\u3002</p> </li> <li> <p>\u200b\u65f6\u5e8f\u200b\u7cbe\u5ea6\u200b\u95ee\u9898\u200b\uff1a</p> </li> <li>\u200b\u786e\u5b9a\u200b\u4eff\u771f\u200b\u4e2d\u200b\u7684\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\u548c\u200b\u65f6\u5e8f\u200b\u53c2\u6570\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u4eff\u771f\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u65f6\u5e8f\u200b\u51c6\u786e\u6027\u200b\u3002</li> <li> <p>\u200b\u8003\u8651\u200b\u65f6\u949f\u200b\u57df\u200b\u4e4b\u95f4\u200b\u7684\u200b\u540c\u6b65\u200b\u548c\u200b\u5ef6\u8fdf\u200b\uff0c\u200b\u786e\u4fdd\u200b\u5404\u4e2a\u200b\u6a21\u5757\u200b\u6309\u7167\u200b\u6b63\u786e\u200b\u7684\u200b\u65f6\u5e8f\u200b\u987a\u5e8f\u200b\u5de5\u4f5c\u200b\u3002</p> </li> <li> <p>\u200b\u8c03\u8bd5\u200b\u95ee\u9898\u200b\uff1a</p> </li> <li>\u200b\u63d0\u4f9b\u200b\u8c03\u8bd5\u200b\u63a5\u53e3\u200b\uff0c\u200b\u5982\u200bGDB\u200b\u8c03\u8bd5\u5668\u200b\u7684\u200b\u96c6\u6210\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u4e8e\u200b\u5f00\u53d1\u4eba\u5458\u200b\u5bf9\u200b\u4eff\u771f\u200bSOC\u200b\u82af\u7247\u200b\u8fdb\u884c\u200b\u4ee3\u7801\u200b\u8c03\u8bd5\u200b\u548c\u200b\u6027\u80fd\u200b\u5206\u6790\u200b\u3002</li> <li> <p>\u200b\u652f\u6301\u200b\u65ad\u70b9\u200b\u3001\u200b\u5355\u6b65\u200b\u6267\u884c\u200b\u7b49\u200b\u8c03\u8bd5\u200b\u529f\u80fd\u200b\uff0c\u200b\u5e2e\u52a9\u200b\u5f00\u53d1\u4eba\u5458\u200b\u5feb\u901f\u200b\u5b9a\u4f4d\u95ee\u9898\u200b\u5e76\u200b\u8fdb\u884c\u200b\u8c03\u8bd5\u200b\u4fee\u590d\u200b\u3002</p> </li> <li> <p>\u200b\u6027\u80fd\u200b\u95ee\u9898\u200b\uff1a</p> </li> <li>\u200b\u4f18\u5316\u200bQEMU\u200b\u7684\u200b\u6027\u80fd\u200b\uff0c\u200b\u5305\u62ec\u200b\u6307\u4ee4\u200b\u7ea7\u200b\u6a21\u62df\u200b\u3001JIT\u200b\u7f16\u8bd1\u5668\u200b\u7b49\u200b\u6280\u672f\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u4eff\u771f\u200b\u901f\u5ea6\u200b\u548c\u200b\u6548\u7387\u200b\u3002</li> <li> <p>\u200b\u8003\u8651\u200b\u4eff\u771f\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u8d44\u6e90\u200b\u5360\u7528\u200b\u60c5\u51b5\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4e0e\u200b\u5bbf\u4e3b\u200b\u673a\u5668\u200b\u7684\u200b\u8d44\u6e90\u7ba1\u7406\u200b\uff0c\u200b\u786e\u4fdd\u200b\u4eff\u771f\u200b\u8fc7\u7a0b\u200b\u4e0d\u4f1a\u200b\u5360\u7528\u200b\u8fc7\u591a\u200b\u7684\u200b\u8ba1\u7b97\u8d44\u6e90\u200b\u3002</p> </li> <li> <p>\u200b\u517c\u5bb9\u6027\u95ee\u9898\u200b\uff1a</p> </li> <li>\u200b\u786e\u4fdd\u200bSOC\u200b\u82af\u7247\u200b\u7684\u200b\u4eff\u771f\u200b\u53ef\u4ee5\u200b\u8fd0\u884c\u200b\u4e0d\u540c\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u5982\u200bLinux\u3001RTOS\u200b\u7b49\u200b\uff0c\u200b\u9a8c\u8bc1\u200b\u8f6f\u4ef6\u200b\u7684\u200b\u517c\u5bb9\u6027\u200b\u3002</li> <li>\u200b\u6a21\u62df\u200b\u5404\u79cd\u200b\u5916\u90e8\u8bbe\u5907\u200b\u548c\u200b\u63a5\u53e3\u200b\uff0c\u200b\u786e\u4fdd\u200b\u4eff\u771f\u200b\u73af\u5883\u200b\u4e0e\u200b\u771f\u5b9e\u200b\u786c\u4ef6\u200b\u73af\u5883\u200b\u7684\u200b\u517c\u5bb9\u6027\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u8f6f\u4ef6\u200b\u5728\u200b\u4e0d\u540c\u200b\u5e73\u53f0\u200b\u4e0a\u200b\u7684\u200b\u6b63\u5e38\u200b\u8fd0\u884c\u200b\u3002</li> </ul>"},{"location":"qemu/#1","title":"1. \u200b\u73af\u5883\u200b\u90e8\u7f72","text":""},{"location":"qemu/#2-qemu","title":"2. Qemu\u200b\u4f7f\u7528\u624b\u518c","text":""},{"location":"qemu/#21-qemu","title":"2.1. QEMU \u200b\u547d\u4ee4\u200b\u8be6\u89e3","text":""},{"location":"qemu/#211-qemu-system-","title":"2.1.1. qemu-system-[\u200b\u76ee\u6807\u200b\u673a\u5668\u200b\u67b6\u6784\u200b]","text":"<p>QEMU \u200b\u7cfb\u7edf\u200b\u6a21\u5f0f\u200b</p> <ul> <li>\u200b\u5728\u200b\u8be5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b, QEMU \u200b\u5c06\u4f1a\u200b\u6a21\u62df\u200b\u4e00\u4e2a\u200b\u5b8c\u6574\u200b\u7684\u200b\u7cfb\u7edf\u200b\uff0c<code>\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u5904\u7406\u5668\u200b\u4ee5\u53ca\u200b\u5404\u79cd\u200b\u5916\u56f4\u8bbe\u5907\u200b</code>\u3002\u200b\u8fd9\u79cd\u200b\u6a21\u5f0f\u200b\u66f4\u52a0\u200b\u8d34\u8fd1\u200b\u771f\u5b9e\u200b\u7684\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u4e14\u200b\u8fd9\u79cd\u200b\u6a21\u5f0f\u200b\u4e0d\u200b\u8981\u6c42\u200b\u88ab\u200b\u6a21\u62df\u200b\u7684\u200b\u5ba2\u6237\u673a\u200b\u7cfb\u7edf\u200b\u662f\u200b Linux\uff0c\u200b\u4f46\u200b\u5b83\u200b\u7684\u200b\u901f\u5ea6\u200b\u8f83\u6162\u200b\u3002</li> <li>QEMU \u200b\u4e2d\u200b\u542f\u7528\u200b full-system \u200b\u6a21\u5f0f\u200b\u7684\u200b\u547d\u4ee4\u200b\u4f9d\u7167\u200b\u5982\u4e0b\u200b\u89c4\u5219\u200b\u8fdb\u884c\u200b\u547d\u540d\u200b <code>qemu-system-\u200b\u76ee\u6807\u200b\u673a\u5668\u200b\u67b6\u6784\u200b</code>\uff0c\u200b\u4f8b\u5982\u200b qemu-system-x86_64 \u200b\u7528\u4e8e\u200b\u6a21\u62df\u200b x86_64 \u200b\u67b6\u6784\u200b CPU, qemu-system-i386 \u200b\u6a21\u62df\u200b Intel 32\u200b\u4f4d\u200b x86 \u200b\u67b6\u6784\u200b CPU\uff0c qemu-system-arm \u200b\u6a21\u62df\u200b 32 \u200b\u4f4d\u200b ARM \u200b\u67b6\u6784\u200b\uff0cqemu-system-aarch64 \u200b\u6a21\u62df\u200b 64 \u200b\u4f4d\u200b ARM \u200b\u67b6\u6784\u200b\uff0c\u200b\u7b49\u7b49\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u6a21\u62df\u200b\u7684\u200b CPU \u200b\u67b6\u6784\u200b\u4e0e\u200b\u5bbf\u4e3b\u673a\u200b\u7684\u200b CPU \u200b\u67b6\u6784\u200b\u76f8\u540c\u200b, \u200b\u90a3\u4e48\u200b\u5373\u4f7f\u200b\u5728\u200b\u6b64\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0cQEMU \u200b\u4ecd\u200b\u6709\u200b\u53ef\u80fd\u200b\u4f7f\u7528\u200b hypervisor\uff08<code>\u200b\u4f8b\u5982\u200bKVM \u200b\u6216\u8005\u200b Xen</code>\uff09\u200b\u7684\u200b\u6280\u672f\u200b\u5bf9\u200b\u6a21\u62df\u673a\u200b\u8fdb\u884c\u200b\u52a0\u901f\u200b\u3002</li> </ul> <pre><code>qemu-system-{{\u200b\u76ee\u6807\u200b\u673a\u5668\u200b\u67b6\u6784\u200b}} [machine opts] \\\n                [cpu opts] \\\n                [accelerator opts] \\\n                [device opts] \\\n                [backend opts] \\\n                [interface opts] \\\n                [boot opts]\n</code></pre> option content Machine Define the machine type, amount of memory etc. CPU Type and number/topology of vCPUs. Most accelerators offer a cpu option which simply passes through your host CPU configuration without filtering out any features.host Accelerator This will depend on the hypervisor you run. Note that the default is TCG, which is purely emulated, so you must specify an accelerator type to take advantage of hardware virtualization. Devices Additional devices that are not defined by default with the machine type. Backends Backends are how QEMU deals with the guest\u2019s data, for example how a block device is stored, how network devices see the network or how a serial device is directed to the outside world. Interfaces How the system is displayed, how it is managed and controlled or debugged. Boot How the system boots, via firmware or direct kernel boot."},{"location":"qemu/#212-qemu-cpu","title":"2.1.2. qemu-[CPU \u200b\u67b6\u6784\u200b]","text":"<p>QEMU \u200b\u7528\u6237\u200b\u6a21\u5f0f\u200b</p> <pre><code>qemu-{{CPU\u200b\u67b6\u6784\u200b}} [-h] \\\n            [-d] \\\n            [-L path] \\\n            [-s size] \\\n            [-cpu model] \\\n            [-g port] \\\n            [-B offset] \\\n            [-R size] program [arguments...]\n</code></pre> <ul> <li> <p>-h</p> <ul> <li>Print the help</li> </ul> </li> <li> <p>-L path</p> <ul> <li>Set the library root path (default=/)</li> </ul> </li> <li> <p>-s size</p> <ul> <li>Set the stack size in bytes (default=524288)</li> </ul> </li> <li> <p>-ignore-environment</p> <ul> <li>Start with an empty environment. Without this option, the initial environment is a copy of the caller\u2019s environment.</li> </ul> </li> <li> <p>-E var=value</p> <ul> <li>Set environment var to value.</li> </ul> </li> <li> <p>-U var</p> <ul> <li>Remove var from the environment.</li> </ul> </li> <li> <p>-bsd type</p> <ul> <li>Set the type of the emulated BSD Operating system. Valid values are FreeBSD, NetBSD and OpenBSD (default).</li> </ul> </li> <li> <p>Debug options:</p> <ul> <li> <p>-d item1,...</p> <ul> <li>Activate logging of the specified items (use \u2018-d help\u2019 for a list of log items)</li> </ul> </li> <li> <p>-p pagesize</p> <ul> <li>Act as if the host page size was \u2018pagesize\u2019 bytes</li> </ul> </li> <li> <p>-one-insn-per-tb</p> <ul> <li>Run the emulation with one guest instruction per translation block. This slows down emulation a lot, but can be useful in some situations, such as when trying to analyse the logs produced by the -d option.</li> </ul> </li> </ul> </li> </ul>"},{"location":"qemu/#213-qemu-img","title":"2.1.3. qemu-img","text":"<p>QEMU \u200b\u78c1\u76d8\u200b\u7ba1\u7406\u5de5\u5177\u200b</p> <pre><code>qemu-img [standard options] command [command options]\n</code></pre> <ul> <li> \u200b\u547d\u4ee4\u884c\u200b\u89e3\u91ca\u200b</li> </ul>"},{"location":"qemu/#214-qemu-store-daemon","title":"2.1.4. qemu-store-daemon","text":"<p>qemu-store-daemon \u200b\u4f5c\u4e3a\u200b\u4e00\u4e2a\u200b\u72ec\u7acb\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u8fd0\u884c\u200b\uff0c\u200b\u5b8c\u5168\u200b\u4e0d\u200b\u9700\u8981\u200b\u4efb\u4f55\u200b\u865a\u62df\u673a\u200b\uff0c\u200b\u5e76\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4ee5\u524d\u200b\u53ea\u200b\u5728\u200b Qemu \u200b\u4e2d\u624d\u200b\u53ef\u7528\u200b\u7684\u200b QMP \u200b\u547d\u4ee4\u200b\u6765\u200b\u5bf9\u200b\u78c1\u76d8\u955c\u50cf\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u64cd\u4f5c\u200b\u3002</p> <pre><code>qemu-storage-daemon [options]\n</code></pre>"},{"location":"qemu/#215-qemu-nbd","title":"2.1.5. qemu-nbd","text":"<p>QEMU Disk Network Block Device Server</p> <pre><code>qemu-nbd [OPTION]\u2026 filename\n\nqemu-nbd -L [OPTION]\u2026\n\nqemu-nbd -d dev\n</code></pre>"},{"location":"qemu/#216-qemu-pr-helper","title":"2.1.6. qemu-pr-helper","text":"<p>QEMU persistent reservation helper</p> <pre><code>qemu-pr-helper [OPTION]\n</code></pre>"},{"location":"qemu/#217-qemu-trace-stap","title":"2.1.7. qemu-trace-stap","text":"<p>QEMU SystemTap trace tool</p> <pre><code>qemu-trace-stap [GLOBAL-OPTIONS] COMMAND [COMMAND-OPTIONS] ARGS\u2026\n</code></pre>"},{"location":"qemu/#218-virtfs-proxy-helper","title":"2.1.8. virtfs-proxy-helper","text":"<p>QEMU 9p virtfs proxy filesystem helper</p> <pre><code>virtfs-proxy-helper [OPTIONS]\n</code></pre>"},{"location":"qemu/#22-qemu","title":"2.2. QEMU\u200b\u7f16\u8bd1\u200b\u6d4b\u8bd5\u200b\u6846\u67b6","text":""},{"location":"qemu/#221-qemu","title":"2.2.1. QEMU\u200b\u7f16\u8bd1\u200b\u6846\u67b6","text":""},{"location":"qemu/#2211-configure","title":"2.2.1.1. configure","text":"<ul> <li> Modifying configure</li> <li> Python virtual environments and the build process</li> <li> Bundled Python packages</li> </ul>"},{"location":"qemu/#2212-meson","title":"2.2.1.2. Meson","text":"<ul> <li> Adding checks</li> <li> Support scripts</li> </ul>"},{"location":"qemu/#2213-make","title":"2.2.1.3. Make","text":"<ul> <li> Useful make targets</li> </ul>"},{"location":"qemu/#2214-important-files-for-the-build-system","title":"2.2.1.4. Important files for the build system","text":"<ul> <li> Statically defined files</li> <li> Dynamically created files</li> </ul>"},{"location":"qemu/#222-qemu-and-kconfig","title":"2.2.2. QEMU and Kconfig","text":""},{"location":"qemu/#2221-the-kconfig-language","title":"2.2.2.1. The Kconfig language","text":""},{"location":"qemu/#2222-guidelines-for-writing-kconfig-files","title":"2.2.2.2. Guidelines for writing Kconfig files","text":""},{"location":"qemu/#2223-writing-and-modifying-default-configurations","title":"2.2.2.3. Writing and modifying default configurations","text":""},{"location":"qemu/#2224-kconfighost","title":"2.2.2.4. Kconfig.host","text":""},{"location":"qemu/#223-qemu-documentation","title":"2.2.3. QEMU Documentation","text":""},{"location":"qemu/#2231-xtool-and-hx-files","title":"2.2.3.1. xtool and .hx files","text":""},{"location":"qemu/#224-testing-in-qemu","title":"2.2.4. Testing in QEMU","text":""},{"location":"qemu/#2241-testing-with-make-check","title":"2.2.4.1. Testing with \"make check\"","text":"<ul> <li> Unit tests</li> <li> QTest</li> <li> Writing portable test cases</li> <li> QAPI schema tests</li> <li> check-block</li> </ul>"},{"location":"qemu/#2242-qemu-iotests","title":"2.2.4.2. QEMU iotests","text":"<ul> <li> Writing a new test case</li> <li> Debugging a test case</li> <li> Test case groups</li> </ul>"},{"location":"qemu/#2243-container-based-tests","title":"2.2.4.3. Container based tests","text":"<ul> <li> Introduction</li> <li> Docker Prerequisites</li> <li> Podman Prerequisites</li> <li> Quickstart</li> <li> Registry</li> <li> Images</li> <li> Tests</li> <li> Debugging a Docker test failure</li> <li> Options</li> </ul>"},{"location":"qemu/#2244-thread-sanitizer","title":"2.2.4.4. Thread Sanitizer","text":"<ul> <li> Thread Sanitizer in Docker</li> <li> Building and Testing with TSan</li> <li> TSan Suppressions</li> <li> TSan Annotations</li> </ul>"},{"location":"qemu/#2245-docker-binfmt-image-debian-targets","title":"2.2.4.5. docker-binfmt-image-debian-% targets","text":"<ul> <li> Setting up binfmt_misc</li> <li> Example invocation</li> </ul>"},{"location":"qemu/#2246-vm-testing","title":"2.2.4.6. VM testing","text":"<ul> <li> Quickstart</li> <li> QEMU binaries</li> <li> Make jobs</li> <li> Debugging</li> <li> Manual invocation</li> <li> Adding new guests</li> </ul>"},{"location":"qemu/#2247-image-fuzzer-testing","title":"2.2.4.7. Image fuzzer testing","text":""},{"location":"qemu/#2248-integration-tests-using-the-avocado-framework","title":"2.2.4.8. Integration tests using the Avocado Framework","text":"<ul> <li> Running tests</li> <li> Manual Installation</li> <li> Overview</li> <li> QEMUMachine</li> <li> Attribute reference</li> <li> Parameter reference</li> <li> Skipping tests</li> <li> Uninstalling Avocado</li> </ul>"},{"location":"qemu/#2249-testing-with-make-check-tcg","title":"2.2.4.9. Testing with \"make check-tcg\"","text":"<ul> <li> Running subset of tests</li> <li> TCG test dependencies</li> </ul>"},{"location":"qemu/#22410-other-tcg-tests","title":"2.2.4.10. Other TCG Tests","text":"<ul> <li> KVM Unit Tests</li> <li> Linux Test Project</li> </ul>"},{"location":"qemu/#22411-gcc-gcov-support","title":"2.2.4.11. GCC gcov support","text":""},{"location":"qemu/#225-acpismbios-avocado-tests-using-biosbits","title":"2.2.5. ACPI/SMBIOS avocado tests using biosbits","text":""},{"location":"qemu/#2251-references","title":"2.2.5.1. References","text":""},{"location":"qemu/#226-qtest-device-emulation-testing-framework","title":"2.2.6. QTest Device Emulation Testing Framework","text":""},{"location":"qemu/#2261-qtest-driver-framework","title":"2.2.6.1. Qtest Driver Framework","text":"<ul> <li> QGraph concepts</li> <li> Creating a new driver and its interface</li> <li> Adding a new test</li> <li> Qgraph API reference</li> </ul>"},{"location":"qemu/#2262-qtest-protocol","title":"2.2.6.2. QTest Protocol","text":"<ul> <li> Valid requests</li> </ul>"},{"location":"qemu/#2263-libqtest-api-reference","title":"2.2.6.3. libqtest API reference","text":""},{"location":"qemu/#227-ci","title":"2.2.7. CI","text":""},{"location":"qemu/#2271-definition-of-terms","title":"2.2.7.1. Definition of terms","text":"<ul> <li> Automated tests</li> <li> Unit testing</li> <li> Functional testing</li> <li> System testing</li> <li> Flaky tests</li> <li> Gating</li> <li> Continuous Integration (CI)</li> <li> References</li> </ul>"},{"location":"qemu/#2272-custom-cicd-variables","title":"2.2.7.2. Custom CI/CD variables","text":"<ul> <li> Set variable globally in the user\u2019s CI namespace</li> <li> Set variable manually when pushing a branch or tag to the user\u2019s repository</li> <li> Setting aliases in your git config</li> <li> Variable naming and grouping</li> <li> Maintainer controlled job variables</li> <li> Contributor controlled runtime variables</li> <li> Other misc variables</li> </ul>"},{"location":"qemu/#2273-jobs-on-custom-runners","title":"2.2.7.3. Jobs on Custom Runners","text":"<ul> <li> Machine Setup Howto</li> </ul>"},{"location":"qemu/#228-how-to-use-the-qapi-code-generator","title":"2.2.8. How to use the QAPI code generator","text":""},{"location":"qemu/#2281-introduction","title":"2.2.8.1. Introduction","text":""},{"location":"qemu/#2282-the-qapi-schema-language","title":"2.2.8.2. The QAPI schema language","text":"<ul> <li> Schema syntax</li> <li> Built-in Types</li> <li> Include directives</li> <li> Pragma directives</li> <li> Enumeration types</li> <li> Type references and array types</li> <li> Struct types</li> <li> Union types</li> <li> Alternate types</li> <li> Commands</li> <li> Events</li> <li> Features</li> <li> Naming rules and reserved names</li> <li> Downstream extensions</li> <li> Configuring the schema</li> <li> Documentation comments</li> </ul>"},{"location":"qemu/#2283-client-json-protocol-introspection","title":"2.2.8.3. Client JSON Protocol introspection","text":""},{"location":"qemu/#2284-compatibility-considerations","title":"2.2.8.4. Compatibility considerations","text":""},{"location":"qemu/#2285-code-generation","title":"2.2.8.5. Code generation","text":"<ul> <li> Code generated for QAPI types</li> <li> Code generated for visiting QAPI types</li> <li> Code generated for commands</li> <li> Code generated for events</li> <li> Code generated for introspection</li> </ul>"},{"location":"qemu/#229-fuzzing","title":"2.2.9. Fuzzing","text":""},{"location":"qemu/#2291-basics","title":"2.2.9.1. Basics","text":""},{"location":"qemu/#2292-building-the-fuzzers","title":"2.2.9.2. Building the fuzzers","text":""},{"location":"qemu/#2293-useful-libfuzzer-flags","title":"2.2.9.3. Useful libFuzzer flags","text":""},{"location":"qemu/#2294-generating-coverage-reports","title":"2.2.9.4. Generating Coverage Reports","text":""},{"location":"qemu/#2295-adding-a-new-fuzzer","title":"2.2.9.5. Adding a new fuzzer","text":""},{"location":"qemu/#2296-the-generic-fuzzer","title":"2.2.9.6. The Generic Fuzzer","text":""},{"location":"qemu/#2297-oss-fuzz","title":"2.2.9.7. OSS-Fuzz","text":""},{"location":"qemu/#2298-building-crash-reproducers","title":"2.2.9.8. Building Crash Reproducers","text":""},{"location":"qemu/#2299-implementation-details-fuzzer-lifecycle","title":"2.2.9.9. Implementation Details / Fuzzer Lifecycle","text":""},{"location":"qemu/#2210-control-flow-integrity-cfi","title":"2.2.10. Control-Flow Integrity (CFI)","text":""},{"location":"qemu/#22101-basics","title":"2.2.10.1. Basics","text":""},{"location":"qemu/#22102-building-with-cfi","title":"2.2.10.2. Building with CFI","text":""},{"location":"qemu/#22103-using-qemu-built-with-cfi","title":"2.2.10.3. Using QEMU built with CFI","text":""},{"location":"qemu/#22104-incompatible-code-with-cfi","title":"2.2.10.4. Incompatible code with CFI","text":""},{"location":"qemu/#22105-disabling-cfi-for-a-specific-function","title":"2.2.10.5. Disabling CFI for a specific function","text":""},{"location":"qemu/#22106-cfi-and-fuzzing","title":"2.2.10.6. CFI and fuzzing","text":""},{"location":"qemu/#23-qemutcg","title":"2.3. QEMU\u200b\u7ffb\u8bd1\u200b\u539f\u7406\u200bTCG","text":""},{"location":"qemu/#231-translator-internals","title":"2.3.1. Translator Internals","text":""},{"location":"qemu/#2311-cpu-state-optimisations","title":"2.3.1.1. CPU state optimisations","text":""},{"location":"qemu/#2312-direct-block-chaining","title":"2.3.1.2. Direct block chaining","text":""},{"location":"qemu/#2313-self-modifying-code-and-translated-code-invalidation","title":"2.3.1.3. Self-modifying code and translated code invalidation","text":""},{"location":"qemu/#2314-exception-support","title":"2.3.1.4. Exception support","text":""},{"location":"qemu/#2315-mmu-emulation","title":"2.3.1.5. MMU emulation","text":""},{"location":"qemu/#2316-profiling-jitted-code","title":"2.3.1.6. Profiling JITted code","text":""},{"location":"qemu/#232-tcg-intermediate-representation","title":"2.3.2. TCG Intermediate Representation","text":""},{"location":"qemu/#2321-introduction","title":"2.3.2.1. Introduction","text":""},{"location":"qemu/#2322-definitions","title":"2.3.2.2. Definitions","text":""},{"location":"qemu/#2323-basic-blocks","title":"2.3.2.3. Basic Blocks","text":""},{"location":"qemu/#2324-operations","title":"2.3.2.4. Operations","text":""},{"location":"qemu/#2325-variables","title":"2.3.2.5. Variables","text":""},{"location":"qemu/#2326-types","title":"2.3.2.6. Types","text":""},{"location":"qemu/#2327-helpers","title":"2.3.2.7. Helpers","text":""},{"location":"qemu/#2328-code-optimizations","title":"2.3.2.8. Code Optimizations","text":""},{"location":"qemu/#2329-instruction-reference","title":"2.3.2.9. Instruction Reference","text":""},{"location":"qemu/#23210-backend","title":"2.3.2.10. Backend","text":""},{"location":"qemu/#23211-recommended-coding-rules-for-best-performance","title":"2.3.2.11. Recommended coding rules for best performance","text":""},{"location":"qemu/#233-decodetree-specification","title":"2.3.3. Decodetree Specification","text":""},{"location":"qemu/#2331-fields","title":"2.3.3.1. Fields","text":""},{"location":"qemu/#2332-argument-sets","title":"2.3.3.2. Argument Sets","text":""},{"location":"qemu/#2333-formats","title":"2.3.3.3. Formats","text":""},{"location":"qemu/#2334-patterns","title":"2.3.3.4. Patterns","text":""},{"location":"qemu/#2335-pattern-groups","title":"2.3.3.5. Pattern Groups","text":""},{"location":"qemu/#234-multi-threaded-tcg","title":"2.3.4. Multi-threaded TCG","text":""},{"location":"qemu/#2341-vcpu-scheduling","title":"2.3.4.1. vCPU Scheduling","text":""},{"location":"qemu/#2342-shared-data-structures","title":"2.3.4.2. Shared Data Structures","text":""},{"location":"qemu/#2343-memory-consistency","title":"2.3.4.3. Memory Consistency","text":""},{"location":"qemu/#235-tcg-instruction-counting","title":"2.3.5. TCG Instruction Counting","text":""},{"location":"qemu/#2351-core-concepts","title":"2.3.5.1. Core Concepts","text":""},{"location":"qemu/#236-qemu-tcg-plugins","title":"2.3.6. QEMU TCG Plugins","text":""},{"location":"qemu/#2361-usage","title":"2.3.6.1. Usage","text":""},{"location":"qemu/#2362-writing-plugins","title":"2.3.6.2. Writing plugins","text":""},{"location":"qemu/#2363-internals","title":"2.3.6.3. Internals","text":""},{"location":"qemu/#2364-example-plugins","title":"2.3.6.4. Example Plugins","text":""},{"location":"qemu/#2365-api","title":"2.3.6.5. API","text":""},{"location":"qemu/#237-execution-recordreplay","title":"2.3.7. Execution Record/Replay","text":""},{"location":"qemu/#2371-core-concepts","title":"2.3.7.1. Core concepts","text":""},{"location":"qemu/#2372-virtual-devices","title":"2.3.7.2. Virtual devices","text":""},{"location":"qemu/#2373-replay-log-format","title":"2.3.7.3. Replay log format","text":""},{"location":"qemu/#24-qemu","title":"2.4. QEMU \u200b\u5b50\u200b\u6a21\u5757","text":""},{"location":"qemu/#241-the-qemu-object-model-qom","title":"2.4.1. The QEMU Object Model (QOM)","text":""},{"location":"qemu/#2411-the-qom-tree","title":"2.4.1.1. The QOM tree","text":""},{"location":"qemu/#2412-creating-a-qom-class","title":"2.4.1.2. Creating a QOM class","text":""},{"location":"qemu/#2413-standard-type-declaration-and-definition-macros","title":"2.4.1.3. Standard type declaration and definition macros","text":""},{"location":"qemu/#2414-device-life-cycle","title":"2.4.1.4. Device Life-cycle","text":""},{"location":"qemu/#2415-api-reference","title":"2.4.1.5. API Reference","text":""},{"location":"qemu/#242-atomic-operations-in-qemu","title":"2.4.2. Atomic operations in QEMU","text":""},{"location":"qemu/#2421-compiler-memory-barrier","title":"2.4.2.1. Compiler memory barrier","text":""},{"location":"qemu/#2422-sequentially-consistent-atomic-access","title":"2.4.2.2. Sequentially consistent atomic access","text":""},{"location":"qemu/#2423-weak-atomic-access-and-manual-memory-barriers","title":"2.4.2.3. Weak atomic access and manual memory barriers","text":""},{"location":"qemu/#2424-comparison-with-linux-kernel-primitives","title":"2.4.2.4. Comparison with Linux kernel primitives","text":""},{"location":"qemu/#2425-sources","title":"2.4.2.5. Sources","text":""},{"location":"qemu/#243-block-coroutine-wrapper","title":"2.4.3. block-coroutine-wrapper","text":""},{"location":"qemu/#2431-usage","title":"2.4.3.1. Usage","text":""},{"location":"qemu/#2432-links","title":"2.4.3.2. Links","text":""},{"location":"qemu/#244-modelling-a-clock-tree-in-qemu","title":"2.4.4. Modelling a clock tree in QEMU","text":""},{"location":"qemu/#2441-what-are-clocks","title":"2.4.4.1. What are clocks?","text":""},{"location":"qemu/#2442-the-clock-state","title":"2.4.4.2. The clock state","text":""},{"location":"qemu/#2443-adding-a-new-clock","title":"2.4.4.3. Adding a new clock","text":""},{"location":"qemu/#2444-clock-callbacks","title":"2.4.4.4. Clock callbacks","text":""},{"location":"qemu/#2445-retrieving-clocks-from-a-device","title":"2.4.4.5. Retrieving clocks from a device","text":""},{"location":"qemu/#2446-connecting-two-clocks-together","title":"2.4.4.6. Connecting two clocks together","text":""},{"location":"qemu/#2447-clock-multiplier-and-divider-settings","title":"2.4.4.7. Clock multiplier and divider settings","text":""},{"location":"qemu/#2448-unconnected-input-clocks","title":"2.4.4.8. Unconnected input clocks","text":""},{"location":"qemu/#2449-fetching-clock-frequencyperiod","title":"2.4.4.9. Fetching clock frequency/period","text":""},{"location":"qemu/#24410-calculating-expiry-deadlines","title":"2.4.4.10. Calculating expiry deadlines","text":""},{"location":"qemu/#24411-obtaining-tick-counts","title":"2.4.4.11. Obtaining tick counts","text":""},{"location":"qemu/#24412-changing-a-clock-period","title":"2.4.4.12. Changing a clock period","text":""},{"location":"qemu/#24413-aliasing-clocks","title":"2.4.4.13. Aliasing clocks","text":""},{"location":"qemu/#24414-migration","title":"2.4.4.14. Migration","text":""},{"location":"qemu/#245-ebpf-rss-virtio-net-support","title":"2.4.5. eBPF RSS virtio-net support","text":""},{"location":"qemu/#2451-rss-ebpf-program","title":"2.4.5.1. RSS eBPF program","text":""},{"location":"qemu/#2452-ebpf-rss-implementation","title":"2.4.5.2. eBPF RSS implementation","text":""},{"location":"qemu/#246-migration","title":"2.4.6. Migration","text":""},{"location":"qemu/#2461-migration-framework","title":"2.4.6.1. Migration framework","text":""},{"location":"qemu/#2462-migration-features","title":"2.4.6.2. Migration features","text":""},{"location":"qemu/#2463-backwards-compatibility","title":"2.4.6.3. Backwards compatibility","text":""},{"location":"qemu/#2464-best-practices","title":"2.4.6.4. Best practices","text":""},{"location":"qemu/#247-multi-process-qemu","title":"2.4.7. Multi-process QEMU","text":""},{"location":"qemu/#2471-qemu-services","title":"2.4.7.1. QEMU services","text":""},{"location":"qemu/#2472-separating-io-services","title":"2.4.7.2. Separating IO services","text":""},{"location":"qemu/#2473-new-separation-model-based-on-proxy-objects","title":"2.4.7.3. New separation model based on proxy objects","text":""},{"location":"qemu/#2474-disaggregated-cpu-emulation","title":"2.4.7.4. Disaggregated CPU emulation","text":""},{"location":"qemu/#2475-host-access-controls","title":"2.4.7.5. Host access controls","text":""},{"location":"qemu/#248-reset-in-qemu-the-resettable-interface","title":"2.4.8. Reset in QEMU: the Resettable interface","text":""},{"location":"qemu/#2481-triggering-reset","title":"2.4.8.1. Triggering reset","text":""},{"location":"qemu/#2482-multi-phase-mechanism","title":"2.4.8.2. Multi-phase mechanism","text":""},{"location":"qemu/#2483-handling-reset-in-a-resettable-object","title":"2.4.8.3. Handling reset in a resettable object","text":""},{"location":"qemu/#2484-base-class-handling-of-reset","title":"2.4.8.4. Base class handling of reset","text":""},{"location":"qemu/#249-qapi-interface-for-s390-cpu-topology","title":"2.4.9. QAPI interface for S390 CPU topology","text":""},{"location":"qemu/#2491-additions-to-query-cpus-fast","title":"2.4.9.1. Additions to query-cpus-fast","text":""},{"location":"qemu/#2492-qapi-command-set-cpu-topology","title":"2.4.9.2. QAPI command: set-cpu-topology","text":""},{"location":"qemu/#2493-qapi-event-cpu_polarization_change","title":"2.4.9.3. QAPI event CPU_POLARIZATION_CHANGE","text":""},{"location":"qemu/#2494-qapi-query-command-query-s390x-cpu-polarization","title":"2.4.9.4. QAPI query command: query-s390x-cpu-polarization","text":""},{"location":"qemu/#2410-booting-from-real-channel-attached-devices-on-s390x","title":"2.4.10. Booting from real channel-attached devices on s390x","text":""},{"location":"qemu/#24101-s390-hardware-ipl","title":"2.4.10.1. s390 hardware IPL","text":""},{"location":"qemu/#24102-how-this-all-pertains-to-qemu-and-the-kernel","title":"2.4.10.2. How this all pertains to QEMU (and the kernel)","text":""},{"location":"qemu/#24103-what-qemu-does","title":"2.4.10.3. What QEMU does","text":""},{"location":"qemu/#2411-tracing","title":"2.4.11. Tracing","text":""},{"location":"qemu/#24111-introduction","title":"2.4.11.1. Introduction","text":""},{"location":"qemu/#24112-quickstart","title":"2.4.11.2. Quickstart","text":""},{"location":"qemu/#24113-trace-events","title":"2.4.11.3. Trace events","text":""},{"location":"qemu/#24114-generic-interface-and-monitor-commands","title":"2.4.11.4. Generic interface and monitor commands","text":""},{"location":"qemu/#24115-trace-backends","title":"2.4.11.5. Trace backends","text":""},{"location":"qemu/#24116-trace-event-properties","title":"2.4.11.6. Trace event properties","text":""},{"location":"qemu/#2412-iommufd-backend-usage-with-vfio","title":"2.4.12. IOMMUFD BACKEND usage with VFIO","text":""},{"location":"qemu/#24121-example-configuration","title":"2.4.12.1. Example configuration","text":""},{"location":"qemu/#24122-supported-platform","title":"2.4.12.2. Supported platform","text":""},{"location":"qemu/#24123-caveats","title":"2.4.12.3. Caveats","text":""},{"location":"qemu/#2413-how-to-write-monitor-commands","title":"2.4.13. How to write monitor commands","text":""},{"location":"qemu/#24131-overview","title":"2.4.13.1. Overview","text":""},{"location":"qemu/#24132-testing","title":"2.4.13.2. Testing","text":""},{"location":"qemu/#24133-writing-a-simple-command-hello-world","title":"2.4.13.3. Writing a simple command: hello-world","text":""},{"location":"qemu/#24134-writing-more-complex-commands","title":"2.4.13.4. Writing more complex commands","text":""},{"location":"qemu/#24135-writing-a-debugging-aid-returning-unstructured-text","title":"2.4.13.5. Writing a debugging aid returning unstructured text","text":""},{"location":"qemu/#2414-writing-virtio-backends-for-qemu","title":"2.4.14. Writing VirtIO backends for QEMU","text":""},{"location":"qemu/#24141-virtio-transports","title":"2.4.14.1. VirtIO Transports","text":""},{"location":"qemu/#24142-using-the-qemu-object-model-qom","title":"2.4.14.2. Using the QEMU Object Model (QOM)","text":""},{"location":"qemu/#24143-back-end-implementations","title":"2.4.14.3. Back End Implementations","text":""},{"location":"qemu/#25-qemu","title":"2.5. QEMU \u200b\u76ee\u5f55\u200b\u7ed3\u6784","text":"<ul> <li> accel/<ul> <li>CPU \u200b\u6a21\u62df\u200b\u5305\u542b\u200b\u786c\u4ef6\u52a0\u901f\u200b</li> </ul> </li> <li> audio/ <ul> <li>\u200b\u97f3\u9891\u200b\u7684\u200b\u540e\u200b\u7aef\u200b\u6a21\u62df\u200b</li> <li>Qemu Audio</li> </ul> </li> <li> authz/</li> <li> backends/<ul> <li>QEMU\u200b\u5904\u7406\u200bGuest\u200b\u6570\u636e\u200b\u7684\u200b\u673a\u5236\u200b\uff0c\u200b\u4f8b\u5982\u200b\u5757\u200b\u8bbe\u5907\u200b\u7684\u200b\u5b58\u50a8\u200b\u3001\u200b\u7f51\u7edc\u8bbe\u5907\u200b\u548c\u200b\u5757\u200b\u8bbe\u5907\u200b\u7684\u200b\u91cd\u5b9a\u5411\u200b</li> </ul> </li> <li> block/<ul> <li>block.c</li> <li>blockdev.c</li> <li>blockdev-nbd.c</li> <li>blockjob.c</li> <li>\u200b\u5757\u200b\u8bbe\u5907\u200b\u7684\u200b\u540e\u200b\u7aef\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> bsd-user/<ul> <li>BSD\u200b\u7cfb\u7edf\u200b\u7684\u200buser\u200b\u6a21\u5f0f\u200b</li> </ul> </li> <li> capstone/<ul> <li>\u200b\u53cd\u200b\u6c47\u7f16\u5668\u200b\uff0c\u200b\u5728\u200b\u8fdb\u884c\u200b\u4e8c\u8fdb\u5236\u200b\u7ffb\u8bd1\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u5176\u5b9e\u200b\u6700\u200b\u5f00\u59cb\u200b\u7684\u200b\u884c\u4e3a\u200b\u662f\u200b\u5c06\u200b\u4e8c\u8fdb\u5236\u200b\u4ee3\u7801\u200b\u53cd\u6c47\u7f16\u200b\u6210\u4e3a\u200b Guest \u200b\u6307\u4ee4\u200b\uff0c\u200b\u7136\u540e\u200b\u624d\u200b\u662f\u200b\u8ba9\u200b\u7ffb\u8bd1\u5668\u200b\u5c06\u200b Guest \u200b\u6307\u4ee4\u200b\u7ffb\u8bd1\u200b\u4e3a\u200b tcg IR\uff0cQEMU \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b disas \u200b\u6765\u200b\u66ff\u6362\u200b\u5185\u7f6e\u200b\u7684\u200b\u53cd\u200b\u6c47\u7f16\u5668\u200b</li> </ul> </li> <li> chardev/<ul> <li>\u200b\u5b57\u7b26\u200b\u8bbe\u5907\u200b\u7684\u200b\u540e\u200b\u7aef\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> configure<ul> <li>\u200b\u7f16\u8bd1\u200bqemu\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b</li> </ul> </li> <li> contrib/<ul> <li>qemu\u200b\u7684\u200b\u8f85\u52a9\u5de5\u5177\u200b</li> <li>elf2dmp/</li> <li>gitdm/</li> <li>ivshmem-client/</li> <li>ivshmem-server/</li> <li>plugins/</li> <li>rdmacm-mux/</li> <li>systemd/</li> <li>vhost-user-blk/</li> <li>vhost-user-gpu/</li> <li>vhost-user-input/</li> <li>vhost-user-scsi/</li> </ul> </li> <li> cpu.c</li> <li> cpus-common.c<ul> <li>CPU\u200b\u6838\u200b\u7684\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> crypto/<ul> <li>\u200b\u52a0\u5bc6\u200b\u8bbe\u5907\u200b\u7684\u200b\u540e\u200b\u7aef\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> default-configs/<ul> <li>\u200b\u7f16\u8bd1\u200bqemu\u200b\u7684\u200bKconfig\u200b\u914d\u7f6e\u200b</li> </ul> </li> <li> disas/<ul> <li>disas.c</li> <li>\u200b\u53cd\u200b\u6c47\u7f16\u5668\u200b\uff0c\u200b\u5728\u200b\u8fdb\u884c\u200b\u4e8c\u8fdb\u5236\u200b\u7ffb\u8bd1\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u5176\u5b9e\u200b\u6700\u200b\u5f00\u59cb\u200b\u7684\u200b\u884c\u4e3a\u200b\u662f\u200b\u5c06\u200b\u4e8c\u8fdb\u5236\u200b\u4ee3\u7801\u200b\u53cd\u6c47\u7f16\u200b\u6210\u4e3a\u200b Guest \u200b\u6307\u4ee4\u200b\uff0c\u200b\u7136\u540e\u200b\u624d\u200b\u662f\u200b\u8ba9\u200b\u7ffb\u8bd1\u5668\u200b\u5c06\u200b Guest \u200b\u6307\u4ee4\u200b\u7ffb\u8bd1\u200b\u4e3a\u200b tcg IR\uff0cQEMU \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b capstone \u200b\u6765\u200b\u66ff\u6362\u200b\u5185\u7f6e\u200b\u7684\u200b\u53cd\u200b\u6c47\u7f16\u5668\u200b</li> </ul> </li> <li> docs/<ul> <li>QEMU\u200b\u6587\u6863\u200b</li> </ul> </li> <li> dtc/<ul> <li>\u200b\u8bbe\u5907\u200b\u6811\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> dump/<ul> <li>dump QEMU\u200b\u5185\u5b58\u200b</li> </ul> </li> <li> exec-vary.c</li> <li> fpu/<ul> <li>\u200b\u6d6e\u70b9\u6570\u200b\u8ba1\u7b97\u200b\u6a21\u5757\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> fsdev/<ul> <li>\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b virtio fs4 \u200b\u548c\u200b plan 9 \u200b\u6765\u200b\u8ba9\u200b Guest \u200b\u548c\u200b Host \u200b\u5171\u4eab\u200b\u76ee\u5f55\u200b</li> </ul> </li> <li> gdbstub.c<ul> <li>gdb-xml/</li> <li>\u200b\u548c\u200b gdb \u200b\u914d\u5408\u200b\u4f7f\u7528\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8c03\u8bd5\u200b guest \u200b\u5185\u6838\u200b</li> </ul> </li> <li> gitdm.config<ul> <li>gitdm\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b</li> </ul> </li> <li> hmp-commands.hx</li> <li> hmp-commands-info.hx<ul> <li>hmp\u200b\u4f7f\u7528\u200b\u63d0\u793a\u200b</li> </ul> </li> <li> hw/<ul> <li>\u200b\u5404\u79cd\u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u7684\u200b\u524d\u7aef\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> include/<ul> <li>qemu\u200b\u67b6\u6784\u200b\u7684\u200b\u5934\u6587\u4ef6\u200b</li> </ul> </li> <li> io/<ul> <li>iothread.c</li> <li>io\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> job.c<ul> <li>job-qmp.c</li> </ul> </li> <li> libdecnumber/</li> <li> linux-headers/</li> <li> linux-user/</li> <li> memory_ldst.c.inc</li> <li> migration/<ul> <li>\u200b\u70ed\u200b\u8fc1\u79fb\u200b\u865a\u62df\u673a\u200b</li> </ul> </li> <li> module-common.c</li> <li> monitor/<ul> <li>qemu monitor\u200b\u529f\u80fd\u200b</li> </ul> </li> <li> nbd/<ul> <li>\u200b\u5229\u7528\u200b Linux \u200b\u5185\u6838\u200b\u7684\u200b ndb \u200b\u529f\u80fd\u200b\uff0cQEMU \u200b\u53ef\u4ee5\u200b\u7528\u200b\u8fdc\u7a0b\u200b\u7684\u200b blockdev \u200b\u6765\u200b\u6a21\u62df\u200b guest \u200b\u7684\u200b blockdev</li> </ul> </li> <li> net/<ul> <li>\u200b\u7f51\u7edc\u8bbe\u5907\u200b\u7684\u200b\u540e\u200b\u7aef\u200b\u6a21\u62df\u200b</li> </ul> </li> <li> os-posix.c</li> <li> os-win32.c</li> <li> pc-bios/</li> <li> plugins/</li> <li> po/</li> <li> python/</li> <li> qapi/</li> <li> qemu.nsi</li> <li> qemu.sasl</li> <li> qemu-bridge-helper.c</li> <li> qemu-edid.c</li> <li> qemu-img.c</li> <li> qemu-img-cmds.hx</li> <li> qemu-io.c</li> <li> qemu-io-cmds.c</li> <li> qemu-keymap.c</li> <li> qemu-nbd.c</li> <li> qemu-options.h</li> <li> qemu-options.hx</li> <li> qemu-options-wrapper.h</li> <li> qga/</li> <li> qobject/</li> <li> qom/</li> <li> README.rst</li> <li> replay/</li> <li> replication.c</li> <li> replication.h</li> <li> roms/</li> <li> scripts/</li> <li> scsi/</li> <li> semihosting/</li> <li> slirp/<ul> <li>\u200b\u7528\u6237\u200b\u6001\u200b\u7f51\u7edc\u200b\u6808\u200b</li> </ul> </li> <li> softmmu/<ul> <li>\u200b\u7cfb\u7edf\u200b\u6a21\u5f0f\u200b\u7684\u200b\u5165\u53e3\u200b</li> </ul> </li> <li> storage-daemon/</li> <li> stubs/</li> <li> subprojects/</li> <li> target/<ul> <li>\u200b\u5404\u79cd\u200b\u67b6\u6784\u200b\u7684\u200btcg\u200b\u524d\u7aef\u200b</li> </ul> </li> <li> tcg/<ul> <li>tcg\u200b\u540e\u200b\u7aef\u200b</li> </ul> </li> <li> tests/<ul> <li>qemu\u200b\u7684\u200b\u7528\u4f8b\u200b\u6d4b\u8bd5\u200b</li> </ul> </li> <li> thunk.c</li> <li> tools/</li> <li> trace/</li> <li> trace-events</li> <li> ui/</li> <li> util/</li> <li> VERSION</li> <li> version.rc</li> </ul>"},{"location":"qemu/#3","title":"3. \u200b\u7b14\u8bb0","text":""},{"location":"qemu/#31","title":"3.1. \u200b\u865a\u62df\u5316\u200b\u662f\u200b\u4ec0\u4e48\u200b\uff1f","text":"<p>\u200b\u53c2\u8003\u200b\u6587\u6863\u200b</p> <ol> <li>\u200b\u865a\u62df\u5316\u200b\u662f\u200b\u4ec0\u4e48\u200b</li> <li>\u200b\u865a\u62df\u5316\u200b\u6280\u672f\u200b\u6982\u8ff0\u200b</li> </ol> <p>VMM\uff08Virtual Machine Monitor\uff09\u200b\u548c\u200bhypervisor\u200b\u90fd\u200b\u662f\u200b<code>\u200b\u865a\u62df\u673a\u200b\u76d1\u63a7\u5668\u200b</code>\u200b\u7684\u200b\u610f\u601d\u200b</p> <p>\u200b\u865a\u62df\u5316\u200b\u672c\u8d28\u200b\u662f\u200b\u6307\u200b<code>\u200b\u786c\u4ef6\u8d44\u6e90\u200b\u7684\u200b\u62bd\u8c61\u5316\u200b</code>\uff0c\u200b\u5373\u5c06\u200b\u4ee5\u4e0b\u200b\u8d44\u6e90\u200b</p> <ul> <li>\u200b\u8ba1\u7b97\u200b\u3010CPU + memory\u3011</li> <li>\u200b\u7f51\u7edc\u200b\u3010NIC\u3011</li> <li>\u200b\u5b58\u50a8\u200b\u3010Disk\u3011</li> </ul> <p>\u200b\u6700\u5c0f\u200b\u5355\u4f4d\u200b\u5316\u200b\uff08\u200b\u6c60\u5316\u200b\uff09\uff0c\u200b\u4ee5\u4fbf\u200b\u4e0a\u5c42\u200b\u5e94\u7528\u200b\u80fd\u591f\u200b\u6309\u200b\u9700\u200b\u4f7f\u7528\u200b\u8d44\u6e90\u200b\u3002\u200b\u865a\u62df\u5316\u200b\u4e0d\u4f46\u200b\u89e3\u653e\u200b\u4e86\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u4e5f\u200b\u89e3\u653e\u200b\u4e86\u200b\u7269\u7406\u200b\u786c\u4ef6\u200b\uff0c\u200b\u5927\u5927\u63d0\u9ad8\u200b\u4e86\u200b\u8d44\u6e90\u200b\u7684\u200b\u5229\u7528\u7387\u200b\u3002\u200b\u865a\u62df\u5316\u200b\u6280\u672f\u200b\u4e3b\u8981\u200b\u662f\u200b\u901a\u8fc7\u200b\u622a\u83b7\u200b\u4e0a\u5c42\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5e94\u7528\u200b\u5bf9\u200b\u786c\u4ef6\u8d44\u6e90\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff0c\u200b\u7136\u540e\u200b\u91cd\u5b9a\u5411\u200b\u5230\u200bhypervisor/VMM\uff08Virtual Machine Monitor\uff09\u200b\u7684\u200b\u8d44\u6e90\u200b\u6c60\u4e2d\u200b\uff0c\u200b\u518d\u200b\u7531\u200b VMM \u200b\u6765\u200b\u5bf9\u7247\u200b\u4e0a\u200b\u8d44\u6e90\u200b\u8fdb\u884c\u200b\u7ba1\u7406\u200b\u3002</p> <p><code>\u200b\u865a\u62df\u673a\u200b\u53ef\u4ee5\u200b\u770b\u4f5c\u200b\u662f\u200b\u7269\u7406\u200b\u673a\u200b\u7684\u200b\u4e00\u79cd\u200b\u9ad8\u6548\u200b\u9694\u79bb\u200b\u7684\u200b\u590d\u5236\u200b</code>\uff0c\u200b\u6709\u200b\u4ee5\u4e0b\u200b\u4e09\u4e2a\u200b\u5178\u578b\u200b\u7279\u5f81\u200b\uff1a</p> <ul> <li><code>\u200b\u540c\u8d28\u200b</code>\uff0c\u200b\u865a\u62df\u673a\u200b\u7684\u200b\u8fd0\u884c\u200b\u73af\u5883\u200b\u548c\u200b\u7269\u7406\u200b\u673a\u200b\u7684\u200b\u73af\u5883\u200b\u672c\u8d28\u200b\u4e0a\u200b\u76f8\u540c\u200b\uff0c\u200b\u4f46\u662f\u200b\u8868\u73b0\u200b\u4e0a\u200b\u80fd\u591f\u200b\u6709\u200b\u4e00\u4e9b\u200b\u5dee\u5f02\u200b</li> <li><code>\u200b\u9ad8\u6548\u200b</code>\uff0c\u200b\u865a\u62df\u673a\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u9700\u8981\u200b\u6709\u200b\u63a5\u8fd1\u200b\u7269\u7406\u200b\u673a\u200b\uff08native\uff09\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u7684\u200b\u6027\u80fd\u200b</li> <li><code>\u200b\u8d44\u6e90\u200b\u53d7\u63a7\u200b</code>\uff0cVMM \u200b\u9700\u8981\u200b\u5bf9\u200b\u7cfb\u7edf\u8d44\u6e90\u200b\u6709\u200b\u5b8c\u5168\u200b\u63a7\u5236\u80fd\u529b\u200b\u548c\u200b\u7ba1\u7406\u6743\u9650\u200b\uff0c\u200b\u8d44\u6e90\u200b\u7684\u200b\u5206\u914d\u200b / \u200b\u76d1\u63a7\u200b / \u200b\u56de\u6536\u200b</li> </ul> <p></p> <p>\u200b\u4e00\u822c\u6765\u8bf4\u200b\uff0c\u200b\u5b58\u5728\u200b\u4ee5\u4e0b\u200b\u56db\u79cd\u200b\u865a\u62df\u5316\u200b\u7c7b\u578b\u200b\uff1a</p> <ol> <li>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ea7\u522b\u200b\u865a\u62df\u5316\u200b\uff08OS-level virtulization\uff09</li> <li>\u200b\u5168\u200b\u865a\u62df\u5316\u200b\uff08Full virtualization\uff09</li> <li>\u200b\u7c7b\u200b/\u200b\u534a\u200b\u865a\u62df\u5316\u200b\uff08Para virtulization\uff09</li> <li>\u200b\u6df7\u5408\u200b\u865a\u62df\u5316\u200b\uff08Hybrid-Para virtualization\uff09</li> </ol> <p></p> <p>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ea7\u522b\u200b\u7684\u200b\u865a\u62df\u5316\u200b\u6280\u672f\u200b</p> <ul> <li>\u200b\u4e0d\u200b\u9700\u8981\u200b\u5bf9\u4e8e\u200b\u5e95\u5c42\u200b\u8fdb\u884c\u200b\u6539\u52a8\u200b\u6216\u8005\u200b\u8003\u8651\u200b OS\uff0c\u200b\u4e5f\u200b\u6ca1\u6709\u200b\u6240\u8c13\u200b\u7684\u200b VMM \u200b\u53bb\u200b\u76d1\u7ba1\u200b\u5206\u914d\u200b\u5e95\u5c42\u200b\u8d44\u6e90\u200b\uff0c\u200b\u800c\u662f\u200b\u901a\u8fc7\u200b OS \u200b\u5171\u4eab\u200b\u5185\u6838\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u4e3a\u200b<code>\u200b\u4e0a\u5c42\u200b\u5e94\u7528\u200b</code>\u200b\u63d0\u4f9b\u200b\u591a\u4e2a\u200b\u5b8c\u6210\u200b\u4e14\u200b\u9694\u79bb\u200b\u7684\u200b\u73af\u5883\u200b\uff08\"the kernel allows the existence of multiple isolated user space instances\"\uff09\uff0c\u200b\u8fd9\u4e9b\u200b\u5b9e\u4f8b\u200b\uff08instances\uff09\uff0c\u200b\u5c31\u200b\u88ab\u200b\u79f0\u4e4b\u4e3a\u200b <code>\u200b\u5bb9\u5668\u200b\uff08container\uff09</code>\uff0c\u200b\u865a\u62df\u5316\u200b\u8d44\u6e90\u200b\u548c\u200b\u6027\u80fd\u200b\u5f00\u9500\u200b\u5f88\u5c0f\u200b\uff0c\u200b\u800c\u4e14\u200b\u4e5f\u200b\u4e0d\u200b\u9700\u8981\u200b\u786c\u4ef6\u200b\u7684\u200b\u652f\u6301\u200b\uff0c\u200b\u662f\u200b\u4e00\u79cd\u200b\u8f7b\u91cf\u5316\u200b\u7684\u200b\u865a\u62df\u5316\u200b\u5b9e\u73b0\u200b\u6280\u672f\u200b\u3002</li> </ul> <p>\u200b\u7c7b\u200b/\u200b\u534a\u200b\u865a\u62df\u5316\u200b\uff08Para virtulization\uff09</p> <ul> <li>\u200b\u4f46\u662f\u200b\u6709\u4e9b\u200b\u60c5\u51b5\u200b VMM \u200b\u865a\u62df\u200b\u7684\u200b\u5e73\u53f0\u200b\u662f\u200b\u73b0\u5b9e\u200b\u4e2d\u200b\u4e0d\u200b\u5b58\u5728\u200b\u7684\u200b\uff08\u200b\u8981\u200b\u7ecf\u8fc7\u200b VMM \u200b\u91cd\u65b0\u200b\u5b9a\u4e49\u200b\uff0c\u200b\u9700\u8981\u200b\u5bf9\u4e8e\u200b\u5ba2\u6237\u673a\u200b\u7684\u200b OS \u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\uff09\u3002</li> </ul> <p>\u200b\u5b8c\u5168\u200b\u865a\u62df\u5316\u200b\uff08Full virtulization\uff09</p> <ul> <li>VMM \u200b\u865a\u62df\u200b\u7684\u200b\u662f\u200b\u73b0\u5b9e\u5b58\u5728\u200b\u7684\u200b\u5e73\u53f0\u200b\uff0c\u200b\u800c\u4e14\u200b\u5ba2\u6237\u673a\u200b\u4e0d\u200b\u77e5\u9053\u200b\u81ea\u5df1\u200b\u662f\u200b\u865a\u62df\u200b\u51fa\u6765\u200b\u7684\u200b\u5e73\u53f0\u200b\uff0c\u200b\u4ee5\u4e3a\u200b\u662f\u200b\u771f\u5b9e\u200b\u7684\u200b\u5e73\u53f0\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u5bf9\u4e8e\u200b OS \u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\u3002</li> <li> <p>\u200b\u5bf9\u4e8e\u200b\u5b8c\u5168\u200b\u865a\u62df\u5316\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u786c\u4ef6\u200b/\u200b\u8f6f\u4ef6\u200b\u8f85\u52a9\u200b\u7684\u200b\u65b9\u5f0f\u200b\u6765\u200b\u5b9e\u73b0\u200b\u3002</p> <p></p> <ul> <li> <p>Type-1 Hypervisor\uff0c\u200b\u6216\u8005\u200b\u79f0\u4e4b\u4e3a\u200b Bare-metal Hypervisor\uff0c\u200b\u865a\u62df\u673a\u200b\u76f4\u63a5\u200b\u8fd0\u884c\u200b\u5728\u200b Hardware \u200b\u4e4b\u4e0a\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4e0a\u7535\u200b\u4e4b\u540e\u200b\u52a0\u8f7d\u200b\u8fd0\u884c\u200b\u865a\u62df\u673a\u200b\u76d1\u63a7\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u8d44\u6e90\u200b\u7684\u200b\u8c03\u5ea6\u200b\u662f\u200b HW-&gt;VMM-&gt;VM\uff1b\u200b\u8fd9\u79cd\u200b\u865a\u62df\u673a\u200b\u5c06\u200b\u4e0a\u5c42\u200b\u7684\u200b OS \u200b\u548c\u200b\u5e95\u5c42\u200b\u7684\u200b\u786c\u4ef6\u200b\u8131\u79bb\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e0a\u5c42\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u4e5f\u200b\u4e0d\u200b\u4f9d\u8d56\u200b\u6216\u8005\u200b\u5c40\u9650\u4e8e\u200b\u7279\u6b8a\u200b\u7684\u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u6216\u8005\u200b\u9a71\u52a8\u200b\u3002</p> <p></p> </li> <li> <p>Type-2 Hypervisor\uff0c\u200b\u6216\u8005\u200b\u79f0\u4e4b\u4e3a\u200b Hosted Hypervisor\uff0c\u200b\u865a\u62df\u673a\u200b\u4e0d\u662f\u200b\u76f4\u63a5\u200b\u8fd0\u884c\u200b\u5728\u200b\u786c\u4ef6\u8d44\u6e90\u200b\u4e4b\u4e0a\u200b\uff0c\u200b\u800c\u662f\u200b\u5728\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e4b\u4e0a\u200b\uff1b\u200b\u6240\u4ee5\u200b\u7cfb\u7edf\u200b\u4e0a\u7535\u200b\u4e4b\u540e\u200b\uff0c\u200b\u4f1a\u5148\u200b\u542f\u52a8\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u7136\u540e\u200b\u52a0\u8f7d\u200b\u8fd0\u884c\u200b\u865a\u62df\u673a\u200b\u76d1\u63a7\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u8d44\u6e90\u200b\u7684\u200b\u8c03\u5ea6\u200b\u662f\u200b HW -&gt; OS -&gt; VMM -&gt; VM\u3002</p> <p></p> </li> <li> <p>Type 1 \u200b\u7684\u200b\u865a\u62df\u673a\u200b\u76d1\u63a7\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u89c6\u4e3a\u200b\u4e00\u4e2a\u200b\u4e3a\u200b\u865a\u62df\u673a\u200b\u8fdb\u884c\u200b\u8bbe\u8ba1\u200b\u88c1\u526a\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5185\u6838\u200b\uff0cType 2 \u200b\u7684\u200b\u865a\u62df\u673a\u200b\u76d1\u63a7\u200b\u7a0b\u5e8f\u200b\u4f9d\u8d56\u4e8e\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u6765\u200b\u8fdb\u884c\u200b\u8c03\u5ea6\u200b\u548c\u200b\u7ba1\u7406\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4f1a\u200b\u6709\u200b\u9650\u5236\u6027\u200b\uff1b</p> </li> </ul> </li> </ul>"},{"location":"qemu/#32-qemu","title":"3.2. Qemu\u200b\u662f\u200b\u5168\u200b\u865a\u62df\u5316\u200b\u5417\u200b\uff1f","text":"<ol> <li>\u200b\u534a\u200b\u865a\u62df\u5316\u200b\u6280\u672f\u200b - VIRTIO \u200b\u7b80\u4ecb\u200b</li> <li>\u200b\u786c\u4ef6\u200b\u8f85\u52a9\u200b\u865a\u62df\u5316\u200b DPU</li> <li>DPU \u200b\u7684\u200b\u6f14\u5316\u200b</li> </ol> <p>Qemu\u200b\u652f\u6301\u200b\u5168\u200b\u865a\u62df\u5316\u200b\u3001\u200b\u534a\u200b\u865a\u62df\u5316\u200b\u3001\u200b\u786c\u4ef6\u200b\u8f85\u52a9\u200b\u865a\u62df\u5316\u200b</p> <p>\u200b\u5168\u200b\u865a\u62df\u5316\u200b\u65b9\u6848\u200b\u4e2d\u200b\uff0cQEMU \u200b\u6a21\u62df\u200b\u6574\u4e2a\u200b\u8bbe\u5907\u200b\uff0c\u200b\u6548\u7387\u200b\u4f4e\u4e0b\u200b\uff0cvirtio \u200b\u5e94\u8fd0\u800c\u751f\u200b\uff0c\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u865a\u62df\u200b\u8bbe\u5907\u200b\u4e0e\u200b\u865a\u62df\u673a\u200b\u5982\u4f55\u200b\u901a\u4fe1\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u4e86\u200b\u865a\u62df\u5316\u200b\u6548\u7387\u200b\u3002\u200b\u5168\u200b\u865a\u62df\u200b\u65b9\u6848\u200b\u4e2d\u200b\uff0c\u200b\u865a\u62df\u673a\u200b\u4ee5\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8bbf\u95ee\u200b\u5916\u8bbe\u200b\uff0c\u200b\u6bd4\u5982\u200b\u7f51\u5361\u200b\u53d1\u9001\u200b\u4e00\u4e2a\u200b\u62a5\u6587\u200b\uff0c\u200b\u9700\u8981\u200b\u5199\u200b\u5f88\u200b\u591a\u6b21\u200b\u5bc4\u5b58\u5668\u200b(\u200b\u4f1a\u200b\u5e26\u6765\u200b vm_exit/vm_enter)\uff0cvirio \u200b\u534f\u8bae\u200b\u91cd\u70b9\u200b\u89e3\u51b3\u200b\u7684\u200b\u5c31\u662f\u200b\u8fd9\u79cd\u200b\u4e0d\u5fc5\u8981\u200b\u7684\u200b\u6027\u80fd\u200b\u635f\u5931\u200b\uff0c\u200b\u865a\u62df\u673a\u200b\u4e0e\u200b\u7269\u7406\u200b\u673a\u200b\u4f7f\u7528\u200b vring \u200b\u4f20\u8f93\u6570\u636e\u200b\uff0c\u200b\u907f\u514d\u200b\u4e86\u200b\u9891\u7e41\u200b\u4e86\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u3002</p> <p>\u200b\u800c\u540e\u200b virtio \u200b\u4ece\u200b\u6700\u521d\u200b\u5b8c\u5168\u200b\u57fa\u4e8e\u200b QEMU \u200b\u5b9e\u73b0\u200b\uff0c\u200b\u5230\u200b\u540e\u6765\u200b\u5728\u200b\u7269\u7406\u200b\u673a\u200b\u5185\u6838\u200b\u6001\u200b\u5b9e\u73b0\u200b vhost-net\uff0c\u200b\u6027\u80fd\u200b\u5728\u200b\u9010\u6e10\u200b\u63d0\u5347\u200b\u3002\u200b\u518d\u200b\u5230\u200b\u4e0e\u200b DPDK \u200b\u642d\u914d\u200b\u7684\u200b vhost-user\uff08\u200b\u5728\u200b\u7269\u7406\u200b\u673a\u7528\u6237\u200b\u6001\u200b\u5b9e\u73b0\u200b\u7684\u200b virtio \u200b\u540e\u200b\u7aef\u200b\uff09\uff0c\u200b\u914d\u5408\u200b OVS \u200b\u4f7f\u200b\u865a\u62df\u673a\u200b\u95f4\u200b\u7684\u200b\u901a\u4fe1\u200b\u6548\u7387\u200b\u63d0\u5347\u200b\u3002</p>"},{"location":"qemu/#4","title":"4. \u200b\u53c2\u8003\u200b\u6750\u6599","text":"<ul> <li>QEMU\u200b\u5b98\u65b9\u200b\u7b80\u4ecb\u200b</li> <li>archLinux\u200b\u7684\u200bQEMU\u200b\u7ffb\u8bd1\u200b</li> <li>\u200b\u57fa\u4e8e\u200bqemu\u200b\u4ece\u96f6\u5f00\u59cb\u200b\u6784\u5efa\u200b\u5d4c\u5165\u5f0f\u200blinux\u200b\u7cfb\u7edf\u200b</li> <li>iaas-paas-saas</li> </ul>"},{"location":"os/linux/","title":"linux \u200b\u64cd\u4f5c\u7cfb\u7edf","text":"<ol> <li>linux\u200b\u7cfb\u7edf\u200b\u5165\u95e8\u200b</li> </ol>"},{"location":"os/linux/#1","title":"1. \u200b\u95ee\u9898\u200b\u7b14\u8bb0","text":""},{"location":"os/linux/#11","title":"1.1. \u200b\u6587\u4ef6\u200b\u53e5\u67c4\u200b\u3001\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u3001\u200b\u6587\u4ef6\u200b\u6307\u9488","text":"<ul> <li>\u200b\u4f5c\u7528\u200b\u90fd\u200b\u4e3a\u200b\u8868\u793a\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b</li> <li>\u200b\u6587\u4ef6\u200b\u53e5\u67c4\u200b\u662f\u200bwindows\u200b\u7684\u200b\u6982\u5ff5\u200b\uff0c\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u662f\u200blinux\u200b\u7cfb\u7edf\u200b\u7684\u200b\u6982\u5ff5\u200b</li> <li> <p>\u200b\u6587\u4ef6\u200b\u6307\u9488\u200b\uff0cC\u200b\u8bed\u8a00\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200b\u6587\u4ef6\u200b\u6307\u9488\u200b\u800c\u200b\u4e0d\u662f\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u4f5c\u4e3a\u200bI/O\u200b\u7684\u200b\u53e5\u67c4\u200b\u3002</p> <ul> <li><code>\u200b\u6587\u4ef6\u200b\u6307\u9488\u200b\uff08file pointer\uff09</code>\u200b\u6307\u5411\u200b\u8fdb\u7a0b\u200b\u7528\u6237\u533a\u200b\u4e2d\u200b\u7684\u200b\u4e00\u4e2a\u200b\u88ab\u200b\u79f0\u4e3a\u200bFILE\u200b\u7ed3\u6784\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u3002</li> <li>FILE\u200b\u7ed3\u6784\u200b\u5305\u62ec\u200b<code>\u200b\u4e00\u4e2a\u200b\u7f13\u51b2\u533a\u200b</code>\u200b\u548c\u200b\u4e00\u4e2a\u200b<code>\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u503c\u200b</code>\u3002</li> <li>\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u3001\u200b\u6587\u4ef6\u200b\u8868\u200b\u3001\u200b\u7d22\u5f15\u200b\u7ed3\u70b9\u200b\u8868\u200b</li> </ul> <p></p> </li> <li> <p>\u200b\u4f7f\u7528\u200bulimit\u200b\u9650\u5236\u200b\u8d44\u6e90\u200b\u4f7f\u7528\u200b\uff0c\u200b\u4f8b\u5982\u200bulimit -n 4096\uff0c\u200b\u9650\u5236\u200b\u7528\u6237\u200b\u7684\u200b\u6700\u5927\u200b\u6587\u4ef6\u200b\u6253\u5f00\u200b\u6570\u4e3a\u200b4096\u200b\u4e2a\u200b</p> <ul> <li>ulmit\u200b\u9650\u5236\u200b\u662f\u200b\u7528\u6237\u200b\u7ea7\u200b</li> <li>\u200b\u9650\u5236\u200b\u662f\u200b\u9488\u5bf9\u200b\u5355\u4e2a\u200b\u7a0b\u5e8f\u200b</li> <li>\u200b\u9650\u5236\u200b\u4e0d\u4f1a\u200b\u6539\u53d8\u200b\u4e4b\u524d\u200b\u5df2\u7ecf\u200b\u8fd0\u884c\u200b\u4e86\u200b\u7684\u200b\u7a0b\u5e8f\u200b</li> <li>\u200b\u66f4\u6539\u200b\u9000\u51fa\u200b\u5f53\u524d\u200b\u7684\u200bshell\u200b\u5c31\u200b\u4f1a\u200b\u5931\u6548\u200b</li> </ul> </li> <li> <p>\u200b\u6587\u4ef6\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b</p> <ul> <li>\u200b\u8fdb\u7a0b\u200b\u7ea7\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b(file descriptor table)</li> <li>\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b(open file table)</li> <li>\u200b\u6587\u4ef6\u7cfb\u7edf\u200bi-node\u200b\u8868\u200b(i-node table)-</li> </ul> </li> </ul>"},{"location":"os/linux/#12-io","title":"1.2. IO\u200b\u6a21\u578b","text":"<ul> <li> <p>epoll \u200b\u5728\u200b\u5904\u7406\u200b**\u200b\u5927\u91cf\u200b\u975e\u200b\u6d3b\u8dc3\u200b\u7684\u200b\u8fde\u63a5\u200b\u65f6\u200b**\u200b\u6027\u80fd\u200b\u624d\u200b\u4f1a\u200b\u8868\u73b0\u200b\u7684\u200b\u4f18\u5f02\u200b\u3002\u200b\u5982\u679c\u200b\u5927\u91cf\u200bsocket \u200b\u90fd\u200b\u662f\u200b\u6d3b\u8dc3\u200b\u7684\u200b\uff0cepoll \u200b\u548c\u200b select \u200b\u5176\u5b9e\u200b\u5dee\u200b\u4e0d\u4e86\u200b\u592a\u200b\u591a\u200b</p> </li> <li> <p>IO \u200b\u591a\u8def\u590d\u7528\u200b\u76ee\u7684\u200b\u4e0d\u662f\u200b\u51cf\u5c11\u200b\u4e86\u200b\u963b\u585e\u200b\uff0c\u200b\u662f\u200b\u51cf\u5c11\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b</p> </li> <li> <p>\u200b\u6587\u4ef6\u200bIO\u200b\u548c\u200b\u6807\u51c6\u200bIO\u200b\u7684\u200b\u533a\u522b\u200b</p> <ol> <li>\u200b\u6587\u4ef6\u200bIO\u200b\u9075\u5faa\u200bPOSIX\u200b\u6807\u51c6\u200b\uff0c\u200b\u53ea\u80fd\u200b\u5728\u200b\u9075\u5faa\u200bPOSIX\u200b\u6807\u51c6\u200b\u7684\u200b\u7c7b\u200bUNIX\u200b\u73af\u5883\u200b\u4e0b\u200b\u4f7f\u7528\u200b\uff1b\u200b\u6807\u51c6\u200bIO\u200b\u9075\u5faa\u200bANSI\u200b\u6807\u51c6\u200b\uff0c\u200b\u53ea\u8981\u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b\u5373\u53ef\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u73af\u5883\u4e2d\u8fd0\u884c\u200b\u3002</li> <li>\u200b\u6587\u4ef6\u200bIO\u200b\u5c5e\u4e8e\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff0c\u200b\u53ef\u79fb\u690d\u6027\u200b\u5dee\u200b\uff1b\u200b\u6807\u51c6\u200bIO\u200b\u5c5e\u4e8e\u200bC\u200b\u5e93\u200b\uff08\u200b\u4f8b\u5982\u200bglibc\uff09\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e0b\u200b\u79fb\u690d\u200b\u3002</li> <li>\u200b\u6587\u4ef6\u200bIO\u200b\u4f7f\u7528\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\uff1b\u200b\u6807\u51c6\u200bIO\u200b\u4f7f\u7528\u200b\u6587\u4ef6\u200b\u6d41\u200b\u6307\u9488\u200b\u3002</li> <li>\u200b\u6587\u4ef6\u200bIO\u200b\u4e0d\u5e26\u200b\u7f13\u51b2\u200b\uff0c\u200b\u6267\u884c\u200b\u6548\u7387\u200b\u8f83\u200b\u4f4e\u200b\uff1b\u200b\u6807\u51c6\u200bIO\u200b\u5e26\u200b\u7f13\u51b2\u200b\uff0c\u200b\u6267\u884c\u200b\u6548\u7387\u200b\u8f83\u200b\u9ad8\u200b\u3002<ul> <li>\u200b\u6587\u4ef6\u200bIO\u200b\u4e0d\u200b\u5b58\u5728\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u6240\u4ee5\u200b\u6bcf\u6b21\u200b\u5411\u200b\u786c\u76d8\u200b\u5199\u5165\u200b\u4e00\u4e2a\u200b\u5b57\u7b26\u200b\uff0c\u200b\u90fd\u200b\u4f1a\u200b\u7ecf\u8fc7\u200bVFS-&gt;\u200b\u6587\u4ef6\u7cfb\u7edf\u200b-&gt;\u200b\u9a71\u52a8\u200b-&gt;\u200b\u786c\u76d8\u200b</li> <li>\u200b\u6807\u51c6\u200bIO\u200b\u5b58\u5728\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u5b83\u200b\u7684\u200b\u5199\u5165\u200b\u65b9\u5f0f\u200b\u662f\u200b\uff0c\u200b\u5148\u200b\u5c06\u200b\u6240\u6709\u200b\u5b57\u7b26\u200b\u4fdd\u5b58\u200b\u81f3\u200b\u4e00\u5757\u200b\u5185\u5b58\u200b\uff0c\u200b\u7136\u540e\u200b\u4e00\u8d77\u200b\u7ecf\u8fc7\u200bVFS-&gt;\u200b\u6587\u4ef6\u7cfb\u7edf\u200b-&gt;\u200b\u9a71\u52a8\u200b-&gt;\u200b\u786c\u76d8\u200b</li> <li>\u200b\u6240\u4ee5\u200b\u6807\u51c6\u200bIO\u200b\u6267\u884c\u200bVFS-&gt;\u200b\u6587\u4ef6\u7cfb\u7edf\u200b-&gt;\u200b\u9a71\u52a8\u200b-&gt;\u200b\u786c\u76d8\u200b\u4ec5\u200b\u4f7f\u7528\u200b\u4e00\u6b21\u200b\uff0c\u200b\u800c\u200b\u6587\u4ef6\u200bIO\u200b\u6bcf\u200b\u4e00\u6b21\u200b\u5199\u5165\u200b\u90fd\u200b\u9700\u8981\u200b\u7ecf\u5386\u200b\u4e00\u6b21\u200b\u3002\u200b\u6545\u800c\u200b\u6807\u51c6\u200bIO\u200b\u7684\u200b\u901f\u5ea6\u200b\u662f\u200b\u8981\u200b\u5feb\u200b\u7684\u200b\u3002</li> </ul> </li> <li>\u200b\u6587\u4ef6\u200bIO\u200b\u5c5e\u4e8e\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5982\u200b\u666e\u901a\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8bbe\u5907\u200b\u6587\u4ef6\u200b\uff0c\u200b\u7ba1\u9053\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5957\u200b\u63a5\u5b57\u200b\u6587\u4ef6\u200b\u7b49\u200b\uff1b\u200b\u6807\u51c6\u200bIO\u200b\u5c5e\u4e8e\u200bC\u200b\u5e93\u200b\u53ea\u80fd\u200b\u8bbf\u95ee\u200b\u666e\u901a\u200b\u6587\u4ef6\u200b\u3002</li> </ol> </li> <li> <p>\u200b\u6587\u4ef6\u200bIO\u200b\u548c\u200b\u6807\u51c6\u200bIO\u200b\u7684\u200b\u5173\u7cfb\u200b</p> <ol> <li>\u200b\u6807\u51c6\u200bIO\u200b\u662f\u200b\u57fa\u4e8e\u200b\u6587\u4ef6\u200bIO\u200b\u5e76\u200b\u5728\u200b\u5176\u200b\u57fa\u7840\u200b\u4e0a\u200b\u8fdb\u884c\u200b\u4e86\u200b\u5c01\u88c5\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u5b9e\u73b0\u200b\u7684\u200b\u3002</li> <li>Linux\u200b\u4f7f\u7528\u200bGLIBC\u200b\u51fd\u6570\u5e93\u200b\uff0c\u200b\u5373\u200bGNU\u200b\u7684\u200bC\u200b\u51fd\u6570\u5e93\u200b\uff0c\u200b\u5373\u200b\u5305\u542b\u200b\u4e86\u200bPOSIX\u200b\u6807\u51c6\u200b\u53c8\u200b\u5305\u542b\u200b\u4e86\u200bANSI\u200b\u6807\u51c6\u200b\u3002</li> </ol> </li> </ul>"},{"location":"os/linux/#13-ipc","title":"1.3. IPC \u200b\u8fdb\u7a0b\u200b\u95f4\u901a\u4fe1","text":"<ol> <li>\u200b\u8fdb\u7a0b\u200b\u95f4\u901a\u4fe1\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u673a\u5236\u200b</li> <li>\u200b\u53c2\u8003\u8d44\u6599\u200b</li> <li>IPC\u200b\u901a\u4fe1\u200b\u90fd\u200b\u9700\u8981\u200b\u5185\u6838\u200b\u505a\u200b\u8f6c\u53d1\u200b\uff0c\u200b\u5373\u200b\u5185\u6838\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u8fd9\u200b\u4e5f\u200b\u662f\u200b\u96f6\u200b\u62f7\u8d1d\u200b\u6280\u672f\u200b\u7684\u200b\u7531\u200b\u6765\u200b</li> </ol> <ol> <li> <p>\u200b\u7ba1\u9053\u200bPipe</p> <ul> <li>\u200b\u65e0\u540d\u200b\u7ba1\u9053\u200b\u662f\u200b\u4e00\u79cd\u200b\u7279\u6b8a\u200b\u7c7b\u578b\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5176\u672c\u8d28\u200b\u662f\u200b\u5185\u6838\u200b\u7ef4\u62a4\u200b\u4e00\u4e2a\u200b\u7684\u200b**\u200b\u73af\u5f62\u200b\u5bf9\u5217\u200b**\uff0c\u200b\u4f1a\u200b\u4e34\u65f6\u200b\u5b58\u5165\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u53d1\u9001\u7ed9\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8fd9\u200b\u6bb5\u200b\u5185\u5b58\u200b\u5b8c\u5168\u200b\u7531\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ba1\u7406\u200b\u548c\u200b\u7ef4\u62a4\u200b\uff0c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ea\u80fd\u200b\u901a\u8fc7\u200b**\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b**\u200b\u6765\u200b\u8bbf\u95ee\u200b\u5b83\u200b\u3002</li> <li>\u200b\u65e0\u540d\u200b\u7ba1\u9053\u200b\u7684\u200b\u5185\u6838\u200b\u8d44\u6e90\u200b\u5728\u200b\u901a\u4fe1\u200b\u4e24\u200b\u8fdb\u7a0b\u200b\u9000\u51fa\u200b\u540e\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u91ca\u653e\u200b\u3002\u200b\u8ddf\u200b\u666e\u901a\u200b\u6587\u4ef6\u200b\u4e0d\u540c\u200b\u3002</li> <li>\u200b\u5b58\u50a8\u200b\u5927\u91cf\u200b\u5e38\u89c4\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4f46\u662f\u200b\u7f16\u7a0b\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u5177\u6709\u200b\u548c\u200b\u666e\u901a\u200b\u6587\u4ef6\u200b\u4e00\u6837\u200b\u7684\u200b\u7279\u70b9\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bread/write\u200b\u7b49\u200b\u51fd\u6570\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\uff0c\u200b\u53ea\u662f\u200b\uff08\u200b\u7279\u6b8a\u200b\u7684\u200b\u6587\u4ef6\u200b\u53ea\u80fd\u200b\u7528\u200b\u6587\u4ef6\u200bIO\u200b\u64cd\u4f5c\u200b\uff09<ul> <li>\u200b\u8bfb\u5199\u200b\u7684\u200b\u7279\u70b9\u200b\u6709\u200b\u4e00\u5b9a\u200b\u7684\u200b\u5dee\u5f02\u200b\uff0c\u200b\u53e6\u5916\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u7528\u200blseek\u200b\u51fd\u6570\u200b\u6765\u200b\u4fee\u6539\u200b\u5f53\u524d\u200b\u7684\u200b\u8bfb\u5199\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u56e0\u4e3a\u200bFIFO\u200b\u9700\u8981\u200b\u6ee1\u8db3\u200bFIFO\u200b\u7684\u200b\u539f\u5219\u200b\u3002</li> </ul> </li> <li>\u200b\u7279\u70b9\u200b\uff1a<ol> <li>\u200b\u4f7f\u7528\u200b\u6761\u4ef6\u200b\uff1a\u200b\u53ea\u80fd\u200b\u7528\u4e8e\u200b\u5177\u6709\u200b\u4eb2\u7f18\u200b\u5173\u7cfb\u200b\uff08\u200b\u7236\u5b50\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u5144\u5f1f\u200b\u8fdb\u7a0b\u200b\u7b49\u200b\uff09\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u4e4b\u95f4\u200b\u7684\u200b\u901a\u4fe1\u200b</li> <li>\u200b\u901a\u4fe1\u200b\u6a21\u5f0f\u200b\uff1a\u200b\u534a\u53cc\u5de5\u200b\u6a21\u5f0f\u200b\uff0cfd[0]\u200b\u4f5c\u4e3a\u200b\u8bfb\u7aef\u200b\uff0cfd[1]\u200b\u4f5c\u4e3a\u200b\u5199\u7aef\u200b</li> <li>\u200b\u8bfb\u5199\u200b\u65b9\u5f0f\u200b\uff1a\u200b\u5bf9\u4e8e\u200b\u5b83\u200b\u7684\u200b\u8bfb\u5199\u200b\u91c7\u7528\u200b\u6587\u4ef6\u200bIO\uff08\u200b\u4e0d\u200b\u652f\u6301\u200blseek\u200b\u51fd\u6570\u200b\uff09</li> <li>\u200b\u8bfb\u200b\u64cd\u4f5c\u200b\u4f1a\u200b\u963b\u585e\u200b\uff08\u200b\u7b49\u5f85\u200b\uff09\uff1a\u200b\u5728\u200b\u7ba1\u9053\u200b\u4e2d\u200b\u65e0\u200b\u6570\u636e\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u3002 \u200b\u5199\u200b\u64cd\u4f5c\u200b\u4f1a\u200b\u963b\u585e\u200b\uff08\u200b\u7b49\u5f85\u200b\uff09\uff1a\u200b\u5f53\u200b\u7ba1\u9053\u200b\u88ab\u200b\u5199\u200b\u6ee1\u65f6\u200b\uff0c\u200b\u65e0\u540d\u200b\u7ba1\u9053\u200b\u7684\u200b\u5927\u5c0f\u200b\u4e3a\u200b64K</li> <li>\u200b\u7ba1\u9053\u200b\u7834\u88c2\u200b\uff1a\u200b\u7ba1\u9053\u200b\u8bfb\u7aef\u200b\u5173\u95ed\u200b\uff0c\u200b\u518d\u200b\u5411\u200b\u7ba1\u9053\u200b\u4e2d\u5199\u200b\u6570\u636e\u200b\u65f6\u200b\u3002\u200b\u5373\u200b\u5411\u200b\u7ba1\u9053\u200b\u4e2d\u200b\u5199\u5165\u200b\u6570\u636e\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u5c06\u200b\u6536\u5230\u200b\u5185\u6838\u200b\u4f20\u6765\u200b\u7684\u200bSIGPIPE\u200b\u4fe1\u53f7\u200b\u3002</li> </ol> </li> </ul> </li> <li> <p>\u200b\u547d\u540d\u200b\u7ba1\u9053\u200bFIFO</p> <ul> <li>\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u540d\u79f0\u200b\u4fdd\u5b58\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e0a\u200b\uff0c\u200b\u4f46\u662f\u200b\u5185\u5bb9\u200b\u4fdd\u5b58\u200b\u5728\u200b\u5185\u6838\u200b\u4e2d\u200b<ul> <li>\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u548c\u200b\u666e\u901a\u200b\u7684\u200b\u6587\u4ef6\u200b\u4e00\u6837\u200b\u5177\u6709\u200b\u78c1\u76d8\u200b\u5b58\u653e\u200b\u8def\u5f84\u200b\uff0c\u200b\u6587\u4ef6\u200b\u7684\u200b\u6743\u9650\u200b\u548c\u200b\u5176\u4ed6\u200b\u7684\u200b\u5c5e\u6027\u200b\u4fe1\u606f\u200b</li> <li>\u200b\u4f46\u662f\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u548c\u200b\u666e\u901a\u200b\u6587\u4ef6\u200b\u53c8\u200b\u6709\u200b\u533a\u522b\u200b\uff0c\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u6ca1\u6709\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e0a\u5b58\u200b\u771f\u6b63\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u800c\u662f\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u5b58\u653e\u200b\uff0c2\u200b\u4e2a\u200b\u8fdb\u7a0b\u200b\u7ed3\u675f\u200b\u540e\u200b\u81ea\u52a8\u200b\u4e22\u5931\u200b</li> <li>\u200b\u901a\u4fe1\u200b\u7ed3\u675f\u200b\u540e\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u7684\u200b\u6587\u4ef6\u200b\u8def\u5f84\u200b\u672c\u8eab\u200b\u5b58\u5728\u200b\uff0c\u200b\u8fd9\u200b\u662f\u200b\u548c\u200b\u65e0\u540d\u200b\u7ba1\u9053\u200b\u533a\u522b\u200b\u7684\u200b\u5730\u65b9\u200b</li> </ul> </li> <li>\u200b\u7279\u70b9\u200b\uff1a<ol> <li>\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u53ef\u4ee5\u200b\u4f7f\u200b\u4e92\u4e0d\u200b\u76f8\u5173\u200b\u7684\u200b\u4e24\u4e2a\u200b\u8fdb\u7a0b\u200b\u4e92\u76f8\u200b\u901a\u4fe1\u200b\u3002</li> <li>\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8def\u5f84\u540d\u200b\u6765\u200b\u6307\u51fa\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5728\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u4e2d\u200b\u53ef\u89c1\u200b\u3002</li> <li>\u200b\u5bf9\u4e8e\u200b\u5b83\u200b\u7684\u200b\u8bfb\u5199\u200b\u91c7\u7528\u200b\u6587\u4ef6\u200bIO\uff08\u200b\u4e0d\u200b\u652f\u6301\u200blseek\u200b\u51fd\u6570\u200b\uff09</li> <li>\u200b\u5176\u5b83\u200b\u4e0e\u200b\u65e0\u540d\u200b\u7ba1\u9053\u200b\u4e00\u6837\u200b</li> <li>\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u8bfb\u7aef\u200b\u5199\u200b\u7aef\u200b\u4e0d\u200b\u56fa\u5b9a\u200b\u3002\u200b\u4e00\u6bb5\u200b\u8bfb\u200b\uff0c\u200b\u53e6\u4e00\u7aef\u200b\u5199\u200b\u3002\u200b\u5f53\u7136\u200b\u67d0\u200b\u4e00\u7aef\u200b\u65e2\u200b\u53ef\u4ee5\u200b\u8bfb\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5199\u200b\uff0c\u200b\u8981\u200b\u7528\u200b\u7236\u5b50\u200b\u8fdb\u7a0b\u200b\u5b9e\u73b0\u200b\u3002</li> </ol> </li> </ul> </li> <li> <p>\u200b\u6d88\u606f\u200b\u961f\u5217\u200bMessageQueue</p> <ul> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u662f\u200b\u7531\u200b\u6d88\u606f\u200b\u7684\u200b\u94fe\u8868\u200b\uff0c\u200b\u5b58\u653e\u200b\u5728\u200b\u5185\u6838\u200b\u4e2d\u200b\u5e76\u200b\u7531\u200b**\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u6807\u8bc6\u7b26\u200b\u6807\u8bc6\u200b**\u3002</li> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u514b\u670d\u200b\u4e86\u200b\u4e00\u4e0b\u200b\u7f3a\u70b9\u200b<ul> <li>\u200b\u4fe1\u53f7\u200b\u4f20\u9012\u4fe1\u606f\u200b\u5c11\u200b</li> <li>\u200b\u7ba1\u9053\u200b\u53ea\u80fd\u200b\u627f\u8f7d\u200b\u65e0\u200b\u683c\u5f0f\u200b\u5b57\u8282\u200b\u6d41\u200b</li> <li>\u200b\u7f13\u51b2\u533a\u200b\u5927\u5c0f\u200b\u53d7\u9650\u200b</li> </ul> </li> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u5141\u8bb8\u200b**\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u8fdb\u7a0b\u200b\u5411\u200b\u5b83\u200b\u5199\u5165\u200b\u6216\u8005\u200b\u8bfb\u53d6\u200b\u6d88\u606f\u200b**\uff0c\u200b\u5e76\u4e14\u200b\u6bcf\u6761\u200b\u6d88\u606f\u200b\u90fd\u200b\u6709\u200b\u7c7b\u578b\u200b</li> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u53ef\u4ee5\u200b**\u200b\u5b9e\u73b0\u200b\u6d88\u606f\u200b\u7684\u200b\u968f\u673a\u200b\u67e5\u8be2\u200b**\uff0c\u200b\u6d88\u606f\u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u8981\u200b\u4ee5\u200b**\u200b\u5148\u8fdb\u5148\u51fa\u200b\u7684\u200b\u6b21\u5e8f\u200b\u8bfb\u53d6\u200b**\uff0c\u200b\u7f16\u7a0b\u200b\u65f6\u200b\u53ef\u4ee5\u200b\u6309\u200b\u6d88\u606f\u200b\u7684\u200b\u7c7b\u578b\u200b\u8bfb\u53d6\u200b\u3002</li> <li>\u200b\u4e0e\u200b\u65e0\u540d\u200b\u7ba1\u9053\u200b\u3001\u200b\u6709\u540d\u200b\u7ba1\u9053\u200b\u4e00\u6837\u200b\uff0c\u200b\u4ece\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u4e2d\u200b\u8bfb\u51fa\u200b\u6d88\u606f\u200b\uff0c\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u4e2d\u200b\u6570\u636e\u200b\u4f1a\u200b\u88ab\u200b\u5220\u9664\u200b\u3002</li> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u4e2d\u200b\u7684\u200b\u6d88\u606f\u200b\u662f\u200b\u6709\u200b\u683c\u5f0f\u200b\u7684\u200b\u3002</li> <li>\u200b\u53ea\u6709\u200b\u5185\u6838\u200b\u91cd\u542f\u200b\u6216\u200b\u4eba\u5de5\u200b\u5220\u9664\u200b\u65f6\u200b\uff0c\u200b\u8be5\u200b\u6d88\u606f\u200b\u624d\u200b\u4f1a\u200b\u88ab\u200b\u5220\u9664\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u4eba\u5de5\u200b\u5220\u9664\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\uff0c\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u4f1a\u200b\u4e00\u76f4\u200b\u5b58\u5728\u200b\u4e8e\u200b\u5185\u5b58\u200b\u4e2d\u200b</li> <li>\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u6807\u8bc6\u7b26\u200b\uff0c\u200b\u6765\u200b\u6807\u8bc6\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u3002\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u5728\u200b\u6574\u4e2a\u200b\u7cfb\u7edf\u200b\u4e2d\u662f\u200b\u552f\u4e00\u200b\u7684\u200b\u3002\uf0d8</li> </ul> </li> <li> <p>\u200b\u5171\u4eab\u200b\u5b58\u50a8\u200bSharedMemory</p> <ul> <li>\u200b\u5171\u4eab\u5185\u5b58\u200b\u5c31\u662f\u200b\u6620\u5c04\u200b\u4e00\u6bb5\u200b\u80fd\u200b\u88ab\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u6240\u200b\u8bbf\u95ee\u200b\u7684\u200b\u5185\u5b58\u200b\uff0c\u200b\u8fd9\u200b\u6bb5\u200b\u5171\u4eab\u5185\u5b58\u200b\u7531\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u521b\u5efa\u200b\uff0c\u200b\u4f46\u200b\u591a\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u3002</li> <li>\u200b\u7406\u8bba\u200b\u4e0a\u200b\uff0c\u200b\u5171\u4eab\u5185\u5b58\u200b\u662f\u200b\u6700\u5feb\u200b\u7684\u200b IPC \u200b\u65b9\u5f0f\u200b\uff0c\u200b\u5b83\u200b\u662f\u200b\u9488\u5bf9\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u95f4\u901a\u4fe1\u200b\u65b9\u5f0f\u200b\u8fd0\u884c\u200b\u6548\u7387\u200b\u4f4e\u200b\u800c\u200b\u4e13\u95e8\u200b\u8bbe\u8ba1\u200b\u7684\u200b\u3002\u200b\u5b83\u200b\u5f80\u5f80\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u901a\u4fe1\u200b\u673a\u5236\u200b\uff0c\u200b\u5982\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u914d\u5408\u200b\u4f7f\u7528\u200b\uff0c\u200b\u6765\u200b\u5b9e\u73b0\u200b\u8fdb\u7a0b\u200b\u95f4\u200b\u7684\u200b\u540c\u6b65\u200b\u548c\u200b\u901a\u4fe1\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u4fe1\u53f7\u91cf\u200bSemaphore</p> <ul> <li>\u200b\u4fe1\u53f7\u91cf\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8ba1\u6570\u5668\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u6765\u200b\u63a7\u5236\u200b\u591a\u4e2a\u200b\u8fdb\u7a0b\u200b\u5bf9\u200b\u5171\u4eab\u8d44\u6e90\u200b\u7684\u200b\u8bbf\u95ee\u200b\u3002\u200b\u5b83\u5e38\u200b\u4f5c\u4e3a\u200b\u4e00\u79cd\u200b\u9501\u200b\u673a\u5236\u200b\uff0c\u200b\u9632\u6b62\u200b\u67d0\u200b\u8fdb\u7a0b\u200b\u6b63\u5728\u200b\u8bbf\u95ee\u5171\u4eab\u200b\u8d44\u6e90\u200b\u65f6\u200b\uff0c\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u4e5f\u200b\u8bbf\u95ee\u200b\u8be5\u200b\u8d44\u6e90\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u4e3b\u8981\u200b\u4f5c\u4e3a\u200b\u8fdb\u7a0b\u200b\u95f4\u200b\u4ee5\u53ca\u200b\u540c\u4e00\u200b\u8fdb\u7a0b\u200b\u5185\u200b\u4e0d\u540c\u200b\u7ebf\u7a0b\u200b\u4e4b\u95f4\u200b\u7684\u200b\u540c\u6b65\u200b\u624b\u6bb5\u200b\u3002</li> <li>\u200b\u7528\u4e8e\u200b\u8fdb\u7a0b\u200b\u95f4\u200b\u540c\u6b65\u200b</li> </ul> </li> <li> <p>\u200b\u5957\u200b\u63a5\u5b57\u200bSocket</p> <ul> <li>\u200b\u5957\u200b\u63a5\u5b57\u200b\u4e5f\u200b\u662f\u200b\u4e00\u79cd\u200b\u8fdb\u7a0b\u200b\u95f4\u901a\u4fe1\u200b\u673a\u5236\u200b\uff0c\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u901a\u4fe1\u200b\u673a\u5236\u200b\u4e0d\u540c\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u5b83\u200b\u53ef\u200b\u7528\u4e8e\u200b\u4e0d\u540c\u200b\u53ca\u5176\u200b\u95f4\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u901a\u4fe1\u200b\u3002</li> </ul> </li> <li> <p>\u200b\u4fe1\u53f7\u200bsinal</p> <ul> <li>\u200b\u4fe1\u53f7\u200b\u662f\u200b\u4e00\u79cd\u200b\u6bd4\u8f83\u590d\u6742\u200b\u7684\u200b\u901a\u4fe1\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u7528\u4e8e\u200b\u901a\u77e5\u200b\u63a5\u6536\u200b\u8fdb\u7a0b\u200b\u67d0\u4e2a\u200b\u4e8b\u4ef6\u200b\u5df2\u7ecf\u200b\u53d1\u751f\u200b\u3002</li> <li>\u200b\u4fe1\u53f7\u200b\u662f\u200b\u5728\u200b\u8f6f\u4ef6\u200b\u5c42\u6b21\u200b\u4e0a\u200b\u5bf9\u200b\u4e2d\u65ad\u200b\u673a\u5236\u200b\u7684\u200b\u4e00\u79cd\u200b\u6a21\u62df\u200b\uff0c\u200b\u5728\u200b\u539f\u7406\u200b\u4e0a\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u6536\u5230\u200b\u4e00\u4e2a\u200b\u4fe1\u53f7\u200b\u4e0e\u200b\u5904\u7406\u5668\u200b\u6536\u5230\u200b\u4e00\u4e2a\u200b\u4e2d\u65ad\u8bf7\u6c42\u200b\u53ef\u4ee5\u200b\u8bf4\u200b\u662f\u200b\u4e00\u6837\u200b\u7684\u200b\u3002</li> <li>\u200b\u4fe1\u53f7\u200b\u662f\u200b\u8fdb\u7a0b\u200b\u95f4\u901a\u4fe1\u200b\u673a\u5236\u200b\u4e2d\u200b\u552f\u4e00\u200b\u7684\u200b\u5f02\u6b65\u200b\u901a\u4fe1\u200b\u673a\u5236\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u770b\u4f5c\u200b\u662f\u200b\u5f02\u6b65\u200b\u901a\u77e5\u200b\uff0c\u200b\u901a\u77e5\u200b\u63a5\u6536\u200b\u4fe1\u53f7\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u6709\u200b\u54ea\u4e9b\u200b\u4e8b\u60c5\u200b\u53d1\u751f\u200b\u4e86\u200b\u3002</li> <li>\u200b\u4fe1\u53f7\u200b\u673a\u5236\u200b\u7ecf\u8fc7\u200b POSIX \u200b\u5b9e\u65f6\u200b\u6269\u5c55\u200b\u540e\u200b\uff0c\u200b\u529f\u80fd\u200b\u66f4\u52a0\u200b\u5f3a\u5927\u200b\uff0c\u200b\u9664\u4e86\u200b\u57fa\u672c\u200b\u901a\u77e5\u200b\u529f\u80fd\u200b\u5916\u200b\uff0c\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u4f20\u9012\u200b\u9644\u52a0\u200b\u4fe1\u606f\u200b\u3002</li> <li>\u200b\u6700\u200b\u5e38\u7528\u200b\u53d1\u9001\u200b\u4fe1\u53f7\u200b\u7684\u200b\u7cfb\u7edf\u200b\u51fd\u6570\u200b\u662f\u200b<code>kill, raise, alarm \u200b\u548c\u200b setitimer \u200b\u4ee5\u53ca\u200b sigqueue</code>\u200b\u51fd\u6570\u200b\uff0c\u200b\u8f6f\u4ef6\u200b\u6765\u6e90\u200b\u8fd8\u200b\u5305\u62ec\u200b\u4e00\u4e9b\u200b\u975e\u6cd5\u200b\u8fd0\u7b97\u200b\u7b49\u200b\u64cd\u4f5c\u200b\u3002</li> </ul> </li> </ol>"},{"location":"os/rtos/","title":"RTOS","text":"<pre><code>#ifndef FREERTOS_CONFIG_H\n#define FREERTOS_CONFIG_H\n\n#include \"stm32f10x.h\"\n#include \"bsp_usart.h\"\n\n// \u200b\u9488\u5bf9\u200b\u4e0d\u540c\u200b\u7684\u200b\u7f16\u8bd1\u5668\u200b\u8c03\u7528\u200b\u4e0d\u540c\u200b\u7684\u200bstdint.h\u200b\u6587\u4ef6\u200b\n#if defined(__ICCARM__) || defined(__CC_ARM) || defined(__GNUC__)\n#include &lt;stdint.h&gt;\nextern uint32_t SystemCoreClock;\n#endif\n\n// \u200b\u65ad\u8a00\u200b\n#define vAssertCalled(char, int) printf(\"Error:%s,%d\\r\\n\", char, int)\n#define configASSERT(x) \\\n    if ((x) == 0)       \\\n    vAssertCalled(__FILE__, __LINE__)\n\n/************************************************************************\n *               FreeRTOS\u200b\u57fa\u7840\u200b\u914d\u7f6e\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n *********************************************************************/\n/* \u200b\u7f6e\u200b1\uff1aRTOS\u200b\u4f7f\u7528\u200b\u62a2\u5360\u200b\u5f0f\u8c03\u5ea6\u200b\u5668\u200b\uff1b\u200b\u7f6e\u200b0\uff1aRTOS\u200b\u4f7f\u7528\u200b\u534f\u4f5c\u200b\u5f0f\u8c03\u5ea6\u200b\u5668\u200b\uff08\u200b\u65f6\u95f4\u200b\u7247\u200b\uff09\n *\n * \u200b\u6ce8\u200b\uff1a\u200b\u5728\u200b\u591a\u4efb\u52a1\u200b\u7ba1\u7406\u673a\u5236\u200b\u4e0a\u200b\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u53ef\u4ee5\u200b\u5206\u4e3a\u200b\u62a2\u5360\u200b\u5f0f\u200b\u548c\u200b\u534f\u4f5c\u200b\u5f0f\u200b\u4e24\u79cd\u200b\u3002\n * \u200b\u534f\u4f5c\u200b\u5f0f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u662f\u200b\u4efb\u52a1\u200b\u4e3b\u52a8\u200b\u91ca\u653e\u200bCPU\u200b\u540e\u200b\uff0c\u200b\u5207\u6362\u200b\u5230\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u4efb\u52a1\u200b\u3002\n * \u200b\u4efb\u52a1\u200b\u5207\u6362\u200b\u7684\u200b\u65f6\u673a\u200b\u5b8c\u5168\u200b\u53d6\u51b3\u4e8e\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\u7684\u200b\u4efb\u52a1\u200b\u3002\n */\n#define configUSE_PREEMPTION 1\n\n// 1\u200b\u4f7f\u80fd\u200b\u65f6\u95f4\u200b\u7247\u200b\u8c03\u5ea6\u200b(\u200b\u9ed8\u8ba4\u200b\u5f0f\u200b\u4f7f\u200b\u80fd\u200b\u7684\u200b)\n#define configUSE_TIME_SLICING 1\n\n/* \u200b\u67d0\u4e9b\u200b\u8fd0\u884c\u200bFreeRTOS\u200b\u7684\u200b\u786c\u4ef6\u200b\u6709\u200b\u4e24\u79cd\u200b\u65b9\u6cd5\u200b\u9009\u62e9\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u8981\u200b\u6267\u884c\u200b\u7684\u200b\u4efb\u52a1\u200b\uff1a\n * \u200b\u901a\u7528\u200b\u65b9\u6cd5\u200b\u548c\u200b\u7279\u5b9a\u200b\u4e8e\u200b\u786c\u4ef6\u200b\u7684\u200b\u65b9\u6cd5\u200b\uff08\u200b\u4ee5\u4e0b\u200b\u7b80\u79f0\u200b\u201c\u200b\u7279\u6b8a\u200b\u65b9\u6cd5\u200b\u201d\uff09\u3002\n *\n * \u200b\u901a\u7528\u200b\u65b9\u6cd5\u200b\uff1a\n *      1.configUSE_PORT_OPTIMISED_TASK_SELECTION \u200b\u4e3a\u200b 0 \u200b\u6216\u8005\u200b\u786c\u4ef6\u200b\u4e0d\u200b\u652f\u6301\u200b\u8fd9\u79cd\u200b\u7279\u6b8a\u200b\u65b9\u6cd5\u200b\u3002\n *      2.\u200b\u53ef\u4ee5\u200b\u7528\u4e8e\u200b\u6240\u6709\u200bFreeRTOS\u200b\u652f\u6301\u200b\u7684\u200b\u786c\u4ef6\u200b\n *      3.\u200b\u5b8c\u5168\u200b\u7528\u200bC\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u6548\u7387\u200b\u7565\u4f4e\u4e8e\u200b\u7279\u6b8a\u200b\u65b9\u6cd5\u200b\u3002\n *      4.\u200b\u4e0d\u200b\u5f3a\u5236\u200b\u8981\u6c42\u200b\u9650\u5236\u200b\u6700\u5927\u200b\u53ef\u7528\u200b\u4f18\u5148\u7ea7\u200b\u6570\u76ee\u200b\n * \u200b\u7279\u6b8a\u200b\u65b9\u6cd5\u200b\uff1a\n *      1.\u200b\u5fc5\u987b\u200b\u5c06\u200bconfigUSE_PORT_OPTIMISED_TASK_SELECTION\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b1\u3002\n *      2.\u200b\u4f9d\u8d56\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u7279\u5b9a\u200b\u67b6\u6784\u200b\u7684\u200b\u6c47\u7f16\u200b\u6307\u4ee4\u200b\uff08\u200b\u4e00\u822c\u200b\u662f\u200b\u7c7b\u4f3c\u200b\u8ba1\u7b97\u200b\u524d\u5bfc\u200b\u96f6\u200b[CLZ]\u200b\u6307\u4ee4\u200b\uff09\u3002\n *      3.\u200b\u6bd4\u200b\u901a\u7528\u200b\u65b9\u6cd5\u200b\u66f4\u200b\u9ad8\u6548\u200b\n *      4.\u200b\u4e00\u822c\u200b\u5f3a\u5236\u200b\u9650\u5b9a\u200b\u6700\u5927\u200b\u53ef\u7528\u200b\u4f18\u5148\u7ea7\u200b\u6570\u76ee\u200b\u4e3a\u200b32\n * \u200b\u4e00\u822c\u200b\u662f\u200b\u786c\u4ef6\u200b\u8ba1\u7b97\u200b\u524d\u5bfc\u200b\u96f6\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5982\u679c\u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\uff0cMCU\u200b\u6ca1\u6709\u200b\u8fd9\u4e9b\u200b\u786c\u4ef6\u200b\u6307\u4ee4\u200b\u7684\u8bdd\u200b\u6b64\u5b8f\u200b\u5e94\u8be5\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b0\uff01\n */\n#define configUSE_PORT_OPTIMISED_TASK_SELECTION 1\n\n/* \u200b\u7f6e\u200b1\uff1a\u200b\u4f7f\u80fd\u200b\u4f4e\u529f\u8017\u200btickless\u200b\u6a21\u5f0f\u200b\uff1b\u200b\u7f6e\u200b0\uff1a\u200b\u4fdd\u6301\u200b\u7cfb\u7edf\u200b\u8282\u62cd\u200b\uff08tick\uff09\u200b\u4e2d\u65ad\u200b\u4e00\u76f4\u200b\u8fd0\u884c\u200b\n * \u200b\u5047\u8bbe\u200b\u5f00\u542f\u200b\u4f4e\u529f\u8017\u200b\u7684\u8bdd\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u4e0b\u8f7d\u200b\u51fa\u73b0\u200b\u95ee\u9898\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u7761\u7720\u200b\u4e2d\u200b,\u200b\u53ef\u7528\u200b\u4ee5\u4e0b\u200b\u529e\u6cd5\u200b\u89e3\u51b3\u200b\n *\n * \u200b\u4e0b\u8f7d\u200b\u65b9\u6cd5\u200b\uff1a\n *      1.\u200b\u5c06\u200b\u5f00\u53d1\u200b\u7248\u200b\u6b63\u5e38\u200b\u8fde\u63a5\u200b\u597d\u200b\n *      2.\u200b\u6309\u4f4f\u200b\u590d\u4f4d\u200b\u6309\u952e\u200b\uff0c\u200b\u70b9\u51fb\u200b\u4e0b\u8f7d\u200b\u77ac\u95f4\u200b\u677e\u5f00\u200b\u590d\u4f4d\u200b\u6309\u952e\u200b\n *\n *      1.\u200b\u901a\u8fc7\u200b\u8df3\u7ebf\u200b\u5e3d\u200b\u5c06\u200b BOOT 0 \u200b\u63a5\u200b\u9ad8\u7535\u5e73\u200b(3.3V)\n *      2.\u200b\u91cd\u65b0\u200b\u4e0a\u7535\u200b\uff0c\u200b\u4e0b\u8f7d\u200b\n *\n *          1.\u200b\u4f7f\u7528\u200bFlyMcu\u200b\u64e6\u9664\u200b\u4e00\u4e0b\u200b\u82af\u7247\u200b\uff0c\u200b\u7136\u540e\u200b\u8fdb\u884c\u200b\u4e0b\u8f7d\u200b\n *          STMISP -&gt; \u200b\u6e05\u9664\u200b\u82af\u7247\u200b(z)\n */\n#define configUSE_TICKLESS_IDLE 0\n\n/*\n * \u200b\u5199\u5165\u200b\u5b9e\u9645\u200b\u7684\u200bCPU\u200b\u5185\u6838\u200b\u65f6\u949f\u200b\u9891\u7387\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200bCPU\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u9891\u7387\u200b\uff0c\u200b\u901a\u5e38\u200b\u79f0\u4e3a\u200bFclk\n * Fclk\u200b\u4e3a\u200b\u4f9b\u7ed9\u200bCPU\u200b\u5185\u6838\u200b\u7684\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u6211\u4eec\u200b\u6240\u8bf4\u200b\u7684\u200bcpu\u200b\u4e3b\u9891\u200b\u4e3a\u200b XX MHz\uff0c\n * \u200b\u5c31\u662f\u6307\u200b\u7684\u200b\u8fd9\u4e2a\u200b\u65f6\u949f\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u76f8\u5e94\u200b\u7684\u200b\uff0c1/Fclk\u200b\u5373\u200b\u4e3a\u200bcpu\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\uff1b\n */\n#define configCPU_CLOCK_HZ (SystemCoreClock)\n\n// RTOS\u200b\u7cfb\u7edf\u200b\u8282\u62cd\u200b\u4e2d\u65ad\u200b\u7684\u200b\u9891\u7387\u200b\u3002\u200b\u5373\u200b\u4e00\u79d2\u200b\u4e2d\u65ad\u200b\u7684\u200b\u6b21\u6570\u200b\uff0c\u200b\u6bcf\u6b21\u200b\u4e2d\u65ad\u200bRTOS\u200b\u90fd\u200b\u4f1a\u200b\u8fdb\u884c\u200b\u4efb\u52a1\u8c03\u5ea6\u200b\n#define configTICK_RATE_HZ ((TickType_t)1000)\n\n// \u200b\u53ef\u200b\u4f7f\u7528\u200b\u7684\u200b\u6700\u5927\u200b\u4f18\u5148\u7ea7\u200b\n#define configMAX_PRIORITIES (32)\n\n// \u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u4f7f\u7528\u200b\u7684\u200b\u5806\u6808\u200b\u5927\u5c0f\u200b\n#define configMINIMAL_STACK_SIZE ((unsigned short)128)\n\n// \u200b\u4efb\u52a1\u200b\u540d\u5b57\u200b\u5b57\u7b26\u4e32\u200b\u957f\u5ea6\u200b\n#define configMAX_TASK_NAME_LEN (16)\n\n// \u200b\u7cfb\u7edf\u200b\u8282\u62cd\u200b\u8ba1\u6570\u5668\u200b\u53d8\u91cf\u200b\u6570\u636e\u7c7b\u578b\u200b\uff0c1\u200b\u8868\u793a\u200b\u4e3a\u200b16\u200b\u4f4d\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6574\u5f62\u200b\uff0c0\u200b\u8868\u793a\u200b\u4e3a\u200b32\u200b\u4f4d\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6574\u5f62\u200b\n#define configUSE_16_BIT_TICKS 0\n\n// \u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u653e\u5f03\u200bCPU\u200b\u4f7f\u7528\u6743\u200b\u7ed9\u200b\u5176\u4ed6\u200b\u540c\u200b\u4f18\u5148\u7ea7\u200b\u7684\u200b\u7528\u6237\u200b\u4efb\u52a1\u200b\n#define configIDLE_SHOULD_YIELD 1\n\n// \u200b\u542f\u7528\u200b\u961f\u5217\u200b\n#define configUSE_QUEUE_SETS 1\n\n// \u200b\u5f00\u542f\u200b\u4efb\u52a1\u200b\u901a\u77e5\u200b\u529f\u80fd\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u5f00\u542f\u200b\n#define configUSE_TASK_NOTIFICATIONS 1\n\n// \u200b\u4f7f\u7528\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\n#define configUSE_MUTEXES 1\n\n// \u200b\u4f7f\u7528\u200b\u9012\u5f52\u200b\u4e92\u65a5\u200b\u4fe1\u53f7\u91cf\u200b\n#define configUSE_RECURSIVE_MUTEXES 1\n\n// \u200b\u4e3a\u200b1\u200b\u65f6\u200b\u4f7f\u7528\u200b\u8ba1\u6570\u200b\u4fe1\u53f7\u91cf\u200b\n#define configUSE_COUNTING_SEMAPHORES 1\n\n/* \u200b\u8bbe\u7f6e\u200b\u53ef\u4ee5\u200b\u6ce8\u518c\u200b\u7684\u200b\u4fe1\u53f7\u91cf\u200b\u548c\u200b\u6d88\u606f\u200b\u961f\u5217\u200b\u4e2a\u6570\u200b */\n#define configQUEUE_REGISTRY_SIZE 10\n\n#define configUSE_APPLICATION_TASK_TAG 0\n\n/*****************************************************************\n              FreeRTOS\u200b\u4e0e\u200b\u5185\u5b58\u200b\u7533\u8bf7\u200b\u6709\u5173\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n*****************************************************************/\n// \u200b\u652f\u6301\u200b\u52a8\u6001\u5185\u5b58\u200b\u7533\u8bf7\u200b\n#define configSUPPORT_DYNAMIC_ALLOCATION 1\n// \u200b\u652f\u6301\u200b\u9759\u6001\u200b\u5185\u5b58\u200b\n#define configSUPPORT_STATIC_ALLOCATION 0\n// \u200b\u7cfb\u7edf\u200b\u6240\u6709\u200b\u603b\u200b\u7684\u200b\u5806\u200b\u5927\u5c0f\u200b\n#define configTOTAL_HEAP_SIZE ((size_t)(36 * 1024))\n\n/***************************************************************\n             FreeRTOS\u200b\u4e0e\u200b\u94a9\u5b50\u200b\u51fd\u6570\u200b\u6709\u5173\u200b\u7684\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n**************************************************************/\n/* \u200b\u7f6e\u200b1\uff1a\u200b\u4f7f\u7528\u200b\u7a7a\u95f2\u200b\u94a9\u5b50\u200b\uff08Idle Hook\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b\u56de\u8c03\u200b\u51fd\u6570\u200b\uff09\uff1b\u200b\u7f6e\u200b0\uff1a\u200b\u5ffd\u7565\u200b\u7a7a\u95f2\u200b\u94a9\u5b50\u200b\n *\n * \u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u94a9\u5b50\u200b\u662f\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\u7531\u200b\u7528\u6237\u200b\u6765\u200b\u5b9e\u73b0\u200b\uff0c\n * FreeRTOS\u200b\u89c4\u5b9a\u200b\u4e86\u200b\u51fd\u6570\u200b\u7684\u200b\u540d\u5b57\u200b\u548c\u200b\u53c2\u6570\u200b\uff1avoid vApplicationIdleHook(void )\uff0c\n * \u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u5468\u671f\u200b\u90fd\u200b\u4f1a\u200b\u88ab\u200b\u8c03\u7528\u200b\n * \u200b\u5bf9\u4e8e\u200b\u5df2\u7ecf\u200b\u5220\u9664\u200b\u7684\u200bRTOS\u200b\u4efb\u52a1\u200b\uff0c\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u91ca\u653e\u200b\u5206\u914d\u200b\u7ed9\u200b\u5b83\u4eec\u200b\u7684\u200b\u5806\u6808\u200b\u5185\u5b58\u200b\u3002\n * \u200b\u56e0\u6b64\u200b\u5fc5\u987b\u200b\u4fdd\u8bc1\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u53ef\u4ee5\u200b\u88ab\u200bCPU\u200b\u6267\u884c\u200b\n * \u200b\u4f7f\u7528\u200b\u7a7a\u95f2\u200b\u94a9\u5b50\u200b\u51fd\u6570\u200b\u8bbe\u7f6e\u200bCPU\u200b\u8fdb\u5165\u200b\u7701\u200b\u7535\u200b\u6a21\u5f0f\u200b\u662f\u200b\u5f88\u200b\u5e38\u89c1\u200b\u7684\u200b\n * \u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b\u4f1a\u200b\u5f15\u8d77\u200b\u7a7a\u95f2\u200b\u4efb\u52a1\u200b\u963b\u585e\u200b\u7684\u200bAPI\u200b\u51fd\u6570\u200b\n */\n#define configUSE_IDLE_HOOK 0\n\n/* \u200b\u7f6e\u200b1\uff1a\u200b\u4f7f\u7528\u200b\u65f6\u95f4\u200b\u7247\u200b\u94a9\u5b50\u200b\uff08Tick Hook\uff09\uff1b\u200b\u7f6e\u200b0\uff1a\u200b\u5ffd\u7565\u200b\u65f6\u95f4\u200b\u7247\u200b\u94a9\u5b50\u200b\n *\n *\n * \u200b\u65f6\u95f4\u200b\u7247\u200b\u94a9\u5b50\u200b\u662f\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\u7531\u200b\u7528\u6237\u200b\u6765\u200b\u5b9e\u73b0\u200b\uff0c\n * FreeRTOS\u200b\u89c4\u5b9a\u200b\u4e86\u200b\u51fd\u6570\u200b\u7684\u200b\u540d\u5b57\u200b\u548c\u200b\u53c2\u6570\u200b\uff1avoid vApplicationTickHook(void )\n * \u200b\u65f6\u95f4\u200b\u7247\u200b\u4e2d\u65ad\u200b\u53ef\u4ee5\u200b\u5468\u671f\u6027\u200b\u7684\u200b\u8c03\u7528\u200b\n * \u200b\u51fd\u6570\u200b\u5fc5\u987b\u200b\u975e\u5e38\u200b\u77ed\u5c0f\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u5927\u91cf\u200b\u4f7f\u7528\u200b\u5806\u6808\u200b\uff0c\n * \u200b\u4e0d\u80fd\u200b\u8c03\u7528\u200b\u4ee5\u200b\u201dFromISR\" \u200b\u6216\u200b \"FROM_ISR\u201d\u200b\u7ed3\u5c3e\u200b\u7684\u200bAPI\u200b\u51fd\u6570\u200b\n */\n/* xTaskIncrementTick\u200b\u51fd\u6570\u200b\u662f\u200b\u5728\u200bxPortSysTickHandler\u200b\u4e2d\u65ad\u200b\u51fd\u6570\u200b\u4e2d\u200b\u88ab\u200b\u8c03\u7528\u200b\u7684\u200b\u3002\n * \u200b\u56e0\u6b64\u200b\uff0cvApplicationTickHook()\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u7684\u200b\u65f6\u95f4\u200b\u5fc5\u987b\u200b\u5f88\u200b\u77ed\u624d\u884c\u200b\n */\n#define configUSE_TICK_HOOK 0\n\n// \u200b\u4f7f\u7528\u200b\u5185\u5b58\u200b\u7533\u8bf7\u200b\u5931\u8d25\u200b\u94a9\u5b50\u200b\u51fd\u6570\u200b\n#define configUSE_MALLOC_FAILED_HOOK 0\n\n/*\n * \u200b\u5927\u4e8e\u200b0\u200b\u65f6\u200b\u542f\u7528\u200b\u5806\u6808\u200b\u6ea2\u51fa\u200b\u68c0\u6d4b\u200b\u529f\u80fd\u200b\uff0c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u6b64\u200b\u529f\u80fd\u200b\n * \u200b\u7528\u6237\u200b\u5fc5\u987b\u200b\u63d0\u4f9b\u200b\u4e00\u4e2a\u200b\u6808\u200b\u6ea2\u51fa\u200b\u94a9\u5b50\u200b\u51fd\u6570\u200b\uff0c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u7684\u8bdd\u200b\n * \u200b\u6b64\u503c\u200b\u53ef\u4ee5\u200b\u4e3a\u200b1\u200b\u6216\u8005\u200b2\uff0c\u200b\u56e0\u4e3a\u200b\u6709\u200b\u4e24\u79cd\u200b\u6808\u200b\u6ea2\u51fa\u200b\u68c0\u6d4b\u200b\u65b9\u6cd5\u200b */\n#define configCHECK_FOR_STACK_OVERFLOW 0\n\n/********************************************************************\n          FreeRTOS\u200b\u4e0e\u200b\u8fd0\u884c\u200b\u65f6\u95f4\u200b\u548c\u200b\u4efb\u52a1\u200b\u72b6\u6001\u200b\u6536\u96c6\u200b\u6709\u5173\u200b\u7684\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n**********************************************************************/\n// \u200b\u542f\u7528\u200b\u8fd0\u884c\u200b\u65f6\u95f4\u200b\u7edf\u8ba1\u200b\u529f\u80fd\u200b\n#define configGENERATE_RUN_TIME_STATS 0\n// \u200b\u542f\u7528\u200b\u53ef\u89c6\u5316\u200b\u8ddf\u8e2a\u200b\u8c03\u8bd5\u200b\n#define configUSE_TRACE_FACILITY 0\n/* \u200b\u4e0e\u200b\u5b8f\u200bconfigUSE_TRACE_FACILITY\u200b\u540c\u65f6\u200b\u4e3a\u200b1\u200b\u65f6\u4f1a\u200b\u7f16\u8bd1\u200b\u4e0b\u9762\u200b3\u200b\u4e2a\u200b\u51fd\u6570\u200b\n * prvWriteNameToBuffer()\n * vTaskList(),\n * vTaskGetRunTimeStats()\n */\n#define configUSE_STATS_FORMATTING_FUNCTIONS 1\n\n/********************************************************************\n                FreeRTOS\u200b\u4e0e\u200b\u534f\u7a0b\u200b\u6709\u5173\u200b\u7684\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n*********************************************************************/\n// \u200b\u542f\u7528\u200b\u534f\u7a0b\u200b\uff0c\u200b\u542f\u7528\u200b\u534f\u7a0b\u200b\u4ee5\u540e\u200b\u5fc5\u987b\u200b\u6dfb\u52a0\u200b\u6587\u4ef6\u200bcroutine.c\n#define configUSE_CO_ROUTINES 0\n// \u200b\u534f\u7a0b\u200b\u7684\u200b\u6709\u6548\u200b\u4f18\u5148\u7ea7\u200b\u6570\u76ee\u200b\n#define configMAX_CO_ROUTINE_PRIORITIES (2)\n\n/***********************************************************************\n                FreeRTOS\u200b\u4e0e\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u6709\u5173\u200b\u7684\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n**********************************************************************/\n// \u200b\u542f\u7528\u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\n#define configUSE_TIMERS 1\n// \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4f18\u5148\u7ea7\u200b\n#define configTIMER_TASK_PRIORITY (configMAX_PRIORITIES - 1)\n// \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u961f\u5217\u200b\u957f\u5ea6\u200b\n#define configTIMER_QUEUE_LENGTH 10\n// \u200b\u8f6f\u4ef6\u200b\u5b9a\u65f6\u5668\u200b\u4efb\u52a1\u200b\u5806\u6808\u200b\u5927\u5c0f\u200b\n#define configTIMER_TASK_STACK_DEPTH (configMINIMAL_STACK_SIZE * 2)\n\n/************************************************************\n            FreeRTOS\u200b\u53ef\u200b\u9009\u200b\u51fd\u6570\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n************************************************************/\n#define INCLUDE_xTaskGetSchedulerState 1\n#define INCLUDE_vTaskPrioritySet 1\n#define INCLUDE_uxTaskPriorityGet 1\n#define INCLUDE_vTaskDelete 1\n#define INCLUDE_vTaskCleanUpResources 1\n#define INCLUDE_vTaskSuspend 1\n#define INCLUDE_vTaskDelayUntil 1\n#define INCLUDE_vTaskDelay 1\n#define INCLUDE_eTaskGetState 1\n#define INCLUDE_xTimerPendFunctionCall 1\n// #define INCLUDE_xTaskGetCurrentTaskHandle       1\n// #define INCLUDE_uxTaskGetStackHighWaterMark     0\n// #define INCLUDE_xTaskGetIdleTaskHandle          0\n\n/******************************************************************\n            FreeRTOS\u200b\u4e0e\u200b\u4e2d\u65ad\u200b\u6709\u5173\u200b\u7684\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n******************************************************************/\n#ifdef __NVIC_PRIO_BITS\n#define configPRIO_BITS __NVIC_PRIO_BITS\n#else\n#define configPRIO_BITS 4\n#endif\n// \u200b\u4e2d\u65ad\u200b\u6700\u200b\u4f4e\u4f18\u5148\u7ea7\u200b\n#define configLIBRARY_LOWEST_INTERRUPT_PRIORITY 15\n\n// \u200b\u7cfb\u7edf\u200b\u53ef\u200b\u7ba1\u7406\u200b\u7684\u200b\u6700\u9ad8\u200b\u4e2d\u65ad\u200b\u4f18\u5148\u7ea7\u200b\n#define configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY 5\n\n#define configKERNEL_INTERRUPT_PRIORITY \\\n(configLIBRARY_LOWEST_INTERRUPT_PRIORITY &lt;&lt; (8 - configPRIO_BITS)) /* 240 */\n\n#define configMAX_SYSCALL_INTERRUPT_PRIORITY \\\n(configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY &lt;&lt; (8 - configPRIO_BITS))\n\n/****************************************************************\n            FreeRTOS\u200b\u4e0e\u200b\u4e2d\u65ad\u200b\u670d\u52a1\u200b\u51fd\u6570\u200b\u6709\u5173\u200b\u7684\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\n****************************************************************/\n#define xPortPendSVHandler PendSV_Handler\n#define vPortSVCHandler SVC_Handler\n\n/* \u200b\u4ee5\u4e0b\u200b\u4e3a\u200b\u4f7f\u7528\u200bPercepio Tracealyzer\u200b\u9700\u8981\u200b\u7684\u200b\u4e1c\u897f\u200b\uff0c\n * \u200b\u4e0d\u200b\u9700\u8981\u200b\u65f6\u200b\u5c06\u200b configUSE_TRACE_FACILITY \u200b\u5b9a\u4e49\u200b\u4e3a\u200b 0 \n */\n#if (configUSE_TRACE_FACILITY == 1)\n#include \"trcRecorder.h\"\n// \u200b\u542f\u7528\u200b\u4e00\u4e2a\u200b\u53ef\u200b\u9009\u200b\u51fd\u6570\u200b\uff08\u200b\u8be5\u200b\u51fd\u6570\u200b\u88ab\u200b Trace\u200b\u6e90\u7801\u200b\u4f7f\u7528\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u8be5\u503c\u200b\u4e3a\u200b0 \u200b\u8868\u793a\u200b\u4e0d\u7528\u200b\uff09\n#define INCLUDE_xTaskGetCurrentTaskHandle 1 \n#endif\n\n#endif /* FREERTOS_CONFIG_H */\n</code></pre>"}]}